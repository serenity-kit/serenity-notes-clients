<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="ie6" > <![endif]-->
<!--[if IE 7]>    <html lang="en" class="ie7" > <![endif]-->
<!--[if IE 8]>    <html lang="en" class="ie8" > <![endif]-->
<!--[if IE 9]>    <html lang="en" class="ie9" > <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="" >
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <title>My App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

     

    <style>
      /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */

      /* Document
   ========================================================================== */

      /**
 * 1. Correct the line height in all browsers.
 * 2. Prevent adjustments of font size after orientation changes in iOS.
 */

      html {
        line-height: 1.15; /* 1 */
        -webkit-text-size-adjust: 100%; /* 2 */
      }

      /* Sections
   ========================================================================== */

      /**
 * Remove the margin in all browsers.
 */

      body {
        margin: 0;
      }

      /**
 * Render the `main` element consistently in IE.
 */

      main {
        display: block;
      }

      /**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

      h1 {
        font-size: 2em;
        margin: 0.67em 0;
      }

      /* Grouping content
   ========================================================================== */

      /**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

      hr {
        box-sizing: content-box; /* 1 */
        height: 0; /* 1 */
        overflow: visible; /* 2 */
      }

      /**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

      pre {
        font-family: monospace, monospace; /* 1 */
        font-size: 1em; /* 2 */
      }

      /* Text-level semantics
   ========================================================================== */

      /**
 * Remove the gray background on active links in IE 10.
 */

      a {
        background-color: transparent;
      }

      /**
 * 1. Remove the bottom border in Chrome 57-
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

      abbr[title] {
        border-bottom: none; /* 1 */
        text-decoration: underline; /* 2 */
        text-decoration: underline dotted; /* 2 */
      }

      /**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

      b,
      strong {
        font-weight: bolder;
      }

      /**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

      code,
      kbd,
      samp {
        font-family: monospace, monospace; /* 1 */
        font-size: 1em; /* 2 */
      }

      /**
 * Add the correct font size in all browsers.
 */

      small {
        font-size: 80%;
      }

      /**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      sub {
        bottom: -0.25em;
      }

      sup {
        top: -0.5em;
      }

      /* Embedded content
   ========================================================================== */

      /**
 * Remove the border on images inside links in IE 10.
 */

      img {
        border-style: none;
      }

      /* Forms
   ========================================================================== */

      /**
 * 1. Change the font styles in all browsers.
 * 2. Remove the margin in Firefox and Safari.
 */

      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit; /* 1 */
        font-size: 100%; /* 1 */
        line-height: 1.15; /* 1 */
        margin: 0; /* 2 */
      }

      /**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

      button,
      input {
        /* 1 */
        overflow: visible;
      }

      /**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

      button,
      select {
        /* 1 */
        text-transform: none;
      }

      /**
 * Correct the inability to style clickable types in iOS and Safari.
 */

      button,
      [type="button"],
      [type="reset"],
      [type="submit"] {
        -webkit-appearance: button;
      }

      /**
 * Remove the inner border and padding in Firefox.
 */

      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }

      /**
 * Restore the focus styles unset by the previous rule.
 */

      button:-moz-focusring,
      [type="button"]:-moz-focusring,
      [type="reset"]:-moz-focusring,
      [type="submit"]:-moz-focusring {
        outline: 1px dotted ButtonText;
      }

      /**
 * Correct the padding in Firefox.
 */

      fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      /**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

      legend {
        box-sizing: border-box; /* 1 */
        color: inherit; /* 2 */
        display: table; /* 1 */
        max-width: 100%; /* 1 */
        padding: 0; /* 3 */
        white-space: normal; /* 1 */
      }

      /**
 * Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

      progress {
        vertical-align: baseline;
      }

      /**
 * Remove the default vertical scrollbar in IE 10+.
 */

      textarea {
        overflow: auto;
      }

      /**
 * 1. Add the correct box sizing in IE 10.
 * 2. Remove the padding in IE 10.
 */

      [type="checkbox"],
      [type="radio"] {
        box-sizing: border-box; /* 1 */
        padding: 0; /* 2 */
      }

      /**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
        height: auto;
      }

      /**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

      [type="search"] {
        -webkit-appearance: textfield; /* 1 */
        outline-offset: -2px; /* 2 */
      }

      /**
 * Remove the inner padding in Chrome and Safari on macOS.
 */

      [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none;
      }

      /**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

      ::-webkit-file-upload-button {
        -webkit-appearance: button; /* 1 */
        font: inherit; /* 2 */
      }

      /* Interactive
   ========================================================================== */

      /*
 * Add the correct display in Edge, IE 10+, and Firefox.
 */

      details {
        display: block;
      }

      /*
 * Add the correct display in all browsers.
 */

      summary {
        display: list-item;
      }

      /* Misc
   ========================================================================== */

      /**
 * Add the correct display in IE 10+.
 */

      template {
        display: none;
      }

      /**
 * Add the correct display in IE 10.
 */

      [hidden] {
        display: none;
      }
    </style>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
        font-size: 16px;
      }

      .ProseMirror {
        position: relative;
      }

      .ProseMirror {
        word-wrap: break-word;
        white-space: pre-wrap;
        -webkit-font-variant-ligatures: none;
        font-variant-ligatures: none;
        /* min-height: calc(100vh - 40px); */
      }

      .ProseMirror pre {
        white-space: pre-wrap;
      }

      .ProseMirror li {
        position: relative;
      }

      .ProseMirror-hideselection *::selection {
        background: transparent;
      }
      .ProseMirror-hideselection *::-moz-selection {
        background: transparent;
      }
      .ProseMirror-hideselection {
        caret-color: transparent;
      }

      .ProseMirror-selectednode {
        outline: 2px solid #8cf;
      }

      /* Make sure li selections wrap around markers */

      li.ProseMirror-selectednode {
        outline: none;
      }

      li.ProseMirror-selectednode:after {
        content: "";
        position: absolute;
        left: -32px;
        right: -2px;
        top: -2px;
        bottom: -2px;
        border: 2px solid #8cf;
        pointer-events: none;
      }
      .ProseMirror-textblock-dropdown {
        min-width: 3em;
      }

      .ProseMirror-menu {
        margin: 0 -4px;
        line-height: 1;
      }

      .ProseMirror-tooltip .ProseMirror-menu {
        width: -webkit-fit-content;
        width: fit-content;
        white-space: pre;
      }

      .ProseMirror-menuitem {
        margin-right: 3px;
        display: inline-block;
      }

      .ProseMirror-menuitem:nth-last-child(2) {
        position: absolute;
        right: 3.8rem;
      }

      .ProseMirror-menuitem:nth-last-child(1) {
        float: right;
      }

      .ProseMirror-menuseparator {
        border-right: 1px solid #ddd;
        margin-right: 3px;
      }

      .ProseMirror-menuseparator:nth-last-child(3) {
        display: none;
      }

      .ProseMirror-menu-dropdown,
      .ProseMirror-menu-dropdown-menu {
        font-size: 90%;
        white-space: nowrap;
      }

      .ProseMirror-menu-dropdown {
        vertical-align: 1px;
        cursor: pointer;
        position: relative;
        padding-right: 15px;
      }

      .ProseMirror-menu-dropdown-wrap {
        padding: 1px 0 1px 4px;
        display: inline-block;
        position: relative;
      }

      .ProseMirror-menu-dropdown:after {
        content: "";
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-top: 4px solid currentColor;
        opacity: 0.6;
        position: absolute;
        right: 4px;
        top: calc(50% - 2px);
      }

      .ProseMirror-menu-dropdown-menu,
      .ProseMirror-menu-submenu {
        position: absolute;
        background: white;
        color: #666;
        border: 1px solid #aaa;
        padding: 2px;
      }

      .ProseMirror-menu-dropdown-menu {
        z-index: 15;
        min-width: 6em;
      }

      .ProseMirror-menu-dropdown-item {
        cursor: pointer;
        padding: 2px 8px 2px 4px;
      }

      .ProseMirror-menu-dropdown-item:hover {
        background: #f2f2f2;
      }

      .ProseMirror-menu-submenu-wrap {
        position: relative;
        margin-right: -4px;
      }

      .ProseMirror-menu-submenu-label:after {
        content: "";
        border-top: 4px solid transparent;
        border-bottom: 4px solid transparent;
        border-left: 4px solid currentColor;
        opacity: 0.6;
        position: absolute;
        right: 4px;
        top: calc(50% - 4px);
      }

      .ProseMirror-menu-submenu {
        display: none;
        min-width: 4em;
        left: 100%;
        top: -3px;
      }

      .ProseMirror-menu-active {
        background: #000;
        color: #fff;
        border-radius: 4px;
      }

      .ProseMirror-menu-disabled {
        opacity: 0.3;
      }

      .ProseMirror-menu-submenu-wrap:hover .ProseMirror-menu-submenu,
      .ProseMirror-menu-submenu-wrap-active .ProseMirror-menu-submenu {
        display: block;
      }

      .ProseMirror-menubar {
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        position: fixed;
        color: #000;
        padding: 0.5rem 1rem;
        bottom: 0;
        left: 0;
        right: 0;
        border-top: 1px solid #ddd;
        background: white;
        z-index: 10;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        overflow: visible;
      }

      .ProseMirror-icon {
        display: inline-block;
        line-height: 0.8;
        padding: 0.5rem 0.8rem;
        cursor: pointer;
      }

      .ProseMirror-menu-disabled.ProseMirror-icon {
        cursor: default;
      }

      .ProseMirror-icon svg {
        fill: currentColor;
        height: 1em;
      }

      .ProseMirror-icon span {
        vertical-align: text-top;
      }
      .ProseMirror-gapcursor {
        display: none;
        pointer-events: none;
        position: absolute;
      }

      .ProseMirror-gapcursor:after {
        content: "";
        display: block;
        position: absolute;
        top: -2px;
        width: 20px;
        border-top: 1px solid black;
        animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
      }

      @keyframes ProseMirror-cursor-blink {
        to {
          visibility: hidden;
        }
      }

      .ProseMirror-focused .ProseMirror-gapcursor {
        display: block;
      }
      /* Add space around the hr to make clicking it easier */

      .ProseMirror-example-setup-style hr {
        padding: 2px 10px;
        border: none;
        margin: 1em 0;
      }

      .ProseMirror-example-setup-style hr:after {
        content: "";
        display: block;
        height: 1px;
        background-color: silver;
        line-height: 2px;
      }

      .ProseMirror ul,
      .ProseMirror ol {
        padding-left: 30px;
      }

      .ProseMirror blockquote {
        padding-left: 1em;
        border-left: 3px solid #eee;
        margin-left: 0;
        margin-right: 0;
      }

      .ProseMirror-example-setup-style img {
        cursor: default;
      }

      .ProseMirror-prompt {
        background: white;
        padding: 5px 10px 5px 15px;
        border: 1px solid silver;
        position: fixed;
        border-radius: 3px;
        z-index: 11;
        box-shadow: -0.5px 2px 5px rgba(0, 0, 0, 0.2);
      }

      .ProseMirror-prompt h5 {
        margin: 0;
        font-weight: normal;
        font-size: 100%;
        color: #444;
      }

      .ProseMirror-prompt input[type="text"],
      .ProseMirror-prompt textarea {
        background: #eee;
        border: none;
        outline: none;
      }

      .ProseMirror-prompt input[type="text"] {
        padding: 0 4px;
      }

      .ProseMirror-prompt-close {
        position: absolute;
        left: 2px;
        top: 1px;
        color: #666;
        border: none;
        background: transparent;
        padding: 0;
      }

      .ProseMirror-prompt-close:after {
        content: "âœ•";
        font-size: 12px;
      }

      .ProseMirror-invalid {
        background: #ffc;
        border: 1px solid #cc7;
        border-radius: 4px;
        padding: 5px 10px;
        position: absolute;
        min-width: 10em;
      }

      .ProseMirror-prompt-buttons {
        margin-top: 5px;
        display: none;
      }
      #editor,
      .editor {
        background: white;
        color: black;
      }

      .ProseMirror p:first-child,
      .ProseMirror h1:first-child,
      .ProseMirror h2:first-child,
      .ProseMirror h3:first-child,
      .ProseMirror h4:first-child,
      .ProseMirror h5:first-child,
      .ProseMirror h6:first-child {
        margin-top: 10px;
      }

      .ProseMirror {
        padding: 1rem 1rem 0rem 1rem;
        line-height: 1.2;
        outline: none;
        overflow-y: scroll; /* necessary for bottom bar */
        height: 100vh; /* necessary for bottom bar */
      }

      .ProseMirror p {
        margin-bottom: 1em;
      }

      placeholder {
        display: inline;
        border: 1px solid #ccc;
        color: #ccc;
      }
      placeholder:after {
        content: "â˜";
        font-size: 200%;
        line-height: 0.1;
        font-weight: bold;
      }
      .ProseMirror img {
        max-width: 100px;
      }
      /* this is a rough fix for the first cursor position when the first paragraph is empty */
      .ProseMirror > .ProseMirror-yjs-cursor:first-child {
        margin-top: 16px;
      }
      .ProseMirror p:first-child,
      .ProseMirror h1:first-child,
      .ProseMirror h2:first-child,
      .ProseMirror h3:first-child,
      .ProseMirror h4:first-child,
      .ProseMirror h5:first-child,
      .ProseMirror h6:first-child {
        margin-top: 16px;
      }
      .ProseMirror-yjs-cursor {
        position: absolute;
        border-left: black;
        border-left-style: solid;
        border-left-width: 2px;
        border-color: orange;
        height: 1em;
        word-break: normal;
        pointer-events: none;
      }
      .ProseMirror-yjs-cursor > div {
        position: relative;
        top: -1.05em;
        font-size: 13px;
        background-color: rgb(250, 129, 0);
        font-family: serif;
        font-style: normal;
        font-weight: normal;
        line-height: normal;
        user-select: none;
        color: white;
        padding-left: 2px;
        padding-right: 2px;
      }

      #editor-toolbar {
        height: 0px;
        position: fixed;
        color: #000;
        bottom: 0;
        left: 0;
        right: 0;
        border-top: 1px solid #ddd;
        background: white;
        z-index: 10;
        box-sizing: border-box;
        overflow: visible;
      }
    </style>
    <style>
      /* checklist style */
      ul[data-type="checklist"] {
        padding-left: 0;
        margin-top: 0;
      }
      li[data-type="checklist_item"] {
        display: flex;
        flex-direction: row;
      }

      /* make sure it aligns with 30px padding of lists */
      .checklist-checkbox-wrapper {
        height: 2em;
        width: 2em;
        box-sizing: border-box;
        margin-left: -0.4em;
        margin-right: 0.275em;
        position: relative;
        top: 10px;
        bottom: -15px;
        user-select: none;
        -webkit-user-select: none;
        cursor: pointer;
        background-color: transparent;
        display: flex;
        z-index: 100; /* to overlap the top margin of the next line */
      }

      .checklist-checkbox {
        border: 2px solid #4454cf;
        height: 1.25em;
        width: 1.25em;
        box-sizing: border-box;
        margin-left: 0.4em;
        margin-top: 0.4em;
        border-radius: 1.25em;
      }
      .checklist-content {
        flex: 1;
      }
      .checklist-content > p {
        margin-bottom: 0;
      }
      .checklist-content > ul[data-type="checklist"] {
        margin: 0 0;
      }

      li[data-checked="true"]
        > .checklist-checkbox-wrapper
        > .checklist-checkbox {
        background-color: #4454cf;
      }

      .check {
        display: none;
        width: 16px;
        height: 16px;
        -webkit-transform: rotate(45deg); /* Chrome, Safari, Opera */
        transform: rotate(45deg);
      }

      li[data-checked="true"]
        > .checklist-checkbox-wrapper
        > .checklist-checkbox
        .check {
        display: inline-block;
      }

      .check-stem {
        position: absolute;
        width: 2px;
        height: 12px;
        background-color: white;
        left: 9px;
        top: 1px;
      }

      .check-kick {
        position: absolute;
        width: 7px;
        height: 2px;
        background-color: white;
        left: 4px;
        top: 12px;
      }
    </style>
  </head>
  <body>
       
    <div id="editor">
      <div id="editor-toolbar" />
    </div>
  <script type="text/javascript">!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/prosemirror/dist/",n(n.s=35)}([function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"g",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return E}));var r=n(15),o=n(5),i=n(2);Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,i.h;const s=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&o.c(e)===e);Number.isNaN;class a{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const l=()=>new a,c=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(r.b(e.cbuf.buffer,0,e.cpos),n),t},u=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},f=u,d=(e,t)=>{for(;t>i.k;)u(e,i.g|i.k&t),t>>>=7;u(e,i.k&t)},h=(e,t)=>{const n=o.d(t);for(n&&(t=-t),u(e,(t>i.j?i.g:0)|(n?i.f:0)|i.j&t),t>>>=6;t>0;)u(e,(t>i.k?i.g:0)|i.k&t),t>>>=7},p=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;d(e,r);for(let t=0;t<r;t++)u(e,n.codePointAt(t))},m=(e,t)=>g(e,c(t)),g=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=o.g(n-r,t.length),s=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(o.f(2*n,s)),e.cbuf.set(t.subarray(i)),e.cpos=s)},v=(e,t)=>{d(e,t.byteLength),g(e,t)},y=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(r.b(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*o.f(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},b=new DataView(new ArrayBuffer(4)),w=(e,t)=>{switch(typeof t){case"string":u(e,119),p(e,t);break;case"number":s(t)&&t<=i.h?(u(e,125),h(e,t)):(n=t,b.setFloat32(0,n),b.getFloat32(0)===n?(u(e,124),((e,t)=>{y(e,4).setFloat32(0,t,!1)})(e,t)):(u(e,123),((e,t)=>{y(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":u(e,122),((e,t)=>{y(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)u(e,126);else if(t instanceof Array){u(e,117),d(e,t.length);for(let n=0;n<t.length;n++)w(e,t[n])}else if(t instanceof Uint8Array)u(e,116),v(e,t);else{u(e,118);const n=Object.keys(t);d(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];p(e,o),w(e,t[o])}}break;case"boolean":u(e,t?120:121);break;default:u(e,127)}var n};class k extends a{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&d(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const S=e=>{e.count>0&&(h(e.encoder,1===e.count?e.s:-e.s),e.count>1&&d(e.encoder,e.count-2))};class x{constructor(){this.encoder=new a,this.s=0,this.count=0}write(e){this.s===e?this.count++:(S(this),this.count=1,this.s=e)}toUint8Array(){return S(this),c(this.encoder)}}const C=e=>{if(e.count>0){const t=e.diff<<1|(1===e.count?0:1);h(e.encoder,t),e.count>1&&d(e.encoder,e.count-2)}};class O{constructor(){this.encoder=new a,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(C(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return C(this),c(this.encoder)}}class E{constructor(){this.sarr=[],this.s="",this.lensE=new x}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new a;return this.sarr.push(this.s),this.s="",p(e,this.sarr.join("")),g(e,this.lensE.toUint8Array()),c(e)}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"h",(function(){return f})),n.d(t,"k",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return k}));var r=n(15),o=n(2),i=n(5);class s{constructor(e){this.arr=e,this.pos=0}}const a=e=>new s(e),l=e=>e.pos!==e.arr.length,c=(e,t)=>{const n=r.b(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},u=e=>c(e,d(e)),f=e=>e.arr[e.pos++],d=e=>{let t=0,n=0;for(;;){const r=e.arr[e.pos++];if(t|=(r&o.k)<<n,n+=7,r<o.g)return t>>>0;if(n>35)throw new Error("Integer out of range!")}},h=e=>{let t=e.arr[e.pos++],n=t&o.j,r=6;const i=(t&o.f)>0?-1:1;if(0==(t&o.g))return i*n;for(;;){if(t=e.arr[e.pos++],n|=(t&o.k)<<r,r+=7,t<o.g)return i*(n>>>0);if(r>41)throw new Error("Integer out of range!")}},p=e=>{let t=d(e);if(0===t)return"";{let n=String.fromCodePoint(f(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(f(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},m=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},g=[e=>{},e=>null,h,e=>m(e,4).getFloat32(0,!1),e=>m(e,8).getFloat64(0,!1),e=>m(e,8).getBigInt64(0,!1),e=>!1,e=>!0,p,e=>{const t=d(e),n={};for(let r=0;r<t;r++){n[p(e)]=v(e)}return n},e=>{const t=d(e),n=[];for(let r=0;r<t;r++)n.push(v(e));return n},u],v=e=>g[127-f(e)](e);class y extends s{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),l(this)?this.count=d(this)+1:this.count=-1),this.count--,this.s}}class b extends s{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=h(this);const e=i.d(this.s);this.count=1,e&&(this.s=-this.s,this.count=d(this)+2)}return this.count--,this.s}}class w extends s{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=h(this),t=1&e;this.diff=e>>1,this.count=1,t&&(this.count=d(this)+2)}return this.s+=this.diff,this.count--,this.s}}class k{constructor(e){this.decoder=new b(e),this.str=p(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"h",(function(){return p}));const r=1,o=2,i=4,s=8,a=32,l=64,c=128,u=31,f=63,d=127,h=255,p=2147483647},function(e,t,n){"use strict";n.d(t,"a",(function(){return en})),n.d(t,"b",(function(){return rn})),n.d(t,"c",(function(){return Q})),n.d(t,"d",(function(){return gn})),n.d(t,"e",(function(){return be})),n.d(t,"f",(function(){return Ce})),n.d(t,"g",(function(){return qt})),n.d(t,"h",(function(){return Ut})),n.d(t,"i",(function(){return Kt})),n.d(t,"j",(function(){return le})),n.d(t,"k",(function(){return xe})),n.d(t,"l",(function(){return q})),n.d(t,"m",(function(){return ge})),n.d(t,"n",(function(){return Se})),n.d(t,"o",(function(){return Oe})),n.d(t,"p",(function(){return ve})),n.d(t,"q",(function(){return j})),n.d(t,"r",(function(){return ye})),n.d(t,"s",(function(){return B})),n.d(t,"t",(function(){return Ee})),n.d(t,"u",(function(){return ft}));var r=n(20),o=n(10),i=n(5),s=n(6),a=n(0),l=n(1),c=n(18),u=n(15),f=n(7),d=n(2),h=n(16),p=n(11),m=n(12);const g=Symbol;var v=n(8),y=n(9);JSON.stringify,JSON.parse;n(14);var b=n(19);const w=g(),k=g(),S=g(),x=g(),C=g(),O=g(),E=g(),M=g(),N=g(),_={[w]:v.a("font-weight","bold"),[k]:v.a("font-weight","normal"),[S]:v.a("color","blue"),[C]:v.a("color","green"),[x]:v.a("color","grey"),[O]:v.a("color","red"),[E]:v.a("color","purple"),[M]:v.a("color","orange"),[N]:v.a("color","black")},D={[w]:"[1m",[k]:"[2m",[S]:"[34m",[C]:"[32m",[x]:"[37m",[O]:"[31m",[E]:"[35m",[M]:"[38;5;208m",[N]:"[0m"},T=m.c?e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const n=e[r],o=D[n];if(void 0!==o)t.push(o);else{if(n.constructor!==String&&n.constructor!==Number)break;t.push(n)}}for(r>0&&(t.push("[0m"),n.push(t.join("")));r<e.length;r++){const t=e[r];t instanceof Symbol||n.push(t)}return n}:e=>{const t=[],n=[],r=s.c();let o=[],i=0;for(;i<e.length;i++){const o=e[i],s=_[o];if(void 0!==s)r.set(s.left,s.right);else{if(o.constructor!==String&&o.constructor!==Number)break;{const e=y.e(r);i>0||e.length>0?(t.push("%c"+o),n.push(e)):t.push(o)}}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const t=e[i];t instanceof Symbol||o.push(t)}return o},A=(...e)=>{console.log(...T(e)),P.forEach(t=>t.print(e))},P=new Set;b.a();const R=e=>({[Symbol.iterator](){return this},next:e}),I=(e,t)=>R(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});var z=n(13);r.a;class L{constructor(e,t){this.clock=e,this.len=t}}class V{constructor(){this.clients=new Map}}const B=(e,t,n)=>t.clients.forEach((t,r)=>{const o=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const i=t[r];Ve(e,o,i.clock,i.len,n)}}),j=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Object(i.c)((n+r)/2),s=e[o],a=s.clock;if(a<=t){if(t<a+s.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},F=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=Object(i.f)(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n})},$=e=>{const t=new V;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const s=r.slice();for(let t=n+1;t<e.length;t++)Object(o.a)(s,e[t].clients.get(i)||[]);t.clients.set(i,s)}});return F(t),t},U=(e,t,n,r)=>{Object(s.e)(e.clients,t,()=>[]).push(new L(n,r))},q=()=>new V,W=e=>{const t=q();return e.clients.forEach((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.id.clock===o+i&&n.deleted;n=e[1+ ++t])i+=n.length;r.push(new L(o,i))}}r.length>0&&t.clients.set(n,r)}),t},H=(e,t)=>{Object(a.m)(e.restEncoder,t.clients.size),t.clients.forEach((t,n)=>{e.resetDsCurVal(),Object(a.m)(e.restEncoder,n);const r=t.length;Object(a.m)(e.restEncoder,r);for(let n=0;n<r;n++){const r=t[n];e.writeDsClock(r.clock),e.writeDsLen(r.len)}})},K=e=>{const t=new V,n=Object(l.k)(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=Object(l.k)(e.restDecoder),r=Object(l.k)(e.restDecoder);if(r>0){const o=Object(s.e)(t.clients,n,()=>[]);for(let t=0;t<r;t++)o.push(new L(e.readDsClock(),e.readDsLen()))}}return t},J=(e,t,n)=>{const r=new V,o=Object(l.k)(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const o=Object(l.k)(e.restDecoder),i=Object(l.k)(e.restDecoder),s=n.clients.get(o)||[],a=Te(n,o);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<a){a<i&&U(r,o,a,i-a);let e=Pe(s,n),l=s[e];for(!l.deleted&&l.id.clock<n&&(s.splice(e+1,0,mn(t,l,n-l.id.clock)),e++);e<s.length&&(l=s[e++],l.id.clock<i);)l.deleted||(i<l.id.clock+l.length&&s.splice(e,0,mn(t,l,i-l.id.clock)),l.delete(t))}else U(r,o,n,i-n)}}if(r.clients.size>0){const e=new oe;return Object(a.m)(e.restEncoder,0),H(e,r),e.toUint8Array()}return null},Y=c.b;class Q extends r.a{constructor({guid:e=Object(c.c)(),gc:t=!0,gcFilter:n=(()=>!0),meta:r=null,autoLoad:o=!1}={}){super(),this.gc=t,this.gcFilter=n,this.clientID=Y(),this.guid=e,this.share=new Map,this.store=new _e,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=o,this.meta=r}load(){const e=this._item;null===e||this.shouldLoad||He(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(e=>e.guid))}transact(e,t=null){He(this,e,t)}get(e,t=lt){const n=Object(s.e)(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==lt&&r!==t){if(r===lt){const r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Ot)}getText(e=""){return this.get(e,Ft)}getMap(e=""){return this.get(e,Mt)}getXmlFragment(e=""){return this.get(e,Ut)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){Object(o.c)(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;e.deleted?t.doc=null:(t.doc=new Q({guid:this.guid,...t.opts}),t.doc._item=e),He(e.parent.doc,n=>{e.deleted||n.subdocsAdded.add(t.doc),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class G{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Object(l.k)(this.restDecoder)}readDsLen(){return Object(l.k)(this.restDecoder)}}class X extends G{readLeftID(){return ge(Object(l.k)(this.restDecoder),Object(l.k)(this.restDecoder))}readRightID(){return ge(Object(l.k)(this.restDecoder),Object(l.k)(this.restDecoder))}readClient(){return Object(l.k)(this.restDecoder)}readInfo(){return Object(l.h)(this.restDecoder)}readString(){return Object(l.j)(this.restDecoder)}readParentInfo(){return 1===Object(l.k)(this.restDecoder)}readTypeRef(){return Object(l.k)(this.restDecoder)}readLen(){return Object(l.k)(this.restDecoder)}readAny(){return Object(l.g)(this.restDecoder)}readBuf(){return Object(u.a)(Object(l.l)(this.restDecoder))}readJSON(){return JSON.parse(Object(l.j)(this.restDecoder))}readKey(){return Object(l.j)(this.restDecoder)}}class Z{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Object(l.k)(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Object(l.k)(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class ee extends Z{constructor(e){super(e),this.keys=[],Object(l.k)(e),this.keyClockDecoder=new l.a(Object(l.l)(e)),this.clientDecoder=new l.d(Object(l.l)(e)),this.leftClockDecoder=new l.a(Object(l.l)(e)),this.rightClockDecoder=new l.a(Object(l.l)(e)),this.infoDecoder=new l.b(Object(l.l)(e),l.h),this.stringDecoder=new l.c(Object(l.l)(e)),this.parentInfoDecoder=new l.b(Object(l.l)(e),l.h),this.typeRefDecoder=new l.d(Object(l.l)(e)),this.lenDecoder=new l.d(Object(l.l)(e))}readLeftID(){return new pe(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new pe(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Object(l.g)(this.restDecoder)}readBuf(){return Object(l.l)(this.restDecoder)}readJSON(){return Object(l.g)(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class te{constructor(){this.restEncoder=Object(a.e)()}toUint8Array(){return Object(a.f)(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Object(a.m)(this.restEncoder,e)}writeDsLen(e){Object(a.m)(this.restEncoder,e)}}class ne extends te{writeLeftID(e){Object(a.m)(this.restEncoder,e.client),Object(a.m)(this.restEncoder,e.clock)}writeRightID(e){Object(a.m)(this.restEncoder,e.client),Object(a.m)(this.restEncoder,e.clock)}writeClient(e){Object(a.m)(this.restEncoder,e)}writeInfo(e){Object(a.i)(this.restEncoder,e)}writeString(e){Object(a.l)(this.restEncoder,e)}writeParentInfo(e){Object(a.m)(this.restEncoder,e?1:0)}writeTypeRef(e){Object(a.m)(this.restEncoder,e)}writeLen(e){Object(a.m)(this.restEncoder,e)}writeAny(e){Object(a.g)(this.restEncoder,e)}writeBuf(e){Object(a.n)(this.restEncoder,e)}writeJSON(e){Object(a.l)(this.restEncoder,JSON.stringify(e))}writeKey(e){Object(a.l)(this.restEncoder,e)}}class re{constructor(){this.restEncoder=Object(a.e)(),this.dsCurrVal=0}toUint8Array(){return Object(a.f)(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Object(a.m)(this.restEncoder,t)}writeDsLen(e){0===e&&Object(f.c)(),Object(a.m)(this.restEncoder,e-1),this.dsCurrVal+=e}}class oe extends re{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a.a,this.clientEncoder=new a.d,this.leftClockEncoder=new a.a,this.rightClockEncoder=new a.a,this.infoEncoder=new a.b(a.i),this.stringEncoder=new a.c,this.parentInfoEncoder=new a.b(a.i),this.typeRefEncoder=new a.d,this.lenEncoder=new a.d}toUint8Array(){const e=Object(a.e)();return Object(a.m)(e,0),Object(a.n)(e,this.keyClockEncoder.toUint8Array()),Object(a.n)(e,this.clientEncoder.toUint8Array()),Object(a.n)(e,this.leftClockEncoder.toUint8Array()),Object(a.n)(e,this.rightClockEncoder.toUint8Array()),Object(a.n)(e,Object(a.f)(this.infoEncoder)),Object(a.n)(e,this.stringEncoder.toUint8Array()),Object(a.n)(e,Object(a.f)(this.parentInfoEncoder)),Object(a.n)(e,this.typeRefEncoder.toUint8Array()),Object(a.n)(e,this.lenEncoder.toUint8Array()),Object(a.j)(e,Object(a.f)(this.restEncoder)),Object(a.f)(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Object(a.g)(this.restEncoder,e)}writeBuf(e){Object(a.n)(this.restEncoder,e)}writeJSON(e){Object(a.g)(this.restEncoder,e)}writeKey(e){void 0===this.keyMap.get(e)?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(this.keyClock++)}}const ie=(e,t,n)=>{const r=new Map;n.forEach((e,n)=>{Te(t,n)>e&&r.set(n,e)}),De(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),Object(a.m)(e.restEncoder,r.size),Array.from(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([n,r])=>{((e,t,n,r)=>{r=Object(i.f)(r,t[0].id.clock);const o=Pe(t,r);Object(a.m)(e.restEncoder,t.length-o),e.writeClient(n),Object(a.m)(e.restEncoder,r);const s=t[o];s.write(e,r-s.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)})},se=(e,t,n,r=new ee(e))=>He(t,e=>{let t=!1;const n=e.doc,o=n.store,i=((e,t,n)=>{const r=[];let o=Array.from(n.keys()).sort((e,t)=>e-t);if(0===o.length)return null;const i=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let l=i();if(null===l&&0===r.length)return null;const c=new _e,u=new Map,f=(e,t)=>{const n=u.get(e);(null==n||n>t)&&u.set(e,t)};let d=l.refs[l.i++];const h=new Map,p=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,c.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):c.clients.set(t,[e]),o=o.filter(e=>e!==t)}r.length=0};for(;;){if(d.constructor!==bn){const o=Object(s.e)(h,d.id.client,()=>Te(t,d.id.client))-d.id.clock;if(o<0)r.push(d),f(d.id.client,d.id.clock-1),p();else{const i=d.getMissing(e,t);if(null!==i){r.push(d);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){d=e.refs[e.i++];continue}f(i,Te(t,i)),p()}else(0===o||o<d.length)&&(d.integrate(e,o),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(null!==l&&l.i<l.refs.length)d=l.refs[l.i++];else{if(l=i(),null===l)break;d=l.refs[l.i++]}}if(c.clients.size>0){const e=new oe;return ie(e,c,new Map),Object(a.m)(e.restEncoder,0),{missing:u,update:e.toUint8Array()}}return null})(e,o,((e,t)=>{const n=Object(s.c)(),r=Object(l.k)(e.restDecoder);for(let o=0;o<r;o++){const r=Object(l.k)(e.restDecoder),o=new Array(r),i=e.readClient();let s=Object(l.k)(e.restDecoder);n.set(i,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(d.i&r){case 0:{const t=e.readLen();o[n]=new Yt(ge(i,s),t),s+=t;break}case 10:{const t=Object(l.k)(e.restDecoder);o[n]=new bn(ge(i,s),t),s+=t;break}default:{const a=0==(r&(d.f|d.g)),l=new gn(ge(i,s),null,(r&d.g)===d.g?e.readLeftID():null,null,(r&d.f)===d.f?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(r&d.e)===d.e?e.readString():null,vn(e,r));o[n]=l,s+=l.length}}}}return n})(r,n)),c=o.pendingStructs;if(c){for(const[e,n]of c.missing)if(n<Te(o,e)){t=!0;break}if(i){for(const[e,t]of i.missing){const n=c.missing.get(e);(null==n||n>t)&&c.missing.set(e,t)}c.update=Qe([c.update,i.update])}}else o.pendingStructs=i;const u=J(r,e,o);if(o.pendingDs){const t=new ee(Object(l.e)(o.pendingDs));Object(l.k)(t.restDecoder);const n=J(t,e,o);o.pendingDs=u&&n?Qe([u,n]):u||n}else o.pendingDs=u;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,ae(e.doc,t)}},n,!1),ae=(e,t,n,r=ee)=>{const o=Object(l.e)(t);se(o,e,n,new r(o))},le=(e,t,n)=>ae(e,t,n,X);class ce{constructor(){this.l=[]}}const ue=()=>new ce,fe=(e,t)=>e.l.push(t),de=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},he=(e,t,n)=>Object(h.a)(e.l,[t,n]);class pe{constructor(e,t){this.client=e,this.clock=t}}const me=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,ge=(e,t)=>new pe(e,t),ve=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Object(f.c)()},ye=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class be{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}class we{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const ke=(e,t,n)=>{let r=null,o=null;return null===e._item?o=ve(e):r=ge(e._item.id.client,e._item.id.clock),new be(r,o,t,n)},Se=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return ke(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return ke(e,ge(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return ke(e,r.lastId,n);r=r.right}return ke(e,null,n)},xe=(e,t)=>{const n=t.store,r=e.item,o=e.type,i=e.tname,s=e.assoc;let a=null,l=0;if(null!==r){if(Te(n,r.client)<=r.clock)return null;const e=pn(n,r),t=e.item;if(!(t instanceof gn))return null;if(a=t.parent,null===a._item||!a._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==i)a=t.get(i);else{if(null===o)throw Object(f.c)();{if(Te(n,o.client)<=o.clock)return null;const{item:e}=pn(n,o);if(!(e instanceof gn&&e.content instanceof hn))return null;a=e.content.type}}l=s>=0?a._length:0}return((e,t,n=0)=>new we(e,t,n))(a,l,e.assoc)};class Ce{constructor(e,t){this.ds=e,this.sv=t}}const Oe=(e,t)=>new Ce(e,t),Ee=(Oe(q(),new Map),e=>Oe(W(e.store),De(e.store))),Me=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!j(t.ds,e.id),Ne=(e,t)=>{const n=Object(s.e)(e.meta,Ne,p.a),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<Te(r,n)&&ze(e,ge(n,t))}),B(e,t.ds,e=>{}),n.add(t))};class _e{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const De=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},Te=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Ae=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Object(f.c)()}n.push(t)},Pe=(e,t)=>{let n=0,r=e.length-1,o=e[r],s=o.id.clock;if(s===t)return r;let a=Object(i.c)(t/(s+o.length-1)*r);for(;n<=r;){if(o=e[a],s=o.id.clock,s<=t){if(t<s+o.length)return a;n=a+1}else r=a-1;a=Object(i.c)((n+r)/2)}throw Object(f.c)()},Re=(e,t)=>{const n=e.clients.get(t.client);return n[Pe(n,t.clock)]},Ie=(e,t,n)=>{const r=Pe(t,n),o=t[r];return o.id.clock<n&&o instanceof gn?(t.splice(r+1,0,mn(e,o,n-o.id.clock)),r+1):r},ze=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Ie(e,n,t.clock)]},Le=(e,t,n)=>{const r=t.clients.get(n.client),o=Pe(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Yt&&r.splice(o+1,0,mn(e,i,n.clock-i.id.clock+1)),i},Ve=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let s,a=Ie(e,t,n);do{s=t[a++],i<s.id.clock+s.length&&Ie(e,t,i),o(s)}while(a<t.length&&t[a].id.clock<i)};class Be{constructor(e,t,n){this.doc=e,this.deleteSet=new V,this.beforeState=De(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const je=(e,t)=>!(0===t.deleteSet.clients.size&&!Object(s.a)(t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(F(t.deleteSet),((e,t)=>{ie(e,t.doc.store,t.beforeState)})(e,t),H(e,t.deleteSet),!0),Fe=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Object(s.e)(e.changed,t,p.a).add(n)},$e=(e,t)=>{const n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof gn&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Ue=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],s=i.clock+i.len;for(let r=Pe(e,i.clock),o=e[r];r<e.length&&o.id.clock<s;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof gn&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}},qe=(e,t)=>{e.clients.forEach((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Object(i.g)(r.length-1,1+Pe(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[--e])$e(r,e)}})},We=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,s=n.deleteSet,a=n._mergeStructs;try{F(s),n.afterState=De(n.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((e,t)=>l.push(()=>{null!==t._item&&t._item.deleted||t._callObserver(n,e)})),l.push(()=>{n.changedParentTypes.forEach((e,t)=>l.push(()=>{null!==t._item&&t._item.deleted||((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t}),e.sort((e,t)=>e.path.length-t.path.length),he(t._dEH,e,n))})),l.push(()=>r.emit("afterTransaction",[n,r]))}),Object(h.a)(l,[])}finally{r.gc&&Ue(s,o,r.gcFilter),qe(s,o),n.afterState.forEach((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=Object(i.f)(Pe(e,r),1);for(let t=e.length-1;t>=n;t--)$e(e,t)}});for(let e=0;e<a.length;e++){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=Pe(r,n);i+1<r.length&&$e(r,i+1),i>0&&$e(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(r.clientID=Y(),A(M,w,"[yjs] ",k,O,"Changed the client-id because another client seems to be using it.")),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new ne;je(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new oe;je(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}n.subdocsAdded.forEach(e=>r.subdocs.add(e)),n.subdocsRemoved.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:n.subdocsLoaded,added:n.subdocsAdded,removed:n.subdocsRemoved}]),n.subdocsRemoved.forEach(e=>e.destroy()),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):We(e,t+1)}}},He=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1;null===e._transaction&&(i=!0,e._transaction=new Be(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{i&&o[0]===e._transaction&&We(o,0)}};r.a;class Ke{constructor(e,t){this.gen=function*(e){const t=Object(l.k)(e.restDecoder);for(let n=0;n<t;n++){const t=Object(l.k)(e.restDecoder),n=e.readClient();let r=Object(l.k)(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=Object(l.k)(e.restDecoder);yield new bn(ge(n,r),t),r+=t}else if(0!=(d.i&t)){const o=0==(t&(d.f|d.g)),i=new gn(ge(n,r),null,(t&d.g)===d.g?e.readLeftID():null,null,(t&d.f)===d.f?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,o&&(t&d.e)===d.e?e.readString():null,vn(e,t));yield i,r+=i.length}else{const t=e.readLen();yield new Yt(ge(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===bn);return this.curr}}class Je{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Ye=(e,t)=>{if(e.constructor===Yt){const{client:n,clock:r}=e.id;return new Yt(ge(n,r+t),e.length-t)}if(e.constructor===bn){const{client:n,clock:r}=e.id;return new bn(ge(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new gn(ge(r,o+t),null,ge(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Qe=(e,t=ee,n=oe)=>{const r=e.map(e=>new t(Object(l.e)(e)));let o=r.map(e=>new Ke(e,!0)),i=null;const s=new n,a=new Je(s);for(;o=o.filter(e=>null!==e.curr),o.sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===bn?1:-1:n}return t.curr.id.client-e.curr.id.client}),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==i){let n=e.curr;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next();if(null===n||n.id.client!==t)continue;if(t!==i.struct.id.client)Xe(a,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===bn)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{Xe(a,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new bn(ge(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===bn?i.struct.length-=t:n=Ye(n,t)),i.struct.mergeWith(n)||(Xe(a,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==bn;n=e.next())Xe(a,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(Xe(a,i.struct,i.offset),i=null),Ze(a);const c=r.map(e=>K(e)),u=$(c);return H(s,u),s.toUint8Array()},Ge=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Object(a.f)(e.encoder.restEncoder)}),e.encoder.restEncoder=Object(a.e)(),e.written=0)},Xe=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Ge(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Object(a.m)(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Ze=e=>{Ge(e);const t=e.encoder.restEncoder;Object(a.m)(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];Object(a.m)(t,r.written),Object(a.j)(t,r.restEncoder)}};class et{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null}get path(){return tt(this.currentTarget,this.target)}deletes(e){return j(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){const r=t._map.get(n);let i,s;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",s=Object(o.d)(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",s=Object(o.d)(e.content.getContent())):(i="add",s=void 0)}else{if(!this.deletes(r))return;i="delete",s=Object(o.d)(r.content.getContent())}e.set(n,{action:i,oldValue:s})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){const t=this.target,n=Object(p.a)(),r=Object(p.a)(),o=[];e={added:n,deleted:r,delta:o,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const tt=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n};let nt=0;class rt{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=nt++}}const ot=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=nt++},it=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>Object(i.a)(t-e.index)<Object(i.a)(t-n.index)?e:n);let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=nt++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&Object(i.a)(n.index-o)<r.parent.length/80?(ot(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return ot(r,t,n),r}{const r=new rt(t,n);return e.push(r),r}})(e._searchMarker,r,o)},st=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Object(i.f)(t,o.index+n))}},at=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;Object(s.e)(o,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;he(r._eH,n,t)};class lt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ue(),this._dEH=ue(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Object(f.b)()}clone(){throw Object(f.b)()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){fe(this._eH,e)}observeDeep(e){fe(this._dEH,e)}unobserve(e){de(this._eH,e)}unobserveDeep(e){de(this._dEH,e)}toJSON(){}}const ct=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},ut=e=>{const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},ft=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&Me(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},dt=(e,t)=>{let n=0,r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},ht=(e,t)=>{const n=[];return dt(e,(r,o)=>{n.push(t(r,o,e))}),n},pt=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},mt=(e,t)=>{const n=it(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},gt=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new gn(ge(s,Te(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new nn(c)),o.integrate(e,0),c=[])};r.forEach(n=>{switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:o=new gn(ge(s,Te(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Qt(new Uint8Array(n))),o.integrate(e,0);break;case Q:o=new gn(ge(s,Te(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Xt(n)),o.integrate(e,0);break;default:if(!(n instanceof lt))throw new Error("Unexpected content type in insert operation");o=new gn(ge(s,Te(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new hn(n)),o.integrate(e,0)}}}),u()},vt=(e,t,n,r)=>{if(0===n)return t._searchMarker&&st(t._searchMarker,n,r.length),gt(e,t,null,r);const o=n,i=it(t,n);let s=t._start;for(null!==i&&(s=i.p,0===(n-=i.index)&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&ze(e,ge(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&st(t._searchMarker,o,r.length),gt(e,t,s,r)},yt=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,s=it(t,n);let a=t._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&ze(e,ge(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&ze(e,ge(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Object(f.a)("array length exceeded");t._searchMarker&&st(t._searchMarker,o,-i+r)},bt=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},wt=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(null==r)a=new nn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new nn([r]);break;case Uint8Array:a=new Qt(r);break;case Q:a=new Xt(r);break;default:if(!(r instanceof lt))throw new Error("Unexpected content type");a=new hn(r)}new gn(ge(s,Te(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},kt=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},St=e=>{const t={};return e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},xt=e=>{return t=e.entries(),n=e=>!e[1].deleted,R(()=>{let e;do{e=t.next()}while(!e.done&&!n(e.value));return e});var t,n};class Ct extends et{constructor(e,t){super(e,t),this._transaction=t}}class Ot extends lt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Ot;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ot}clone(){const e=new Ot;return e.insert(0,this.toArray().map(e=>e instanceof lt?e.clone():e)),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),at(this,e,new Ct(this,e))}insert(e,t){null!==this.doc?He(this.doc,n=>{vt(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?He(this.doc,n=>{yt(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return mt(this,e)}toArray(){return ut(this)}slice(e=0,t=this.length){return ct(this,e,t)}toJSON(){return this.map(e=>e instanceof lt?e.toJSON():e)}map(e){return ht(this,e)}forEach(e){dt(this,e)}[Symbol.iterator](){return pt(this)}_write(e){e.writeTypeRef(sn)}}class Et extends et{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Mt extends lt{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new Mt}clone(){const e=new Mt;return this.forEach((t,n)=>{e.set(n,t instanceof lt?t.clone():t)}),e}_callObserver(e,t){at(this,e,new Et(this,e,t))}toJSON(){const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof lt?r.toJSON():r}}),e}get size(){return[...xt(this._map)].length}keys(){return I(xt(this._map),e=>e[0])}values(){return I(xt(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return I(xt(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){return this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}),{}}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?He(this.doc,t=>{bt(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?He(this.doc,n=>{wt(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return kt(this,e)}has(e){return((e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted})(this,e)}_write(e){e.writeTypeRef(an)}}const Nt=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&Object(z.a)(e,t);class _t{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&Object(f.c)(),this.right.content.constructor){case Zt:case rn:this.right.deleted||(this.index+=this.right.length);break;case en:this.right.deleted||Pt(this.currentAttributes,this.right.content)}this.left=this.right,this.right=this.right.right}}const Dt=(e,t,n)=>{for(;null!==t.right&&n>0;){switch(t.right.content.constructor){case Zt:case rn:t.right.deleted||(n<t.right.length&&ze(e,ge(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break;case en:t.right.deleted||Pt(t.currentAttributes,t.right.content)}t.left=t.right,t.right=t.right.right}return t},Tt=(e,t,n)=>{const r=new Map,o=it(t,n);if(o){const t=new _t(o.p.left,o.p,o.index,r);return Dt(e,t,n-o.index)}{const o=new _t(null,t._start,0,r);return Dt(e,o,n)}},At=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===en&&Nt(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;let s=n.left;const a=n.right;r.forEach((r,l)=>{s=new gn(ge(i,Te(o.store,i)),s,s&&s.lastId,a,a&&a.id,t,null,new en(l,r)),s.integrate(e,0),n.right=s})},Pt=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Rt=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===en&&Nt(t[e.right.content.key]||null,e.right.content.value));)e.forward()},It=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)||null;if(!Nt(c,l)){s.set(a,c);const{left:r,right:u}=n;n.right=new gn(ge(i,Te(o.store,i)),r,r&&r.lastId,u,u&&u.id,t,null,new en(a,l)),n.right.integrate(e,0),n.forward()}}return s},zt=(e,t,n,r,o)=>{n.currentAttributes.forEach((e,t)=>{void 0===o[t]&&(o[t]=null)});const i=e.doc,s=i.clientID;Rt(n,o);const a=It(e,t,n,o),l=r.constructor===String?new rn(r):new Zt(r);let{left:c,right:u,index:f}=n;t._searchMarker&&st(t._searchMarker,n.index,l.getLength()),u=new gn(ge(s,Te(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=f,n.forward(),At(e,t,n,a)},Lt=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;Rt(n,o);const a=It(e,t,n,o);for(;r>0&&null!==n.right;){if(!n.right.deleted)switch(n.right.content.constructor){case en:{const{key:t,value:r}=n.right.content,i=o[t];void 0!==i&&(Nt(i,r)?a.delete(t):a.set(t,r),n.right.delete(e));break}case Zt:case rn:r<n.right.length&&ze(e,ge(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new gn(ge(s,Te(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new rn(o)),n.right.integrate(e,0),n.forward()}At(e,t,n,a)},Vt=(e,t,n,r,o)=>{for(;n&&n.content.constructor!==rn&&n.content.constructor!==Zt;)n.deleted||n.content.constructor!==en||Pt(o,n.content),n=n.right;let i=0;for(;t!==n;){if(!t.deleted){const n=t.content;switch(n.constructor){case en:{const{key:s,value:a}=n;(o.get(s)||null)===a&&(r.get(s)||null)!==a||(t.delete(e),i++);break}}}t=t.right}return i},Bt=(e,t,n)=>{const r=n,o=Object(s.b)(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Zt:case rn:n<t.right.length&&ze(e,ge(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&Vt(e,i,t.right,o,Object(s.b)(t.currentAttributes));const a=(t.left||t.right).parent;return a._searchMarker&&st(a._searchMarker,t.index,-r+n),t};class jt extends et{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];He(e,e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==i){let e;switch(i){case"delete":e={delete:c},c=0;break;case"insert":e={insert:a},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)})),a="";break;case"retain":if(e={retain:l},Object.keys(s).length>0){e.attributes={};for(const t in s)e.attributes[t]=s[t]}l=0}t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case Zt:this.adds(o)?this.deletes(o)||(u(),i="insert",a=o.content.embed,u()):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=1):o.deleted||("retain"!==i&&(u(),i="retain"),l+=1);break;case rn:this.adds(o)?this.deletes(o)||("insert"!==i&&(u(),i="insert"),a+=o.content.str):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(u(),i="retain"),l+=o.length);break;case en:{const{key:t,value:a}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=n.get(t)||null;Nt(l,a)?o.delete(e):("retain"===i&&u(),Nt(a,r.get(t)||null)?delete s[t]:s[t]=a)}}else if(this.deletes(o)){r.set(t,a);const e=n.get(t)||null;Nt(e,a)||("retain"===i&&u(),s[t]=e)}else if(!o.deleted){r.set(t,a);const n=s[t];void 0!==n&&(Nt(n,a)?o.delete(e):("retain"===i&&u(),null===a?s[t]=a:delete s[t]))}o.deleted||("insert"===i&&u(),Pt(n,o.content));break}}o=o.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class Ft extends lt{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new Ft}clone(){const e=new Ft;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new jt(this,e,t),r=e.doc;if(at(this,e,n),!e.local){let t=!1;for(const[n,o]of e.afterState.entries()){const i=e.beforeState.get(n)||0;if(o!==i&&(Ve(e,r.store.clients.get(n),i,o,e=>{e.deleted||e.content.constructor!==en||(t=!0)}),t))break}t||B(e,e.deleteSet,e=>{e instanceof Yt||t||e.parent===this&&e.content.constructor===en&&(t=!0)}),He(r,e=>{t?(e=>{let t=0;He(e.doc,n=>{let r=e._start,o=e._start,i=Object(s.c)();const a=Object(s.b)(i);for(;o;){if(!1===o.deleted)switch(o.content.constructor){case en:Pt(a,o.content);break;case Zt:case rn:t+=Vt(n,r,o,i,a),i=Object(s.b)(a),r=o}o=o.right}})})(this):B(e,e.deleteSet,t=>{t instanceof Yt||t.parent===this&&((e,t)=>{for(;t&&t.right&&(t.right.deleted||t.right.content.constructor!==rn&&t.right.content.constructor!==Zt);)t=t.right;const n=new Set;for(;t&&(t.deleted||t.content.constructor!==rn&&t.content.constructor!==Zt);){if(!t.deleted&&t.content.constructor===en){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(e,t)})})}}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===rn&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?He(this.doc,n=>{const r=new _t(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const s=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof s||s.length>0)&&zt(n,this,r,s,i.attributes||{})}else void 0!==i.retain?Lt(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Bt(n,r,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){const r=[],o=new Map,i=this.doc;let s="",a=this._start;function l(){if(s.length>0){const e={};let t=!1;o.forEach((n,r)=>{t=!0,e[r]=n});const n={insert:s};t&&(n.attributes=e),r.push(n),s=""}}return He(i,i=>{for(e&&Ne(i,e),t&&Ne(i,t);null!==a;){if(Me(a,e)||void 0!==t&&Me(a,t))switch(a.content.constructor){case rn:{const r=o.get("ychange");void 0===e||Me(a,e)?void 0===t||Me(a,t)?void 0!==r&&(l(),o.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.state||(l(),o.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.state||(l(),o.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Zt:{l();const e={insert:a.content.embed};if(o.size>0){const t={};e.attributes=t,o.forEach((e,n)=>{t[n]=e})}r.push(e);break}case en:Me(a,e)&&(l(),Pt(o,a.content))}a=a.right}l()},Ne),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?He(r,r=>{const o=Tt(r,this,e);n||(n={},o.currentAttributes.forEach((e,t)=>{n[t]=e})),zt(r,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n={}){if(t.constructor!==Object)throw new Error("Embed must be an Object");const r=this.doc;null!==r?He(r,r=>{const o=Tt(r,this,e);zt(r,this,o,t,n)}):this._pending.push(()=>this.insertEmbed(e,t,n))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?He(n,n=>{Bt(n,Tt(n,this,e),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?He(r,r=>{const o=Tt(r,this,e);null!==o.right&&Lt(r,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?He(this.doc,t=>{bt(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?He(this.doc,n=>{wt(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return kt(this,e)}getAttributes(e){return St(this)}_write(e){e.writeTypeRef(ln)}}class $t{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==qt&&t.constructor!==Ut||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Ut extends lt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ut}clone(){const e=new Ut;return e.insert(0,e.toArray().map(e=>e instanceof lt?e.clone():e)),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new $t(this,e)}querySelector(e){e=e.toUpperCase();const t=new $t(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Array.from(new $t(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){at(this,e,new Wt(this,t,e))}toString(){return ht(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),dt(this,o=>{r.insertBefore(o.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?He(this.doc,n=>{vt(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)He(this.doc,n=>{const r=e&&e instanceof lt?e._item:e;gt(n,this,r,t)});else{const n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw Object(f.a)("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?He(this.doc,n=>{yt(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return ut(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return mt(this,e)}slice(e=0,t=this.length){return ct(this,e,t)}_write(e){e.writeTypeRef(un)}}class qt extends Ut{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new qt(this.nodeName)}clone(){const e=new qt(this.nodeName),t=this.getAttributes();for(const n in t)e.setAttribute(n,t[n]);return e.insert(0,e.toArray().map(e=>e instanceof lt?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?He(this.doc,t=>{bt(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?He(this.doc,n=>{wt(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return kt(this,e)}getAttributes(e){return St(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o)r.setAttribute(e,o[e]);return dt(this,o=>{r.appendChild(o.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(cn),e.writeKey(this.nodeName)}}class Wt extends et{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class Ht extends Mt{constructor(e){super(),this.hookName=e}_copy(){return new Ht(this.hookName)}clone(){const e=new Ht(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(fn),e.writeKey(this.hookName)}}class Kt extends Ft{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Kt}clone(){const e=new Kt;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:n,attrs:r})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let e=0;e<t.length;e++){const r=t[e];n+="<"+r.nodeName;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(dn)}}class Jt{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Object(f.b)()}mergeWith(e){return!1}write(e,t,n){throw Object(f.b)()}integrate(e,t){throw Object(f.b)()}}class Yt extends Jt{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Ae(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class Qt{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Qt(this.content)}splice(e){throw Object(f.b)()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Gt{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Gt(this.len)}splice(e){const t=new Gt(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){U(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}class Xt{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Xt(this.doc)}splice(e){throw Object(f.b)()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class Zt{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Zt(this.embed)}splice(e){throw Object(f.b)()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class en{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new en(this.key,this.value)}splice(e){throw Object(f.b)()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class tn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new tn(this.arr)}splice(e){const t=new tn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}class nn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new nn(this.arr)}splice(e){const t=new nn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class rn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new rn(this.str)}splice(e){const t=new rn(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"ï¿½",t.str="ï¿½"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const on=[e=>new Ot,e=>new Mt,e=>new Ft,e=>new qt(e.readKey()),e=>new Ut,e=>new Ht(e.readKey()),e=>new Kt],sn=0,an=1,ln=2,cn=3,un=4,fn=5,dn=6;class hn{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new hn(this.type._copy())}splice(e){throw Object(f.b)()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const pn=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=ge(r.client,r.clock+o)),n=Re(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof gn);return{item:n,diff:o}},mn=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new gn(ge(r,o+n),t,ge(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=ge(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i};class gn extends Jt{constructor(e,t,n,r,o,i,s,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?d.b:0}set marker(e){(this.info&d.d)>0!==e&&(this.info^=d.d)}get marker(){return(this.info&d.d)>0}get keep(){return(this.info&d.a)>0}set keep(e){this.keep!==e&&(this.info^=d.a)}get countable(){return(this.info&d.b)>0}get deleted(){return(this.info&d.c)>0}set deleted(e){this.deleted!==e&&(this.info^=d.c)}markDeleted(){this.info|=d.c}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Te(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Te(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===pe&&this.id.client!==this.parent.client&&this.parent.clock>=Te(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Le(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ze(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Yt||this.right&&this.right.constructor===Yt)&&(this.parent=null),this.parent){if(this.parent.constructor===pe){const e=Re(t,this.parent);e.constructor===Yt?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===gn&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===gn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Le(e,e.doc.store,ge(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),me(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(me(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Re(e.doc.store,t.origin)))break;r.has(Re(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ae(e.doc.store,this),this.content.integrate(e,this),Fe(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Yt(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:ge(this.id.client,this.id.clock+this.length-1)}mergeWith(e){return!!(this.constructor===e.constructor&&me(e.origin,this.lastId)&&this.right===e&&me(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content))&&(e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0)}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),U(e.deleteSet,this.id.client,this.id.clock,this.length),Fe(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Object(f.c)();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Pe(r,t.id.clock)]=n})(e,this,new Yt(this.id,this.length)):this.content=new Gt(this.length)}write(e,t){const n=t>0?ge(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=this.content.getRef()&d.i|(null===n?0:d.g)|(null===r?0:d.f)|(null===o?0:d.e);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=ve(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===pe?(e.writeParentInfo(!1),e.writeLeftID(t)):Object(f.c)();null!==o&&e.writeString(o)}this.content.write(e,t)}}const vn=(e,t)=>yn[t&d.i](e),yn=[()=>{Object(f.c)()},e=>new Gt(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new tn(n)},e=>new Qt(e.readBuf()),e=>new rn(e.readString()),e=>new Zt(e.readJSON()),e=>new en(e.readString(),e.readJSON()),e=>new hn(on[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new nn(n)},e=>new Xt(new Q({guid:e.readString(),...e.readAny()})),()=>{Object(f.c)()}];class bn extends Jt{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Object(f.c)()}write(e,t){e.writeInfo(10),Object(a.m)(e.restEncoder,this.length-t)}getMissing(e,t){return null}}},function(e,t,n){"use strict";e.exports=n(25)},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return u}));const r=Math.floor,o=(Math.ceil,Math.abs),i=(Math.imul,Math.round),s=Math.log10,a=(Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),l=(e,t)=>e>t?e:t,c=(Number.isNaN,Math.pow,e=>Math.pow(10,e)),u=(Math.sign,e=>0!==e?e<0:1/e<0)},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return a}));const r=()=>new Map,o=e=>{const t=r();return e.forEach((e,n)=>{t.set(n,e)}),t},i=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},s=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},a=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));const r=e=>new Error(e),o=()=>{throw r("Method unimplemented")},i=()=>{throw r("Unexpected case")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));class r{constructor(e,t){this.left=e,this.right=t}}const o=(e,t)=>new r(e,t),i=(e,t)=>e.forEach(e=>t(e.left,e.right))},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return d}));var r=n(8),o=n(6);const i="undefined"!=typeof document?document:{},s=e=>i.createElement(e),a=("undefined"!=typeof DOMParser&&new DOMParser,e=>{const t=i.createDocumentFragment();for(let n=0;n<e.length;n++)h(t,e[n]);return t}),l=(e,t)=>(h(e,a(t)),e),c=(e,t,n)=>e.addEventListener(t,n),u=(e,t=[],n=[])=>l(((e,t)=>(r.b(t,(t,n)=>{!1===n?e.removeAttribute(t):!0===n?e.setAttribute(t,""):e.setAttribute(t,n)}),e))(s(e),t),n),f=e=>i.createTextNode(e),d=e=>o.d(e,(e,t)=>`${t}:${e};`).join(""),h=(e,t)=>e.appendChild(t);i.ELEMENT_NODE,i.TEXT_NODE,i.CDATA_SECTION_NODE,i.COMMENT_NODE,i.DOCUMENT_NODE,i.DOCUMENT_TYPE_NODE,i.DOCUMENT_FRAGMENT_NODE},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));const r=e=>e[e.length-1],o=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},i=Array.from,s=(e,t)=>{return e.length===t.length&&(n=(e,n)=>e===t[n],e.every(n));var n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=()=>new Set},function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(6),o=n(17),i=n(22),s=n(24);const a=void 0!==e&&e.release&&/node|io\.js/.test(e.release.name),l="undefined"!=typeof window&&!a;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let c;const u=[],f=()=>{if(void 0===c)if(a){c=r.c();const t=e.argv;let n=null;for(let e=0;e<t.length;e++){const r=t[e];"-"===r[0]?(null!==n&&c.set(n,""),n=r):null!==n?(c.set(n,r),n=null):u.push(r)}null!==n&&c.set(n,"")}else"object"==typeof location?(c=r.c(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");c.set("--"+o.a(t,"-"),n),c.set("-"+o.a(t,"-"),n)}})):c=r.c();return c},d=t=>a?i.a(e.env[t.toUpperCase()]):i.a(s.a.getItem(t));(e=>f().has(e))("--"+(h="production"))||d(h);var h}).call(this,n(34))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));Object.assign;const r=Object.keys,o=e=>r(e).length,i=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s=(e,t)=>e===t||o(e)===o(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,(e,n)=>(void 0!==e||i(t,n))&&t[n]===e)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));let r=[];const o=()=>{for(let e=0;e<r.length;e++)r[e]();r=[]},i=e=>{r.push(e),1===r.length&&setTimeout(o,0)},s=e=>class{constructor(e){this._=e}destroy(){e(this._)}},a=s(clearTimeout),l=(e,t)=>new a(setTimeout(t,e));s(clearInterval),s(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),s(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e))},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n(17),o=n(12);n(0),n(1);const i=e=>new Uint8Array(e),s=(e,t,n)=>new Uint8Array(e,t,n),a=(o.b,o.b,e=>{const t=i(e.byteLength);return t.set(e),t})}).call(this,n(29).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));n(10),n(13);const r=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&r(e,t,n+1)}},o=()=>{},i=(e,t)=>e===t},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));const r=String.fromCharCode,o=(String.fromCodePoint,/^\s*/g),i=/([A-Z])/g,s=(e,t)=>(e=>e.replace(o,""))(e.replace(i,e=>`${t}${(e=>e.toLowerCase())(e)}`));"undefined"!=typeof TextEncoder&&new TextEncoder;let a="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});a&&1===a.decode(new Uint8Array).length&&(a=null)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(5);"undefined"==typeof window||void 0!==window.performance&&window.performance;const o="undefined"==typeof crypto?null:crypto,i=null!==o?e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);return o.getRandomValues(n),t}:e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);for(let t=0;t<e;t++)n[t]=Math.ceil(4294967295*Math.random()>>>0);return t},s=Math.random,a=()=>new Uint32Array(i(4))[0],l=e=>e[r.c(s()*e.length)],c=[1e7]+-1e3+-4e3+-8e3+-1e11,u=()=>c.replace(/[018]/g,e=>(e^a()&15>>e/4).toString(16))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(5);const r=Date.now},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),o=n(11),i=n(10);class s{constructor(){this._observers=r.c()}on(e,t){r.e(this._observers,e,o.a).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return i.c((this._observers.get(e)||r.c()).values()).forEach(e=>e(...t))}destroy(){this._observers=r.c()}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(26)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>void 0===e?null:e},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=s(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))o.call(n,u)&&(l[u]=n[u]);if(r){a=r(n);for(var f=0;f<a.length;f++)i.call(n,a[f])&&(l[a[f]]=n[a[f]])}}return l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));let r=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},o=!0;try{"undefined"!=typeof localStorage&&(r=localStorage,o=!1)}catch(e){}const i=r},function(e,t,n){"use strict";
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(23),o=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;o=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),s=f("react.provider"),a=f("react.context"),l=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),u=f("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},k=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:w.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var O=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,n,r,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case i:l=!0}}if(l)return s=s(l=e),e=""===r?"."+E(l,0):r,Array.isArray(s)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),M(s,t,n,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+E(a=e[c],c);l+=M(a,t,n,u,s)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),c=0;!(a=e.next()).done;)l+=M(a=a.value,t,n,u=r+E(a,c++),s);else if("object"===a)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function N(e,t,n){if(null==e)return e;var r=[],o=0;return M(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function _(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function T(){var e=D.current;if(null===e)throw Error(h(321));return e}var A={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error(h(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null==e)throw Error(h(267,e));var i=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)k.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var f=0;f<u;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return T().useCallback(e,t)},t.useContext=function(e,t){return T().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return T().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return T().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return T().useLayoutEffect(e,t)},t.useMemo=function(e,t){return T().useMemo(e,t)},t.useReducer=function(e,t,n){return T().useReducer(e,t,n)},t.useRef=function(e){return T().useRef(e)},t.useState=function(e){return T().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(4),o=n(23),i=n(27);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var f=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!h.call(m,e)||!h.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,x=60106,C=60107,O=60108,E=60114,M=60109,N=60110,_=60112,D=60113,T=60120,A=60115,P=60116,R=60121,I=60128,z=60129,L=60130,V=60131;if("function"==typeof Symbol&&Symbol.for){var B=Symbol.for;S=B("react.element"),x=B("react.portal"),C=B("react.fragment"),O=B("react.strict_mode"),E=B("react.profiler"),M=B("react.provider"),N=B("react.context"),_=B("react.forward_ref"),D=B("react.suspense"),T=B("react.suspense_list"),A=B("react.memo"),P=B("react.lazy"),R=B("react.block"),B("react.scope"),I=B("react.opaque.id"),z=B("react.debug_trace_mode"),L=B("react.offscreen"),V=B("react.legacy_hidden")}var j,F="function"==typeof Symbol&&Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=F&&e[F]||e["@@iterator"])?e:null}function U(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var q=!1;function W(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),i=r.stack.split("\n"),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==i[a])return"\n"+o[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function H(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case x:return"Portal";case E:return"Profiler";case O:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return K(e.type);case R:return K(e._render);case P:t=e._payload,e=e._init;try{return K(e(t))}catch(e){}}return null}function J(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function ce(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ye).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Se=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Me=null,Ne=null;function _e(e){if(e=Xr(e)){if("function"!=typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=eo(t),Ee(e.stateNode,e.type,t))}}function De(e){Me?Ne?Ne.push(e):Ne=[e]:Me=e}function Te(){if(Me){var e=Me,t=Ne;if(Ne=Me=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function Pe(e,t,n,r,o){return e(t,n,r,o)}function Re(){}var Ie=Ae,ze=!1,Le=!1;function Ve(){null===Me&&null===Ne||(Re(),Te())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var je=!1;if(f)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){je=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(e){je=!1}function $e(e,t,n,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ue=!1,qe=null,We=!1,He=null,Ke={onError:function(e){Ue=!0,qe=e}};function Je(e,t,n,r,o,i,s,a,l){Ue=!1,qe=null,$e.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ye(e)!==e)throw Error(s(188))}function Xe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ge(o),e;if(i===r)return Ge(o),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,ot=!1,it=[],st=null,at=null,lt=null,ct=new Map,ut=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,o,i),null!==t&&(null!==(t=Xr(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function gt(e){var t=Gr(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Xr(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function bt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=Xr(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==st&&vt(st)&&(st=null),null!==at&&vt(at)&&(at=null),null!==lt&&vt(lt)&&(lt=null),ct.forEach(yt),ut.forEach(yt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bt)))}function kt(e){function t(t){return wt(t,e)}if(0<it.length){wt(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==at&&wt(at,e),null!==lt&&wt(lt,e),ct.forEach(t),ut.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)gt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Ct={},Ot={};function Et(e){if(Ct[e])return Ct[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ot)return Ct[e]=n[t];return e}f&&(Ot=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Mt=Et("animationend"),Nt=Et("animationiteration"),_t=Et("animationstart"),Dt=Et("transitionend"),Tt=new Map,At=new Map,Pt=["abort","abort",Mt,"animationEnd",Nt,"animationIteration",_t,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),At.set(r,t),Tt.set(r,o),c(o,[r])}}(0,i.unstable_now)();var It=8;function zt(e){if(0!=(1&e))return It=15,1;if(0!=(2&e))return It=14,2;if(0!=(4&e))return It=13,4;var t=24&e;return 0!==t?(It=12,t):0!=(32&e)?(It=11,32):0!==(t=192&e)?(It=10,t):0!=(256&e)?(It=9,256):0!==(t=3584&e)?(It=8,t):0!=(4096&e)?(It=7,4096):0!==(t=4186112&e)?(It=6,t):0!==(t=62914560&e)?(It=5,t):67108864&e?(It=4,67108864):0!=(134217728&e)?(It=3,134217728):0!==(t=805306368&e)?(It=2,t):0!=(1073741824&e)?(It=1,1073741824):(It=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return It=0;var r=0,o=0,i=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==i)r=i,o=It=15;else if(0!==(i=134217727&n)){var l=i&~s;0!==l?(r=zt(l),o=It):0!==(a&=i)&&(r=zt(a),o=It)}else 0!==(i=n&~s)?(r=zt(i),o=It):0!==a&&(r=zt(a),o=It);if(0===r)return 0;if(r=n&((0>(r=31-Ut(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&s)){if(zt(t),o<=It)return t;It=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-Ut(t)),r|=e[n],t&=~o;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?Bt(10,t):e;case 10:return 0===(e=jt(192&~t))?Bt(8,t):e;case 8:return 0===(e=jt(3584&~t))&&(0===(e=jt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function jt(e){return e&-e}function Ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $t(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ut(t)]=n}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(qt(e)/Wt|0)|0},qt=Math.log,Wt=Math.LN2;var Ht=i.unstable_UserBlockingPriority,Kt=i.unstable_runWithPriority,Jt=!0;function Yt(e,t,n,r){ze||Re();var o=Gt,i=ze;ze=!0;try{Pe(o,e,t,n,r)}finally{(ze=i)||Ve()}}function Qt(e,t,n,r){Kt(Ht,Gt.bind(null,e,t,n,r))}function Gt(e,t,n,r){var o;if(Jt)if((o=0==(4&t))&&0<it.length&&-1<dt.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var i=Xt(e,t,n,r);if(null===i)o&&pt(e,r);else{if(o){if(-1<dt.indexOf(e))return e=ht(i,e,t,n,r),void it.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return st=mt(st,e,t,n,r,o),!0;case"dragenter":return at=mt(at,e,t,n,r,o),!0;case"mouseover":return lt=mt(lt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return ct.set(i,mt(ct.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ut.set(i,mt(ut.get(i)||null,e,t,n,r,o)),!0}return!1}(i,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Xt(e,t,n,r){var o=Oe(r);if(null!==(o=Gr(o))){var i=Ye(o);if(null===i)o=null;else{var s=i.tag;if(13===s){if(null!==(o=Qe(i)))return o;o=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Dr(e,t,r,o,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,o="value"in Zt?Zt.value:Zt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return tn=o.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function an(e){function t(t,n,r,o,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?on:sn,this.isPropagationStopped=sn,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,un,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(fn),hn=o({},fn,{view:0,detail:0}),pn=an(hn),mn=o({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=an(mn),vn=an(o({},mn,{dataTransfer:0})),yn=an(o({},hn,{relatedTarget:0})),bn=an(o({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=an(o({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),kn=an(o({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function On(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function En(){return On}var Mn=an(o({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Nn=an(o({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=an(o({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(o({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=an(o({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),An=[9,13,27,32],Pn=f&&"CompositionEvent"in window,Rn=null;f&&"documentMode"in document&&(Rn=document.documentMode);var In=f&&"TextEvent"in window&&!Rn,zn=f&&(!Pn||Rn&&8<Rn&&11>=Rn),Ln=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function qn(e,t,n,r){De(r),0<(t=Ar(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Kn(e){Cr(e,0)}function Jn(e){if(G(Zr(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(f){var Gn;if(f){var Xn="oninput"in document;if(!Xn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Xn="function"==typeof Zn.oninput}Gn=Xn}else Gn=!1;Qn=Gn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",tr),Hn=Wn=null)}function tr(e){if("value"===e.propertyName&&Jn(Hn)){var t=[];if(qn(t,Hn,e,Oe(e)),e=Kn,ze)e(t);else{ze=!0;try{Ae(e,t)}finally{ze=!1,Ve()}}}}function nr(e,t,n){"focusin"===e?(er(),Hn=n,(Wn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Hn)}function or(e,t){if("click"===e)return Jn(t)}function ir(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ar=Object.prototype.hasOwnProperty;function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ar.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var hr=f&&"documentMode"in document&&11>=document.documentMode,pr=null,mr=null,gr=null,vr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==pr||pr!==X(r)||("selectionStart"in(r=pr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&lr(gr,r)||(gr=r,0<(r=Ar(mr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Pt,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<br.length;wr++)At.set(br[wr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,a,l,c){if(Je.apply(this,arguments),Ue){if(!Ue)throw Error(s(198));var u=qe;Ue=!1,qe=null,We||(We=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;xr(o,a,c),i=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;xr(o,a,c),i=l}}}if(We)throw e=He,We=!1,He=null,e}function Or(e,t){var n=to(t),r=e+"__bubble";n.has(r)||(_r(t,e,2,!1),n.add(r))}var Er="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){e[Er]||(e[Er]=!0,a.forEach((function(t){Sr.has(t)||Nr(t,!1,e,null),Nr(t,!0,e,null)})))}function Nr(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;o|=2,i=r}var s=to(i),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(o|=4),_r(i,e,o,t),s.add(a))}function _r(e,t,n,r){var o=At.get(t);switch(void 0===o?2:o){case 0:o=Yt;break;case 1:o=Qt;break;default:o=Gt}n=o.bind(null,t,n,e),o=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,o){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=Gr(a)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{Ie(e,t,n)}finally{Le=!1,Ve()}}((function(){var r=i,o=Oe(n),s=[];e:{var a=Tt.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Mt:case Nt:case _t:l=bn;break;case Dt:l=Dn;break;case"scroll":l=pn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!=(4&t),f=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=Be(p,d))&&u.push(Tr(p,m,h)))),f)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,o),s.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!Gr(c)&&!c[Yr])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Gr(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==l?a:Zr(l),h=null==c?a:Zr(c),(a=new u(m,p+"leave",l,n,o)).target=f,a.relatedTarget=h,m=null,Gr(o)===r&&((u=new u(d,p+"enter",c,n,o)).target=h,u.relatedTarget=f,m=u),f=m,l&&c)e:{for(d=c,p=0,h=u=l;h;h=Pr(h))p++;for(h=0,m=d;m;m=Pr(m))h++;for(;0<p-h;)u=Pr(u),p--;for(;0<h-p;)d=Pr(d),h--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Pr(u),d=Pr(d)}u=null}else u=null;null!==l&&Rr(s,a,l,u,!1),null!==c&&null!==f&&Rr(s,f,c,u,!0)}if("select"===(l=(a=r?Zr(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Un(a))if(Qn)g=ir;else{g=rr;var v=nr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?qn(s,g,n,o):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&oe(a,"number",a.value)),v=r?Zr(r):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(pr=v,mr=r,gr=null);break;case"focusout":gr=mr=pr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(s,n,o);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":yr(s,n,o)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fn&&(y=nn()):(en="value"in(Zt=o)?Zt.value:Zt.textContent,Fn=!0)),0<(v=Ar(r,b)).length&&(b=new kn(b,e,null,n,o),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ar(r,"onBeforeInput")).length&&(o=new kn("onBeforeInput","beforeinput",null,n,o),s.push({event:o,listeners:r}),o.data=y))}Cr(s,t)}))}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ar(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Be(e,n))&&r.unshift(Tr(e,i,o)),null!=(i=Be(e,t))&&r.push(Tr(e,i,o))),e=e.return}return r}function Pr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Rr(e,t,n,r,o){for(var i=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=Be(n,i))&&s.unshift(Tr(n,l,a)):o||null!=(l=Be(n,i))&&s.push(Tr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Ir(){}var zr=null,Lr=null;function Vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,Fr="function"==typeof clearTimeout?clearTimeout:void 0;function $r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wr=0;var Hr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Hr,Jr="__reactProps$"+Hr,Yr="__reactContainer$"+Hr,Qr="__reactEvents$"+Hr;function Gr(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yr]||n[Kr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=qr(e);null!==e;){if(n=e[Kr])return n;e=qr(e)}return t}n=(e=n).parentNode}return null}function Xr(e){return!(e=e[Kr]||e[Yr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function eo(e){return e[Jr]||null}function to(e){var t=e[Qr];return void 0===t&&(t=e[Qr]=new Set),t}var no=[],ro=-1;function oo(e){return{current:e}}function io(e){0>ro||(e.current=no[ro],no[ro]=null,ro--)}function so(e,t){ro++,no[ro]=e.current,e.current=t}var ao={},lo=oo(ao),co=oo(!1),uo=ao;function fo(e,t){var n=e.type.contextTypes;if(!n)return ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ho(e){return null!=(e=e.childContextTypes)}function po(){io(co),io(lo)}function mo(e,t,n){if(lo.current!==ao)throw Error(s(168));so(lo,t),so(co,n)}function go(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,K(t)||"Unknown",i));return o({},n,r)}function vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ao,uo=lo.current,so(lo,e),so(co,co.current),!0}function yo(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=go(e,t,uo),r.__reactInternalMemoizedMergedChildContext=e,io(co),io(lo),so(lo,e)):io(co),so(co,n)}var bo=null,wo=null,ko=i.unstable_runWithPriority,So=i.unstable_scheduleCallback,xo=i.unstable_cancelCallback,Co=i.unstable_shouldYield,Oo=i.unstable_requestPaint,Eo=i.unstable_now,Mo=i.unstable_getCurrentPriorityLevel,No=i.unstable_ImmediatePriority,_o=i.unstable_UserBlockingPriority,Do=i.unstable_NormalPriority,To=i.unstable_LowPriority,Ao=i.unstable_IdlePriority,Po={},Ro=void 0!==Oo?Oo:function(){},Io=null,zo=null,Lo=!1,Vo=Eo(),Bo=1e4>Vo?Eo:function(){return Eo()-Vo};function jo(){switch(Mo()){case No:return 99;case _o:return 98;case Do:return 97;case To:return 96;case Ao:return 95;default:throw Error(s(332))}}function Fo(e){switch(e){case 99:return No;case 98:return _o;case 97:return Do;case 96:return To;case 95:return Ao;default:throw Error(s(332))}}function $o(e,t){return e=Fo(e),ko(e,t)}function Uo(e,t,n){return e=Fo(e),So(e,t,n)}function qo(){if(null!==zo){var e=zo;zo=null,xo(e)}Wo()}function Wo(){if(!Lo&&null!==Io){Lo=!0;var e=0;try{var t=Io;$o(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Io=null}catch(t){throw null!==Io&&(Io=Io.slice(e+1)),So(No,qo),t}finally{Lo=!1}}}var Ho=k.ReactCurrentBatchConfig;function Ko(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Jo=oo(null),Yo=null,Qo=null,Go=null;function Xo(){Go=Qo=Yo=null}function Zo(e){var t=Jo.current;io(Jo),e.type._context._currentValue=t}function ei(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ti(e,t){Yo=e,Go=Qo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(As=!0),e.firstContext=null)}function ni(e,t){if(Go!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Go=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qo){if(null===Yo)throw Error(s(308));Qo=t,Yo.dependencies={lanes:0,firstContext:t,responders:null}}else Qo=Qo.next=t;return e._currentValue}var ri=!1;function oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function si(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ai(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ci(e,t,n,r){var i=e.updateQueue;ri=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==a&&(null===d?f.firstBaseUpdate=u:d.next=u,f.lastBaseUpdate=c)}}if(null!==s){for(d=i.baseState,a=0,f=u=c=null;;){l=s.lane;var h=s.eventTime;if((r&l)===l){null!==f&&(f=f.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(l=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(h,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(h,d,l):p))break e;d=o({},d,l);break e;case 2:ri=!0}}null!==s.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else h={eventTime:h,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===f?(u=f=h,c=d):f=f.next=h,a|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===f&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,Ra|=a,e.lanes=a,e.memoizedState=d}}function ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(s(191,o));o.call(r)}}}var fi=(new r.Component).refs;function di(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=il(),o=sl(e),i=si(r,o);i.payload=t,null!=n&&(i.callback=n),ai(e,i),al(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=il(),o=sl(e),i=si(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),ai(e,i),al(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=il(),r=sl(e),o=si(n,r);o.tag=2,null!=t&&(o.callback=t),ai(e,o),al(e,r,n)}};function pi(e,t,n,r,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function mi(e,t,n){var r=!1,o=ao,i=t.contextType;return"object"==typeof i&&null!==i?i=ni(i):(o=ho(t)?uo:lo.current,i=(r=null!=(r=t.contextTypes))?fo(e,o):ao),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function gi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function vi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=fi,oi(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=ni(i):(i=ho(t)?uo:lo.current,o.context=fo(e,i)),ci(e,n,o,r),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&hi.enqueueReplaceState(o,o.state,null),ci(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var yi=Array.isArray;function bi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===fi&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function wi(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ki(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Bl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=bi(e,t,n),r.return=e,r):((r=jl(n.type,n.key,n.props,null,e.mode,r)).ref=bi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ql(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Fl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=jl(t.type,t.key,t.props,null,e.mode,n)).ref=bi(e,null,t),n.return=e,n;case x:return(t=ql(t,e.mode,n)).return=e,t}if(yi(t)||$(t))return(t=Fl(t,e.mode,n,null)).return=e,t;wi(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?n.type===C?f(e,t,n.props.children,r,o):c(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null}if(yi(n)||$(n))return null!==o?null:f(e,t,n,r,null);wi(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===C?f(t,e,r.props.children,o,r.key):c(t,e,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(yi(r)||$(r))return f(t,e=e.get(n)||null,r,o,null);wi(t,r)}return null}function m(o,s,a,l){for(var c=null,u=null,f=s,m=s=0,g=null;null!==f&&m<a.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(o,f,a[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(o,f),s=i(v,s,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===a.length)return n(o,f),c;if(null===f){for(;m<a.length;m++)null!==(f=d(o,a[m],l))&&(s=i(f,s,m),null===u?c=f:u.sibling=f,u=f);return c}for(f=r(o,f);m<a.length;m++)null!==(g=p(f,o,m,a[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach((function(e){return t(o,e)})),c}function g(o,a,l,c){var u=$(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var f=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(o,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),a=i(b,a,g),null===f?u=b:f.sibling=b,f=b,m=v}if(y.done)return n(o,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(o,y.value,c))&&(a=i(y,a,g),null===f?u=y:f.sibling=y,f=y);return u}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=p(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=i(y,a,g),null===f?u=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(o,e)})),u}return function(e,r,i,l){var c="object"==typeof i&&null!==i&&i.type===C&&null===i.key;c&&(i=i.props.children);var u="object"==typeof i&&null!==i;if(u)switch(i.$$typeof){case S:e:{for(u=i.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(i.type===C){n(e,c.sibling),(r=o(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=o(c,i.props)).ref=bi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===C?((r=Fl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=jl(i.type,i.key,i.props,null,e.mode,l)).ref=bi(e,r,i),l.return=e,e=l)}return a(e);case x:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ql(i,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=Ul(i,e.mode,l)).return=e,e=r),a(e);if(yi(i))return m(e,r,i,l);if($(i))return g(e,r,i,l);if(u&&wi(e,i),void 0===i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,K(e.type)||"Component"))}return n(e,r)}}var Si=ki(!0),xi=ki(!1),Ci={},Oi=oo(Ci),Ei=oo(Ci),Mi=oo(Ci);function Ni(e){if(e===Ci)throw Error(s(174));return e}function _i(e,t){switch(so(Mi,t),so(Ei,e),so(Oi,Ci),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}io(Oi),so(Oi,t)}function Di(){io(Oi),io(Ei),io(Mi)}function Ti(e){Ni(Mi.current);var t=Ni(Oi.current),n=pe(t,e.type);t!==n&&(so(Ei,e),so(Oi,n))}function Ai(e){Ei.current===e&&(io(Oi),io(Ei))}var Pi=oo(0);function Ri(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ii=null,zi=null,Li=!1;function Vi(e,t){var n=Ll(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ji(e){if(Li){var t=zi;if(t){var n=t;if(!Bi(e,t)){if(!(t=Ur(n.nextSibling))||!Bi(e,t))return e.flags=-1025&e.flags|2,Li=!1,void(Ii=e);Vi(Ii,n)}Ii=e,zi=Ur(t.firstChild)}else e.flags=-1025&e.flags|2,Li=!1,Ii=e}}function Fi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ii=e}function $i(e){if(e!==Ii)return!1;if(!Li)return Fi(e),Li=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=zi;t;)Vi(e,t),t=Ur(t.nextSibling);if(Fi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zi=Ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zi=null}}else zi=Ii?Ur(e.stateNode.nextSibling):null;return!0}function Ui(){zi=Ii=null,Li=!1}var qi=[];function Wi(){for(var e=0;e<qi.length;e++)qi[e]._workInProgressVersionPrimary=null;qi.length=0}var Hi=k.ReactCurrentDispatcher,Ki=k.ReactCurrentBatchConfig,Ji=0,Yi=null,Qi=null,Gi=null,Xi=!1,Zi=!1;function es(){throw Error(s(321))}function ts(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ns(e,t,n,r,o,i){if(Ji=i,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hi.current=null===e||null===e.memoizedState?Ns:_s,e=n(r,o),Zi){i=0;do{if(Zi=!1,!(25>i))throw Error(s(301));i+=1,Gi=Qi=null,t.updateQueue=null,Hi.current=Ds,e=n(r,o)}while(Zi)}if(Hi.current=Ms,t=null!==Qi&&null!==Qi.next,Ji=0,Gi=Qi=Yi=null,Xi=!1,t)throw Error(s(300));return e}function rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gi?Yi.memoizedState=Gi=e:Gi=Gi.next=e,Gi}function os(){if(null===Qi){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=Qi.next;var t=null===Gi?Yi.memoizedState:Gi.next;if(null!==t)Gi=t,Qi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qi=e).memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},null===Gi?Yi.memoizedState=Gi=e:Gi=Gi.next=e}return Gi}function is(e,t){return"function"==typeof t?t(e):t}function ss(e){var t=os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Qi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var l=a=i=null,c=o;do{var u=c.lane;if((Ji&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=f,i=r):l=l.next=f,Yi.lanes|=u,Ra|=u}c=c.next}while(null!==c&&c!==o);null===l?i=r:l.next=a,sr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function as(e){var t=os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);sr(i,t.memoizedState)||(As=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ls(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=r,qi.push(t))),e)return n(t._source);throw qi.push(t),Error(s(350))}function cs(e,t,n,r){var o=Ea;if(null===o)throw Error(s(349));var i=t._getVersion,a=i(t._source),l=Hi.current,c=l.useState((function(){return ls(o,t,n)})),u=c[1],f=c[0];c=Gi;var d=e.memoizedState,h=d.refs,p=h.getSnapshot,m=d.source;d=d.subscribe;var g=Yi;return e.memoizedState={refs:h,source:t,subscribe:r},l.useEffect((function(){h.getSnapshot=n,h.setSnapshot=u;var e=i(t._source);if(!sr(a,e)){e=n(t._source),sr(f,e)||(u(e),e=sl(g),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,s=e;0<s;){var l=31-Ut(s),c=1<<l;r[l]|=e,s&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=sl(g);o.mutableReadLanes|=r&o.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),sr(p,n)&&sr(m,t)&&sr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:f}).dispatch=u=Es.bind(null,Yi,e),c.queue=e,c.baseQueue=null,f=ls(o,t,n),c.memoizedState=c.baseState=f),f}function us(e,t,n){return cs(os(),e,t,n)}function fs(e){var t=rs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:e}).dispatch=Es.bind(null,Yi,e),[t.memoizedState,e]}function ds(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Yi.updateQueue)?(t={lastEffect:null},Yi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function hs(e){return e={current:e},rs().memoizedState=e}function ps(){return os().memoizedState}function ms(e,t,n,r){var o=rs();Yi.flags|=e,o.memoizedState=ds(1|t,n,void 0,void 0===r?null:r)}function gs(e,t,n,r){var o=os();r=void 0===r?null:r;var i=void 0;if(null!==Qi){var s=Qi.memoizedState;if(i=s.destroy,null!==r&&ts(r,s.deps))return void ds(t,n,i,r)}Yi.flags|=e,o.memoizedState=ds(1|t,n,i,r)}function vs(e,t){return ms(516,4,e,t)}function ys(e,t){return gs(516,4,e,t)}function bs(e,t){return gs(4,2,e,t)}function ws(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ks(e,t,n){return n=null!=n?n.concat([e]):null,gs(4,2,ws.bind(null,t,e),n)}function Ss(){}function xs(e,t){var n=os();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ts(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cs(e,t){var n=os();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ts(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Os(e,t){var n=jo();$o(98>n?98:n,(function(){e(!0)})),$o(97<n?97:n,(function(){var n=Ki.transition;Ki.transition=1;try{e(!1),t()}finally{Ki.transition=n}}))}function Es(e,t,n){var r=il(),o=sl(e),i={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Yi||null!==s&&s===Yi)Zi=Xi=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=s(a,n);if(i.eagerReducer=s,i.eagerState=l,sr(l,a))return}catch(e){}al(e,o,r)}}var Ms={readContext:ni,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useOpaqueIdentifier:es,unstable_isNewReconciler:!1},Ns={readContext:ni,useCallback:function(e,t){return rs().memoizedState=[e,void 0===t?null:t],e},useContext:ni,useEffect:vs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ms(4,2,ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ms(4,2,e,t)},useMemo:function(e,t){var n=rs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Es.bind(null,Yi,e),[r.memoizedState,e]},useRef:hs,useState:fs,useDebugValue:Ss,useDeferredValue:function(e){var t=fs(e),n=t[0],r=t[1];return vs((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=fs(!1),t=e[0];return hs(e=Os.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=rs();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},cs(r,e,t,n)},useOpaqueIdentifier:function(){if(Li){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wr++).toString(36))),Error(s(355))})),n=fs(t)[1];return 0==(2&Yi.mode)&&(Yi.flags|=516,ds(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),t}return fs(t="r:"+(Wr++).toString(36)),t},unstable_isNewReconciler:!1},_s={readContext:ni,useCallback:xs,useContext:ni,useEffect:ys,useImperativeHandle:ks,useLayoutEffect:bs,useMemo:Cs,useReducer:ss,useRef:ps,useState:function(){return ss(is)},useDebugValue:Ss,useDeferredValue:function(e){var t=ss(is),n=t[0],r=t[1];return ys((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=ss(is)[0];return[ps().current,e]},useMutableSource:us,useOpaqueIdentifier:function(){return ss(is)[0]},unstable_isNewReconciler:!1},Ds={readContext:ni,useCallback:xs,useContext:ni,useEffect:ys,useImperativeHandle:ks,useLayoutEffect:bs,useMemo:Cs,useReducer:as,useRef:ps,useState:function(){return as(is)},useDebugValue:Ss,useDeferredValue:function(e){var t=as(is),n=t[0],r=t[1];return ys((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=as(is)[0];return[ps().current,e]},useMutableSource:us,useOpaqueIdentifier:function(){return as(is)[0]},unstable_isNewReconciler:!1},Ts=k.ReactCurrentOwner,As=!1;function Ps(e,t,n,r){t.child=null===e?xi(t,null,n,r):Si(t,e.child,n,r)}function Rs(e,t,n,r,o){n=n.render;var i=t.ref;return ti(t,o),r=ns(e,t,n,r,i,o),null===e||As?(t.flags|=1,Ps(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ea(e,t,o))}function Is(e,t,n,r,o,i){if(null===e){var s=n.type;return"function"!=typeof s||Vl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,zs(e,t,s,r,o,i))}return s=e.child,0==(o&i)&&(o=s.memoizedProps,(n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)?ea(e,t,i):(t.flags|=1,(e=Bl(s,r)).ref=t.ref,e.return=t,t.child=e)}function zs(e,t,n,r,o,i){if(null!==e&&lr(e.memoizedProps,r)&&e.ref===t.ref){if(As=!1,0==(i&o))return t.lanes=e.lanes,ea(e,t,i);0!=(16384&e.flags)&&(As=!0)}return Bs(e,t,n,r,i)}function Ls(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ml(t,n);else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ml(t,e),null;t.memoizedState={baseLanes:0},ml(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ml(t,r);return Ps(e,t,o,n),t.child}function Vs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Bs(e,t,n,r,o){var i=ho(n)?uo:lo.current;return i=fo(t,i),ti(t,o),n=ns(e,t,n,r,i,o),null===e||As?(t.flags|=1,Ps(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ea(e,t,o))}function js(e,t,n,r,o){if(ho(n)){var i=!0;vo(t)}else i=!1;if(ti(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mi(t,n,r),vi(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=ni(c):c=fo(t,c=ho(n)?uo:lo.current);var u=n.getDerivedStateFromProps,f="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;f||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&gi(t,s,r,c),ri=!1;var d=t.memoizedState;s.state=d,ci(t,r,s,o),l=t.memoizedState,a!==r||d!==l||co.current||ri?("function"==typeof u&&(di(t,n,u,r),l=t.memoizedState),(a=ri||pi(t,n,a,r,d,l,c))?(f||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4)):("function"==typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,ii(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ko(t.type,a),s.props=c,f=t.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=ni(l):l=fo(t,l=ho(n)?uo:lo.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==f||d!==l)&&gi(t,s,r,l),ri=!1,d=t.memoizedState,s.state=d,ci(t,r,s,o);var p=t.memoizedState;a!==f||d!==p||co.current||ri?("function"==typeof h&&(di(t,n,h,r),p=t.memoizedState),(c=ri||pi(t,n,c,r,d,p,l))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Fs(e,t,n,r,i,o)}function Fs(e,t,n,r,o,i){Vs(e,t);var s=0!=(64&t.flags);if(!r&&!s)return o&&yo(t,n,!1),ea(e,t,i);r=t.stateNode,Ts.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,a,i)):Ps(e,t,a,i),t.memoizedState=r.state,o&&yo(t,n,!0),t.child}function $s(e){var t=e.stateNode;t.pendingContext?mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mo(0,t.context,!1),_i(e,t.containerInfo)}var Us,qs,Ws,Hs={dehydrated:null,retryLane:0};function Ks(e,t,n){var r,o=t.pendingProps,i=Pi.current,s=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),so(Pi,1&i),null===e?(void 0!==o.fallback&&ji(t),e=o.children,i=o.fallback,s?(e=Js(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Hs,e):"number"==typeof o.unstable_expectedLoadTime?(e=Js(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Hs,t.lanes=33554432,e):((n=$l({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(o=Qs(e,t,o.children,o.fallback,n),s=t.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=Hs,o):(n=Ys(e,t,o.children,n),t.memoizedState=null,n))}function Js(e,t,n,r){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=$l(t,o,0,null),n=Fl(n,o,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Ys(e,t,n,r){var o=e.child;return e=o.sibling,n=Bl(o,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qs(e,t,n,r,o){var i=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:n};return 0==(2&i)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Bl(s,a),null!==e?r=Bl(e,r):(r=Fl(r,i,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Gs(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ei(e.return,t)}function Xs(e,t,n,r,o,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o,s.lastEffect=i)}function Zs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ps(e,t,r.children,n),0!=(2&(r=Pi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,n);else if(19===e.tag)Gs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(so(Pi,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ri(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xs(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ri(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xs(t,!0,n,null,i,t.lastEffect);break;case"together":Xs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ea(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ra|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Bl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ta(e,t){if(!Li)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function na(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ho(t.type)&&po(),null;case 3:return Di(),io(co),io(lo),Wi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||($i(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ai(t);var i=Ni(Mi.current);if(n=t.type,null!==e&&null!=t.stateNode)qs(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ni(Oi.current),$i(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Kr]=t,r[Jr]=a,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Or(kr[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ee(r,a),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Or("invalid",r);break;case"textarea":le(r,a),Or("invalid",r)}for(var c in xe(n,a),e=null,a)a.hasOwnProperty(c)&&(i=a[c],"children"===c?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Or("scroll",r));switch(n){case"input":Q(r),re(r,a,!0);break;case"textarea":Q(r),ue(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Ir)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=he(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Kr]=t,e[Jr]=r,Us(e,t),t.stateNode=e,c=Ce(n,r),n){case"dialog":Or("cancel",e),Or("close",e),i=r;break;case"iframe":case"object":case"embed":Or("load",e),i=r;break;case"video":case"audio":for(i=0;i<kr.length;i++)Or(kr[i],e);i=r;break;case"source":Or("error",e),i=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),i=r;break;case"details":Or("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Or("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=o({},r,{value:void 0}),Or("invalid",e);break;case"textarea":le(e,r),i=ae(e,r),Or("invalid",e);break;default:i=r}xe(n,i);var u=i;for(a in u)if(u.hasOwnProperty(a)){var f=u[a];"style"===a?ke(e,f):"dangerouslySetInnerHTML"===a?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===a?"string"==typeof f?("textarea"!==n||""!==f)&&ve(e,f):"number"==typeof f&&ve(e,""+f):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=f&&"onScroll"===a&&Or("scroll",e):null!=f&&w(e,a,f,c))}switch(n){case"input":Q(e),re(e,r,!1);break;case"textarea":Q(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?se(e,!!r.multiple,a,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ir)}Vr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ws(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));n=Ni(Mi.current),Ni(Oi.current),$i(t)?(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=t,t.stateNode=r)}return null;case 13:return io(Pi),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&$i(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Pi.current)?0===Ta&&(Ta=3):(0!==Ta&&3!==Ta||(Ta=4),null===Ea||0==(134217727&Ra)&&0==(134217727&Ia)||fl(Ea,Na))),(r||n)&&(t.flags|=4),null);case 4:return Di(),null===e&&Mr(t.stateNode.containerInfo),null;case 10:return Zo(t),null;case 17:return ho(t.type)&&po(),null;case 19:if(io(Pi),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=r.rendering))if(a)ta(r,!1);else{if(0!==Ta||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ri(e))){for(t.flags|=64,ta(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return so(Pi,1&Pi.current|2),t.child}e=e.sibling}null!==r.tail&&Bo()>Ba&&(t.flags|=64,a=!0,ta(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Ri(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ta(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Li)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bo()-r.renderingStartTime>Ba&&1073741824!==n&&(t.flags|=64,a=!0,ta(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bo(),n.sibling=null,t=Pi.current,so(Pi,a?1&t|2:1&t),n):null;case 23:case 24:return gl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function ra(e){switch(e.tag){case 1:ho(e.type)&&po();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Di(),io(co),io(lo),Wi(),0!=(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Ai(e),null;case 13:return io(Pi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return io(Pi),null;case 4:return Di(),null;case 10:return Zo(e),null;case 23:case 24:return gl(),null;default:return null}}function oa(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function ia(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ni(Oi.current);var s,a=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),a=[];break;case"option":i=ie(e,i),r=ie(e,r),a=[];break;case"select":i=o({},i,{value:void 0}),r=o({},r,{value:void 0}),a=[];break;case"textarea":i=ae(e,i),r=ae(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ir)}for(f in xe(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var c=i[f];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(l.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(c=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&u!==c&&(null!=u||null!=c))if("style"===f)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(f,n)),n=u;else"dangerouslySetInnerHTML"===f?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(f,u)):"children"===f?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(f,""+u):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(l.hasOwnProperty(f)?(null!=u&&"onScroll"===f&&Or("scroll",e),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===I?u.toString():(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}},Ws=function(e,t,n,r){n!==r&&(t.flags|=4)};var sa="function"==typeof WeakMap?WeakMap:Map;function aa(e,t,n){(n=si(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ua||(Ua=!0,qa=r),ia(0,t)},n}function la(e,t,n){(n=si(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return ia(0,t),r(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Wa?Wa=new Set([this]):Wa.add(this),ia(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ca="function"==typeof WeakSet?WeakSet:Set;function ua(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Pl(e,t)}else t.current=null}function fa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ko(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&$r(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(Dl(n,e),_l(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ko(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ui(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ui(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Vr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ha(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,r.style.display=we("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function pa(e,t){if(wo&&"function"==typeof wo.onCommitFiberUnmount)try{wo.onCommitFiberUnmount(bo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!=(4&r))Dl(t,n);else{r=t;try{o()}catch(e){Pl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ua(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Pl(t,e)}break;case 5:ua(t);break;case 4:ya(e,t)}}function ma(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ga(e){return 5===e.tag||3===e.tag||4===e.tag}function va(e){e:{for(var t=e.return;null!==t;){if(ga(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ga(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Ir));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ya(e,t){for(var n,r,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(s(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var a=e,l=o,c=l;;)if(pa(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=o.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(pa(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ce(e,o),t=Ce(e,r),o=0;o<i.length;o+=2){var a=i[o],l=i[o+1];"style"===a?ke(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ve(n,l):w(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?se(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Va=Bo(),ha(t.child,!0)),void wa(t);case 19:return void wa(t);case 17:return;case 23:case 24:return void ha(t,null!==t.memoizedState)}throw Error(s(163))}function wa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ca),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ka(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Sa=Math.ceil,xa=k.ReactCurrentDispatcher,Ca=k.ReactCurrentOwner,Oa=0,Ea=null,Ma=null,Na=0,_a=0,Da=oo(0),Ta=0,Aa=null,Pa=0,Ra=0,Ia=0,za=0,La=null,Va=0,Ba=1/0;function ja(){Ba=Bo()+500}var Fa,$a=null,Ua=!1,qa=null,Wa=null,Ha=!1,Ka=null,Ja=90,Ya=[],Qa=[],Ga=null,Xa=0,Za=null,el=-1,tl=0,nl=0,rl=null,ol=!1;function il(){return 0!=(48&Oa)?Bo():-1!==el?el:el=Bo()}function sl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===jo()?1:2;if(0===tl&&(tl=Pa),0!==Ho.transition){0!==nl&&(nl=null!==La?La.pendingLanes:0),e=tl;var t=4186112&~nl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=jo(),0!=(4&Oa)&&98===e?e=Bt(12,tl):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tl),e}function al(e,t,n){if(50<Xa)throw Xa=0,Za=null,Error(s(185));if(null===(e=ll(e,t)))return null;$t(e,t,n),e===Ea&&(Ia|=t,4===Ta&&fl(e,Na));var r=jo();1===t?0!=(8&Oa)&&0==(48&Oa)?dl(e):(cl(e,n),0===Oa&&(ja(),qo())):(0==(4&Oa)||98!==r&&99!==r||(null===Ga?Ga=new Set([e]):Ga.add(e)),cl(e,n)),La=e}function ll(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function cl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ut(a),c=1<<l,u=i[l];if(-1===u){if(0==(c&r)||0!=(c&o)){u=t,zt(c);var f=It;i[l]=10<=f?u+250:6<=f?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=Lt(e,e===Ea?Na:0),t=It,0===r)null!==n&&(n!==Po&&xo(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Po&&xo(n)}15===t?(n=dl.bind(null,e),null===Io?(Io=[n],zo=So(No,Wo)):Io.push(n),n=Po):14===t?n=Uo(99,dl.bind(null,e)):n=Uo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),ul.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ul(e){if(el=-1,nl=tl=0,0!=(48&Oa))throw Error(s(327));var t=e.callbackNode;if(Nl()&&e.callbackNode!==t)return null;var n=Lt(e,e===Ea?Na:0);if(0===n)return null;var r=n,o=Oa;Oa|=16;var i=bl();for(Ea===e&&Na===r||(ja(),vl(e,r));;)try{Sl();break}catch(t){yl(e,t)}if(Xo(),xa.current=i,Oa=o,null!==Ma?r=0:(Ea=null,Na=0,r=Ta),0!=(Pa&Ia))vl(e,0);else if(0!==r){if(2===r&&(Oa|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(n=Vt(e))&&(r=wl(e,n))),1===r)throw t=Aa,vl(e,0),fl(e,n),cl(e,Bo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:Ol(e);break;case 3:if(fl(e,n),(62914560&n)===n&&10<(r=Va+500-Bo())){if(0!==Lt(e,0))break;if(((o=e.suspendedLanes)&n)!==n){il(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jr(Ol.bind(null,e),r);break}Ol(e);break;case 4:if(fl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var a=31-Ut(n);i=1<<a,(a=r[a])>o&&(o=a),n&=~i}if(n=o,10<(n=(120>(n=Bo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sa(n/1960))-n)){e.timeoutHandle=jr(Ol.bind(null,e),n);break}Ol(e);break;case 5:Ol(e);break;default:throw Error(s(329))}}return cl(e,Bo()),e.callbackNode===t?ul.bind(null,e):null}function fl(e,t){for(t&=~za,t&=~Ia,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function dl(e){if(0!=(48&Oa))throw Error(s(327));if(Nl(),e===Ea&&0!=(e.expiredLanes&Na)){var t=Na,n=wl(e,t);0!=(Pa&Ia)&&(n=wl(e,t=Lt(e,t)))}else n=wl(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Oa|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(t=Vt(e))&&(n=wl(e,t))),1===n)throw n=Aa,vl(e,0),fl(e,t),cl(e,Bo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),cl(e,Bo()),null}function hl(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(ja(),qo())}}function pl(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&(ja(),qo())}}function ml(e,t){so(Da,_a),_a|=t,Pa|=t}function gl(){_a=Da.current,io(Da)}function vl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Fr(n)),null!==Ma)for(n=Ma.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&po();break;case 3:Di(),io(co),io(lo),Wi();break;case 5:Ai(r);break;case 4:Di();break;case 13:case 19:io(Pi);break;case 10:Zo(r);break;case 23:case 24:gl()}n=n.return}Ea=e,Ma=Bl(e.current,null),Na=_a=Pa=t,Ta=0,Aa=null,za=Ia=Ra=0}function yl(e,t){for(;;){var n=Ma;try{if(Xo(),Hi.current=Ms,Xi){for(var r=Yi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}Xi=!1}if(Ji=0,Gi=Qi=Yi=null,Zi=!1,Ca.current=null,null===n||null===n.return){Ta=1,Aa=t,Ma=null;break}e:{var i=e,s=n.return,a=n,l=t;if(t=Na,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=0!=(1&Pi.current),d=s;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var v=new Set;v.add(c),d.updateQueue=v}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=si(-1,1);y.tag=2,ai(a,y)}a.lanes|=1;break e}l=void 0,a=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new sa,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(a)){l.add(a);var w=Rl.bind(null,i,c,a);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((K(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ta&&(Ta=2),l=oa(l,a),d=s;do{switch(d.tag){case 3:i=l,d.flags|=4096,t&=-t,d.lanes|=t,li(d,aa(0,i,t));break e;case 1:i=l;var k=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof k.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Wa||!Wa.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,li(d,la(d,i,t));break e}}d=d.return}while(null!==d)}Cl(n)}catch(e){t=e,Ma===n&&null!==n&&(Ma=n=n.return);continue}break}}function bl(){var e=xa.current;return xa.current=Ms,null===e?Ms:e}function wl(e,t){var n=Oa;Oa|=16;var r=bl();for(Ea===e&&Na===t||vl(e,t);;)try{kl();break}catch(t){yl(e,t)}if(Xo(),Oa=n,xa.current=r,null!==Ma)throw Error(s(261));return Ea=null,Na=0,Ta}function kl(){for(;null!==Ma;)xl(Ma)}function Sl(){for(;null!==Ma&&!Co();)xl(Ma)}function xl(e){var t=Fa(e.alternate,e,_a);e.memoizedProps=e.pendingProps,null===t?Cl(e):Ma=t,Ca.current=null}function Cl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=na(n,t,_a)))return void(Ma=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&_a)||0==(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ra(t)))return n.flags&=2047,void(Ma=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ma=t);Ma=t=e}while(null!==t);0===Ta&&(Ta=5)}function Ol(e){var t=jo();return $o(99,El.bind(null,e,t)),null}function El(e,t){do{Nl()}while(null!==Ka);if(0!=(48&Oa))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<i;){var c=31-Ut(i),u=1<<c;o[c]=0,a[c]=-1,l[c]=-1,i&=~u}if(null!==Ga&&0==(24&r)&&Ga.has(e)&&Ga.delete(e),e===Ea&&(Ma=Ea=null,Na=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=Oa,Oa|=32,Ca.current=null,zr=Jt,dr(a=fr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,i=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var f=0,d=-1,h=-1,p=0,m=0,g=a,v=null;t:for(;;){for(var y;g!==l||0!==i&&3!==g.nodeType||(d=f+i),g!==c||0!==u&&3!==g.nodeType||(h=f+u),3===g.nodeType&&(f+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===a)break t;if(v===l&&++p===i&&(d=f),v===c&&++m===u&&(h=f),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===d||-1===h?null:{start:d,end:h}}else l=null;l=l||{start:0,end:0}}else l=null;Lr={focusedElem:a,selectionRange:l},Jt=!1,rl=null,ol=!1,$a=r;do{try{Ml()}catch(e){if(null===$a)throw Error(s(330));Pl($a,e),$a=$a.nextEffect}}while(null!==$a);rl=null,$a=r;do{try{for(a=e;null!==$a;){var b=$a.flags;if(16&b&&ve($a.stateNode,""),128&b){var w=$a.alternate;if(null!==w){var k=w.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:va($a),$a.flags&=-3;break;case 6:va($a),$a.flags&=-3,ba($a.alternate,$a);break;case 1024:$a.flags&=-1025;break;case 1028:$a.flags&=-1025,ba($a.alternate,$a);break;case 4:ba($a.alternate,$a);break;case 8:ya(a,l=$a);var S=l.alternate;ma(l),null!==S&&ma(S)}$a=$a.nextEffect}}catch(e){if(null===$a)throw Error(s(330));Pl($a,e),$a=$a.nextEffect}}while(null!==$a);if(k=Lr,w=fr(),b=k.focusedElem,a=k.selectionRange,w!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==a&&dr(b)&&(w=a.start,void 0===(k=a.end)&&(k=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(k,b.value.length)):(k=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),l=b.textContent.length,S=Math.min(a.start,l),a=void 0===a.end?S:Math.min(a.end,l),!k.extend&&S>a&&(l=a,a=S,S=l),l=ur(b,S),i=ur(b,a),l&&i&&(1!==k.rangeCount||k.anchorNode!==l.node||k.anchorOffset!==l.offset||k.focusNode!==i.node||k.focusOffset!==i.offset)&&((w=w.createRange()).setStart(l.node,l.offset),k.removeAllRanges(),S>a?(k.addRange(w),k.extend(i.node,i.offset)):(w.setEnd(i.node,i.offset),k.addRange(w))))),w=[];for(k=b;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(k=w[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Jt=!!zr,Lr=zr=null,e.current=n,$a=r;do{try{for(b=e;null!==$a;){var x=$a.flags;if(36&x&&da(b,$a.alternate,$a),128&x){w=void 0;var C=$a.ref;if(null!==C){var O=$a.stateNode;switch($a.tag){case 5:w=O;break;default:w=O}"function"==typeof C?C(w):C.current=w}}$a=$a.nextEffect}}catch(e){if(null===$a)throw Error(s(330));Pl($a,e),$a=$a.nextEffect}}while(null!==$a);$a=null,Ro(),Oa=o}else e.current=n;if(Ha)Ha=!1,Ka=e,Ja=t;else for($a=r;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,8&$a.flags&&((x=$a).sibling=null,x.stateNode=null),$a=t;if(0===(r=e.pendingLanes)&&(Wa=null),1===r?e===Za?Xa++:(Xa=0,Za=e):Xa=0,n=n.stateNode,wo&&"function"==typeof wo.onCommitFiberRoot)try{wo.onCommitFiberRoot(bo,n,void 0,64==(64&n.current.flags))}catch(e){}if(cl(e,Bo()),Ua)throw Ua=!1,e=qa,qa=null,e;return 0!=(8&Oa)||qo(),null}function Ml(){for(;null!==$a;){var e=$a.alternate;ol||null===rl||(0!=(8&$a.flags)?Ze($a,rl)&&(ol=!0):13===$a.tag&&ka(e,$a)&&Ze($a,rl)&&(ol=!0));var t=$a.flags;0!=(256&t)&&fa(e,$a),0==(512&t)||Ha||(Ha=!0,Uo(97,(function(){return Nl(),null}))),$a=$a.nextEffect}}function Nl(){if(90!==Ja){var e=97<Ja?97:Ja;return Ja=90,$o(e,Tl)}return!1}function _l(e,t){Ya.push(t,e),Ha||(Ha=!0,Uo(97,(function(){return Nl(),null})))}function Dl(e,t){Qa.push(t,e),Ha||(Ha=!0,Uo(97,(function(){return Nl(),null})))}function Tl(){if(null===Ka)return!1;var e=Ka;if(Ka=null,0!=(48&Oa))throw Error(s(331));var t=Oa;Oa|=32;var n=Qa;Qa=[];for(var r=0;r<n.length;r+=2){var o=n[r],i=n[r+1],a=o.destroy;if(o.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===i)throw Error(s(330));Pl(i,e)}}for(n=Ya,Ya=[],r=0;r<n.length;r+=2){o=n[r],i=n[r+1];try{var l=o.create;o.destroy=l()}catch(e){if(null===i)throw Error(s(330));Pl(i,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Oa=t,qo(),!0}function Al(e,t,n){ai(e,t=aa(0,t=oa(n,t),1)),t=il(),null!==(e=ll(e,1))&&($t(e,1,t),cl(e,t))}function Pl(e,t){if(3===e.tag)Al(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Al(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wa||!Wa.has(r))){var o=la(n,e=oa(t,e),1);if(ai(n,o),o=il(),null!==(n=ll(n,1)))$t(n,1,o),cl(n,o);else if("function"==typeof r.componentDidCatch&&(null===Wa||!Wa.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Rl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=il(),e.pingedLanes|=e.suspendedLanes&n,Ea===e&&(Na&n)===n&&(4===Ta||3===Ta&&(62914560&Na)===Na&&500>Bo()-Va?vl(e,0):za|=n),cl(e,t)}function Il(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===jo()?1:2:(0===tl&&(tl=Pa),0===(t=jt(62914560&~tl))&&(t=4194304))),n=il(),null!==(e=ll(e,t))&&($t(e,t,n),cl(e,n))}function zl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,r){return new zl(e,t,n,r)}function Vl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bl(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jl(e,t,n,r,o,i){var a=2;if(r=e,"function"==typeof e)Vl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case C:return Fl(n.children,o,i,t);case z:a=8,o|=16;break;case O:a=8,o|=1;break;case E:return(e=Ll(12,n,t,8|o)).elementType=E,e.type=E,e.lanes=i,e;case D:return(e=Ll(13,n,t,o)).type=D,e.elementType=D,e.lanes=i,e;case T:return(e=Ll(19,n,t,o)).elementType=T,e.lanes=i,e;case L:return $l(n,o,i,t);case V:return(e=Ll(24,n,t,o)).elementType=V,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case N:a=9;break e;case _:a=11;break e;case A:a=14;break e;case P:a=16,r=null;break e;case R:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ll(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Fl(e,t,n,r){return(e=Ll(7,e,r,t)).lanes=n,e}function $l(e,t,n,r){return(e=Ll(23,e,r,t)).elementType=L,e.lanes=n,e}function Ul(e,t,n){return(e=Ll(6,e,null,t)).lanes=n,e}function ql(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ft(0),this.expirationTimes=Ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.mutableSourceEagerHydrationData=null}function Hl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Kl(e,t,n,r){var o=t.current,i=il(),a=sl(o);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(ho(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(ho(c)){n=go(n,c,l);break e}}n=l}else n=ao;return null===t.context?t.context=n:t.pendingContext=n,(t=si(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ai(o,t),al(o,a,i),a}function Jl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ql(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}function Gl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Wl(e,t,null!=n&&!0===n.hydrate),t=Ll(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oi(t),e[Yr]=n.current,Mr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if("function"==typeof o){var a=o;o=function(){var e=Jl(s);a.call(e)}}Kl(t,s,e,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Gl(e,0,t?{hydrate:!0}:void 0)}(n,r),s=i._internalRoot,"function"==typeof o){var l=o;o=function(){var e=Jl(s);l.call(e)}}pl((function(){Kl(t,s,e,o)}))}return Jl(s)}function ec(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(s(200));return Hl(e,t,null,n)}Fa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||co.current)As=!0;else{if(0==(n&r)){switch(As=!1,t.tag){case 3:$s(t),Ui();break;case 5:Ti(t);break;case 1:ho(t.type)&&vo(t);break;case 4:_i(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;so(Jo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ks(e,t,n):(so(Pi,1&Pi.current),null!==(t=ea(e,t,n))?t.sibling:null);so(Pi,1&Pi.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Zs(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),so(Pi,Pi.current),r)break;return null;case 23:case 24:return t.lanes=0,Ls(e,t,n)}return ea(e,t,n)}As=0!=(16384&e.flags)}else As=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=fo(t,lo.current),ti(t,n),o=ns(null,t,r,e,o,n),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ho(r)){var i=!0;vo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,oi(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&di(t,r,a,e),o.updater=hi,t.stateNode=o,o._reactInternals=t,vi(t,r,e,n),t=Fs(null,t,r,!0,i,n)}else t.tag=0,Ps(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"==typeof e)return Vl(e)?1:0;if(null!=e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(o),e=Ko(o,e),i){case 0:t=Bs(null,t,o,e,n);break e;case 1:t=js(null,t,o,e,n);break e;case 11:t=Rs(null,t,o,e,n);break e;case 14:t=Is(null,t,o,Ko(o.type,e),r,n);break e}throw Error(s(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Bs(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 1:return r=t.type,o=t.pendingProps,js(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 3:if($s(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ii(e,t),ci(t,r,null,n),(r=t.memoizedState.element)===o)Ui(),t=ea(e,t,n);else{if((i=(o=t.stateNode).hydrate)&&(zi=Ur(t.stateNode.containerInfo.firstChild),Ii=t,i=Li=!0),i){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(i=e[o])._workInProgressVersionPrimary=e[o+1],qi.push(i);for(n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ps(e,t,r,n),Ui();t=t.child}return t;case 5:return Ti(t),null===e&&ji(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,Br(r,o)?a=null:null!==i&&Br(r,i)&&(t.flags|=16),Vs(e,t),Ps(e,t,a,n),t.child;case 6:return null===e&&ji(t),null;case 13:return Ks(e,t,n);case 4:return _i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):Ps(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Rs(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 7:return Ps(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ps(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var l=t.type._context;if(so(Jo,l._currentValue),l._currentValue=i,null!==a)if(l=a.value,0===(i=sr(l,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(a.children===o.children&&!co.current){t=ea(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&i)){1===l.tag&&((u=si(-1,n&-n)).tag=2,ai(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),ei(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ps(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,ti(t,n),r=r(o=ni(o,i.unstable_observedBits)),t.flags|=1,Ps(e,t,r,n),t.child;case 14:return i=Ko(o=t.type,t.pendingProps),Is(e,t,o,i=Ko(o.type,i),r,n);case 15:return zs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ko(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ho(r)?(e=!0,vo(t)):e=!1,ti(t,n),mi(t,r,o),vi(t,r,o,n),Fs(null,t,r,!0,e,n);case 19:return Zs(e,t,n);case 23:case 24:return Ls(e,t,n)}throw Error(s(156,t.tag))},Gl.prototype.render=function(e){Kl(e,this._internalRoot,null,null)},Gl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Kl(null,e,null,(function(){t[Yr]=null}))},et=function(e){13===e.tag&&(al(e,4,il()),Ql(e,4))},tt=function(e){13===e.tag&&(al(e,67108864,il()),Ql(e,67108864))},nt=function(e){if(13===e.tag){var t=il(),n=sl(e);al(e,n,t),Ql(e,n)}},rt=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=eo(r);if(!o)throw Error(s(90));G(r),ne(r,o)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Ae=hl,Pe=function(e,t,n,r,o){var i=Oa;Oa|=4;try{return $o(98,e.bind(null,t,n,r,o))}finally{0===(Oa=i)&&(ja(),qo())}},Re=function(){0==(49&Oa)&&(function(){if(null!==Ga){var e=Ga;Ga=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,cl(e,Bo())}))}qo()}(),Nl())},Ie=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&(ja(),qo())}};var tc={Events:[Xr,Zr,eo,De,Te,Nl,{current:!1}]},nc={findFiberByHostInstance:Gr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{bo=oc.inject(rc),wo=oc}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=ec,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oa;if(0!=(48&n))return e(t);Oa|=1;try{if(e)return $o(99,e.bind(null,t))}finally{Oa=n,qo()}},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return Zl(null,e,t,!0,n)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(pl((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Yr]=null}))})),!0)},t.unstable_batchedUpdates=hl,t.unstable_createPortal=function(e,t){return ec(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zl(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(28)},function(e,t,n){"use strict";
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,o,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,f=null,d=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(d,0),e}};r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(d,0))},o=function(e,t){f=setTimeout(e,t)},i=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,v=null,y=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,S=k.port2;k.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();w=e+b;try{v(!0,e)?S.postMessage(null):(g=!1,v=null)}catch(e){throw S.postMessage(null),e}}else g=!1},r=function(e){v=e,g||(g=!0,S.postMessage(null))},o=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){p(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<E(o,t)))break e;e[r]=t,e[n]=o,n=r}}function C(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,s=e[i],a=i+1,l=e[a];if(void 0!==s&&0>E(s,n))void 0!==l&&0>E(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[i]=n,r=i);else{if(!(void 0!==l&&0>E(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],N=[],_=1,D=null,T=3,A=!1,P=!1,R=!1;function I(e){for(var t=C(N);null!==t;){if(null===t.callback)O(N);else{if(!(t.startTime<=e))break;O(N),t.sortIndex=t.expirationTime,x(M,t)}t=C(N)}}function z(e){if(R=!1,I(e),!P)if(null!==C(M))P=!0,r(L);else{var t=C(N);null!==t&&o(z,t.startTime-e)}}function L(e,n){P=!1,R&&(R=!1,i()),A=!0;var r=T;try{for(I(n),D=C(M);null!==D&&(!(D.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=D.callback;if("function"==typeof s){D.callback=null,T=D.priorityLevel;var a=s(D.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?D.callback=a:D===C(M)&&O(M),I(n)}else O(M);D=C(M)}if(null!==D)var l=!0;else{var c=C(N);null!==c&&o(z,c.startTime-n),l=!1}return l}finally{D=null,T=r,A=!1}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,r(L))},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return C(M)},t.unstable_next=function(e){switch(T){case 1:case 2:case 3:var t=3;break;default:t=T}var n=T;T=t;try{return e()}finally{T=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=T;T=e;try{return t()}finally{T=n}},t.unstable_scheduleCallback=function(e,n,s){var a=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:_++,callback:n,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(e.sortIndex=s,x(N,e),null===C(M)&&e===C(N)&&(R?i():R=!0,o(z,s-a))):(e.sortIndex=l,x(M,e),P||A||(P=!0,r(L))),e},t.unstable_wrapCallback=function(e){var t=T;return function(){var n=T;T=t;try{return e.apply(this,arguments)}finally{T=n}}}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(31),o=n(32),i=n(33);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=a(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(u(t),e=a(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,o);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,o){var i,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var u=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(n+l>a&&(n=a-l),i=n;i>=0;i--){for(var f=!0,d=0;d<l;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return $(j(t,e.length-n),e,n,r)}function k(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return k(e,t,n,r)}function x(e,t,n,r){return $(F(t),e,n,r)}function C(e,t,n,r){return $(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,l,c=e[o],u=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n),f=0;f<a;++f)if(c[f]!==u[f]){i=c[f],s=u[f];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function _(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=B(e[i]);return o}function D(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function I(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,i){return i||I(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||I(e,0,n,8),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=l.isBuffer(e)?e:j(new l(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(30))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(u(e,s,s+16383>a?a:s+16383));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var o,i,s=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+e[t+f],f+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+f],f+=d,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,l,c=8*i-o-1,u=(1<<c)-1,f=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(s++,l/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(t*l-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[n+h]=255&s,h+=p,s/=256,c-=8);e[n+h-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,f=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):f=-1,c.length&&h())}function h(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r=n(3);function o(e){this.content=e}o.prototype={constructor:o,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new o(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new o(n)},addToStart:function(e,t){return new o([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new o(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(-1==s?i.length:s,0,t,n),new o(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=o.from(e)).size?new o(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=o.from(e)).size?new o(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=o.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},o.from=function(e){if(e instanceof o)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new o(t)};var i=o;var s=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},a={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};s.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,r+c)}s=l}},s.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},s.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},s.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new s(r,this.size+e.size)},s.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,i=0;i<t;o++){var a=this.content[o],l=i+a.nodeSize;l>e&&((i<e||l>t)&&(a=a.isText?a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),n.push(a),r+=a.nodeSize),i=l}return new s(n,r)},s.prototype.cutByIndex=function(e,t){return e==t?s.empty:0==e&&t==this.content.length?this:new s(this.content.slice(e,t))},s.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new s(r,o)},s.prototype.addToStart=function(e){return new s([e].concat(this.content),this.size+e.nodeSize)},s.prototype.addToEnd=function(e){return new s(this.content.concat(e),this.size+e.nodeSize)},s.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},a.firstChild.get=function(){return this.content.length?this.content[0]:null},a.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},a.childCount.get=function(){return this.content.length},s.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},s.prototype.maybeChild=function(e){return this.content[e]},s.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},s.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var l=e(i.content,s.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},s.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=t.child(--i),l=n.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:r,b:o};if(a.isText&&a.text!=l.text){for(var u=0,f=Math.min(a.text.length,l.text.length);u<f&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(a.content.size||l.content.size){var d=e(a.content,l.content,r-1,o-1);if(d)return d}r-=c,o-=c}else r-=c,o-=c}}(this,e,t,n)},s.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}},s.prototype.toString=function(){return"<"+this.toStringInner()+">"},s.prototype.toStringInner=function(){return this.content.join(", ")},s.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},s.fromJSON=function(e,t){if(!t)return s.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new s(t.map(e.nodeFromJSON))},s.fromArray=function(e){if(!e.length)return s.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new s(t||e,n)},s.from=function(e){if(!e)return s.empty;if(e instanceof s)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new s([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(s.prototype,a);var l={index:0,offset:0};function c(e,t){return l.index=e,l.offset=t,l}function u(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!u(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}s.empty=new s([],0);var f=function(e,t){this.type=e,this.attrs=t};function d(e){var t=Error.call(this,e);return t.__proto__=d.prototype,t}f.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},f.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},f.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},f.prototype.eq=function(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)},f.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},f.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},f.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},f.setFrom=function(e){if(!e||0==e.length)return f.none;if(e instanceof f)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},f.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var h=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},p={size:{configurable:!0}};function m(e,t,n){if(n.openStart>e.depth)throw new d("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new d("Inconsistent open depths");return function e(t,n,r,o){var i=t.index(o),a=t.node(o);if(i==n.index(o)&&o<t.depth-r.openStart){var l=e(t,n,r,o+1);return a.copy(a.content.replaceChild(i,l))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var c=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(s.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),u=c.start,f=c.end;return w(a,function e(t,n,r,o,i){var a=t.depth>i&&v(t,n,i+1),l=o.depth>i&&v(r,o,i+1),c=[];b(null,t,i,c),a&&l&&n.index(i)==r.index(i)?(g(a,l),y(w(a,e(t,n,r,o,i+1)),c)):(a&&y(w(a,k(t,n,i+1)),c),b(n,r,i,c),l&&y(w(l,k(r,o,i+1)),c));return b(o,null,i,c),new s(c)}(t,u,f,n,o))}var d=t.parent,h=d.content;return w(d,h.cut(0,t.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return w(a,k(t,n,o))}(e,t,n,0)}function g(e,t){if(!t.type.compatibleContent(e.type))throw new d("Cannot join "+t.type.name+" onto "+e.type.name)}function v(e,t,n){var r=e.node(n);return g(r,t.node(n)),r}function y(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function b(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(y(e.nodeAfter,r),i++));for(var a=i;a<s;a++)y(o.child(a),r);t&&t.depth==n&&t.textOffset&&y(t.nodeBefore,r)}function w(e,t){if(!e.type.validContent(t))throw new d("Invalid content for node "+e.type.name);return e.copy(t)}function k(e,t,n){var r=[];(b(null,e,n,r),e.depth>n)&&y(w(v(e,t,n+1),k(e,t,n+1)),r);return b(t,null,n,r),new s(r)}p.size.get=function(){return this.content.size-this.openStart-this.openEnd},h.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n),s=i.index,a=i.offset,l=t.maybeChild(s);if(a==n||l.isText)return o&&!o.canReplace(s,s,r)?null:t.cut(0,n).append(r).append(t.cut(n));var c=e(l.content,n-a-1,r);return c&&t.replaceChild(s,l.copy(c))}(this.content,e+this.openStart,t,null);return n&&new h(n,this.openStart,this.openEnd)},h.prototype.removeBetween=function(e,t){return new h(function e(t,n,r){var o=t.findIndex(n),i=o.index,s=o.offset,a=t.maybeChild(i),l=t.findIndex(r),c=l.index,u=l.offset;if(s==n||a.isText){if(u!=r&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(e(a.content,n-s-1,r-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},h.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},h.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},h.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},h.fromJSON=function(e,t){if(!t)return h.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new h(s.fromJSON(e,t.content),n,r)},h.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new h(e,n,r)},Object.defineProperties(h.prototype,p),h.empty=new h(s.empty,0,0);var S=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},x={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};S.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},x.parent.get=function(){return this.node(this.depth)},x.doc.get=function(){return this.node(0)},S.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},S.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},S.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},S.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},S.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},S.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},S.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},x.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},x.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},x.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},S.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r},S.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return f.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},S.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},S.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},S.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new M(this,e,n)},S.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},S.prototype.max=function(e){return e.pos>this.pos?e:this},S.prototype.min=function(e){return e.pos<this.pos?e:this},S.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},S.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var s=i.content.findIndex(o),a=s.index,l=s.offset,c=o-l;if(n.push(i,a,r+l),!c)break;if((i=i.child(a)).isText)break;o=c-1,r+=l+1}return new S(t,n,o)},S.resolveCached=function(e,t){for(var n=0;n<C.length;n++){var r=C[n];if(r.pos==t&&r.doc==e)return r}var o=C[O]=S.resolve(e,t);return O=(O+1)%E,o},Object.defineProperties(S.prototype,x);var C=[],O=0,E=12,M=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},N={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};N.start.get=function(){return this.$from.before(this.depth+1)},N.end.get=function(){return this.$to.after(this.depth+1)},N.parent.get=function(){return this.$from.node(this.depth)},N.startIndex.get=function(){return this.$from.index(this.depth)},N.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(M.prototype,N);var _=Object.create(null),D=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||s.empty,this.marks=r||f.none},T={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};T.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},T.childCount.get=function(){return this.content.childCount},D.prototype.child=function(e){return this.content.child(e)},D.prototype.maybeChild=function(e){return this.content.maybeChild(e)},D.prototype.forEach=function(e){this.content.forEach(e)},D.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},D.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},T.textContent.get=function(){return this.textBetween(0,this.content.size,"")},D.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},T.firstChild.get=function(){return this.content.firstChild},T.lastChild.get=function(){return this.content.lastChild},D.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},D.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},D.prototype.hasMarkup=function(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||_)&&f.sameSet(this.marks,n||f.none)},D.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},D.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},D.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},D.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return h.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new h(a,r.depth-i,o.depth-i)},D.prototype.replace=function(e,t,n){return m(this.resolve(e),this.resolve(t),n)},D.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}},D.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},D.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},D.prototype.resolve=function(e){return S.resolveCached(this,e)},D.prototype.resolveNoCache=function(e){return S.resolve(this,e)},D.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},T.isBlock.get=function(){return this.type.isBlock},T.isTextblock.get=function(){return this.type.isTextblock},T.inlineContent.get=function(){return this.type.inlineContent},T.isInline.get=function(){return this.type.isInline},T.isText.get=function(){return this.type.isText},T.isLeaf.get=function(){return this.type.isLeaf},T.isAtom.get=function(){return this.type.isAtom},D.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),P(this.marks,e)},D.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},D.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=s.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var l=r;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0},D.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},D.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},D.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=f.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!f.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},D.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},D.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=s.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(D.prototype,T);var A=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):P(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(D);function P(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var R=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},I={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};R.parse=function(e,t){var n=new z(e,t);if(null==n.next)return R.empty;var r=V(n);n.next&&n.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];q(e,r).forEach((function(e){s||o.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var i=t[r.join(",")]=new R(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(U);i.next.push(o[s],t[a.join(",")]||n(a))}return i}(q(e,0))}(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=e(t.exprs[s],i);if(s==t.exprs.length-1)return a;o(a,i=n())}else{if("star"==t.type){var l=n();return r(i,l),o(e(t.expr,l),l),[r(l)]}if("plus"==t.type){var c=n();return o(e(t.expr,i),c),o(e(t.expr,c),c),[r(c)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,f=0;f<t.min;f++){var d=n();o(e(t.expr,u),d),u=d}if(-1==t.max)o(e(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var p=n();r(u,p),o(e(t.expr,u),p),u=p}return[r(u)]}if("name"==t.type)return[r(i,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],c=o.next[a+1];s.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},R.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},R.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},I.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},I.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},R.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},R.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function o(i,a){var l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return s.from(a.map((function(e){return e.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var u=i.next[c],f=i.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var d=o(f,a.concat(u));if(d)return d}}}(this,[])},R.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},R.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var l=o.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!o.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}},I.edgeCount.get=function(){return this.next.length>>1},R.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},R.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(R.prototype,I),R.empty=new R(!0);var z=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},L={next:{configurable:!0}};function V(e){var t=[];do{t.push(B(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function B(e){var t=[];do{t.push(j(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function j(e){for(var t=function(e){if(e.eat("(")){var t=V(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=$(e,t)}return t}function F(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function $(e,t){var n=F(e),r=n;return e.eat(",")&&(r="}"!=e.next?F(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function U(e,t){return t-e}function q(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(U)}function W(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function H(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function K(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Q(e[n]);return t}L.next.get=function(){return this.tokens[this.pos]},z.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},z.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(z.prototype,L);var J=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=K(n.attrs),this.defaultAttrs=W(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},Y={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Y.isInline.get=function(){return!this.isBlock},Y.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Y.isLeaf.get=function(){return this.contentMatch==R.empty},Y.isAtom.get=function(){return this.isLeaf||this.spec.atom},J.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},J.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},J.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:H(this.attrs,e)},J.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new D(this,this.computeAttrs(e),s.from(t),f.setFrom(n))},J.prototype.createChecked=function(e,t,n){if(t=s.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new D(this,this.computeAttrs(e),t,f.setFrom(n))},J.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=s.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(s.empty,!0);return o?new D(this,e,t.append(o),f.setFrom(n)):null},J.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},J.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},J.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},J.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:f.empty:e},J.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new J(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(J.prototype,Y);var Q=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},G={isRequired:{configurable:!0}};G.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Q.prototype,G);var X=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=K(r.attrs),this.rank=t,this.excluded=null;var o=W(this.attrs);this.instance=o&&new f(this,o)};X.prototype.create=function(e){return!e&&this.instance?this.instance:new f(this,H(this.attrs,e))},X.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new X(e,r++,t,o)})),n},X.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},X.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},X.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Z=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=i.from(e.nodes),this.spec.marks=i.from(e.marks),this.nodes=J.compile(this.spec.nodes,this),this.marks=X.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[s]||(n[s]=R.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ee(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:ee(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ee(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var l=e.marks[a];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Z.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof J))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Z.prototype.text=function(e,t){var n=this.nodes.text;return new A(n,n.defaultAttrs,e,f.setFrom(t))},Z.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Z.prototype.nodeFromJSON=function(e){return D.fromJSON(this,e)},Z.prototype.markFromJSON=function(e){return f.fromJSON(this,e)},Z.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var te=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};te.prototype.parse=function(e,t){void 0===t&&(t={});var n=new ae(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},te.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new ae(this,t,!0);return n.addAll(e,null,t.from,t.to),h.maxOpen(n.finish())},te.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(ce(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},te.prototype.matchStyle=function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s}return i}}},te.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=ue(e)),e.mark=t}))};for(var o in e.marks)r(o);var i;for(var s in e.nodes)i=void 0,(i=e.nodes[s].spec.parseDOM)&&i.forEach((function(e){n(e=ue(e)),e.node=s}));return t},te.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new te(e,te.schemaRules(e)))};var ne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},re={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oe={ol:!0,ul:!0};function ie(e){return(e?1:0)|("full"===e?2:0)}var se=function(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.solid=o,this.match=i||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r,this.stashMarks=[]};se.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(s.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},se.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=s.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(s.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},se.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},se.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):fe(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var ae=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,o=t.topNode,i=ie(t.preserveWhitespace)|(n?4:0);r=o?new se(o.type,o.attrs,f.none,f.none,!0,t.topMatch||o.type.contentMatch,i):new se(n?null:e.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},le={top:{configurable:!0},currentPos:{configurable:!0}};function ce(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ue(e){var t={};for(var n in e)t[n]=e[n];return t}function fe(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(e)){var i=[],s=function(e){i.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),o=r.type,a=r.next;if(o==t)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}le.top.get=function(){return this.nodes[this.open]},ae.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},ae.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},ae.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();oe.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&oe.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:re.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var i,s=this.top,a=this.needsBlock;if(ne.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,o,!1===o.consuming?n:null)},ae.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},ae.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},ae.prototype.readStyles=function(e){var t=f.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t},ae.prototype.addElementByRule=function(e,t,n){var r,o,i,s=this;t.node?(o=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},ae.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&ne.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},ae.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},ae.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},ae.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},ae.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:ie(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new se(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},ae.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},ae.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ae.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},le.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},ae.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},ae.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},ae.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},ae.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},ae.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&o?t.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},ae.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},ae.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},ae.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(ae.prototype,le);var de=function(e,t){this.nodes=e||{},this.marks=t||{}};function he(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function pe(e){return e.document||window.document}de.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=pe(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<e.marks.length;){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=r.serializeMark(l,e.isInline,t);c&&(i.push(l,o),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNode(e,t))})),n},de.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=de.renderSpec(pe(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},de.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},de.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&de.renderSpec(pe(n),r(e,t))},de.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var u=c.indexOf(" ");u>0?s.setAttributeNS(c.slice(0,u),c.slice(u+1),a[c]):s.setAttribute(c,a[c])}for(var f=l;f<t.length;f++){var d=t[f];if(0===d){if(f<t.length-1||f>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=de.renderSpec(e,d,n),p=h.dom,m=h.contentDOM;if(s.appendChild(p),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},de.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new de(this.nodesFromSchema(e),this.marksFromSchema(e)))},de.nodesFromSchema=function(e){var t=he(e.nodes);return t.text||(t.text=function(e){return e.text}),t},de.marksFromSchema=function(e){return he(e.marks)};var me=Math.pow(2,16);function ge(e){return 65535&e}var ve=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},ye=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};ye.prototype.recover=function(e){var t=0,n=ge(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/me}(e)},ye.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},ye.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},ye.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var l=this.ranges[s+o],c=this.ranges[s+i],u=a+l;if(e<=u){var f=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return f;var d=e==(t<0?a:u)?null:s/3+(e-a)*me;return new ve(f,t<0?e!=a:e!=u,d)}r+=c-l}return n?e+r:new ve(e+r)},ye.prototype.touches=function(e,t){for(var n=0,r=ge(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+o];if(e<=a+l&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1},ye.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}},ye.prototype.invert=function(){return new ye(this.ranges,!this.inverted)},ye.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},ye.offset=function(e){return 0==e?ye.empty:new ye(e<0?[0,-e,0]:[0,0,e])},ye.empty=new ye([]);var be=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function we(e){var t=Error.call(this,e);return t.__proto__=we.prototype,t}be.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new be(this.maps,this.mirror,e,t)},be.prototype.copy=function(){return new be(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},be.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},be.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},be.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},be.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},be.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},be.prototype.invert=function(){var e=new be;return e.appendMappingInverted(this),e},be.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},be.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},be.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,e=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),e=i.pos}return n?e:new ve(e,r)},we.prototype=Object.create(Error.prototype),we.prototype.constructor=we,we.prototype.name="TransformError";var ke=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new be},Se={before:{configurable:!0},docChanged:{configurable:!0}};function xe(){throw new Error("Override me")}Se.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ke.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new we(t.failed);return this},ke.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Se.docChanged.get=function(){return this.steps.length>0},ke.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(ke.prototype,Se);var Ce=Object.create(null),Oe=function(){};Oe.prototype.apply=function(e){return xe()},Oe.prototype.getMap=function(){return ye.empty},Oe.prototype.invert=function(e){return xe()},Oe.prototype.map=function(e){return xe()},Oe.prototype.merge=function(e){return null},Oe.prototype.toJSON=function(){return xe()},Oe.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Ce[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Oe.jsonID=function(e,t){if(e in Ce)throw new RangeError("Duplicate use of step JSON ID "+e);return Ce[e]=t,t.prototype.jsonID=e,t};var Ee=function(e,t){this.doc=e,this.failed=t};Ee.ok=function(e){return new Ee(e,null)},Ee.fail=function(e){return new Ee(null,e)},Ee.fromReplace=function(e,t,n,r){try{return Ee.ok(e.replace(t,n,r))}catch(e){if(e instanceof d)return Ee.fail(e.message);throw e}};var Me=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&_e(e,this.from,this.to)?Ee.fail("Structure replace would overwrite content"):Ee.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new ye([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?h.empty:new h(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?h.empty:new h(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,h.fromJSON(e,n.slice),!!n.structure)},t}(Oe);Oe.jsonID("replace",Me);var Ne=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(_e(e,this.from,this.gapFrom)||_e(e,this.gapTo,this.to)))return Ee.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ee.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?Ee.fromReplace(e,this.from,this.to,n):Ee.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new ye([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,h.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Oe);function _e(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function De(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Te(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!De(r,o,i))break}}function Ae(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(r,t);return i?o.map(Pe).concat({type:t,attrs:n}).concat(i.map(Pe)):null}function Pe(e){return{type:e,attrs:null}}function Re(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),u=o.index(a);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(u,c.childCount),d=r&&r[l]||c;if(d!=c&&(f=f.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(u+1,c.childCount)||!d.type.validContent(f))return!1}var h=o.indexAfter(i),p=r&&r[0];return o.node(i).canReplaceWith(h,h,p?p.type:o.node(i+1).type)}function Ie(e,t){var n=e.resolve(t),r=n.index();return ze(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ze(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function Le(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&ze(i,s)&&r.node(o).canReplace(a,a+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Ve(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0),u=r.node(a),f=!1;if(1==s)f=u.canReplace(c,c,o);else{var d=u.contentMatchAt(c).findWrapping(o.firstChild.type);f=d&&u.canReplaceWith(c,c,d[0].type)}if(f)return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function Be(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Be(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return s.fromArray(r)}Oe.jsonID("replaceAround",Ne),ke.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),a=r.after(o+1),l=i,c=a,u=s.empty,f=0,d=o,p=!1;d>t;d--)p||n.index(d)>0?(p=!0,u=s.from(n.node(d).copy(u)),f++):l--;for(var m=s.empty,g=0,v=o,y=!1;v>t;v--)y||r.after(v+1)<r.end(v)?(y=!0,m=s.from(r.node(v).copy(m)),g++):c++;return this.step(new Ne(l,c,i,a,new h(u.append(m),f,g),u.size-f,!0))},ke.prototype.wrap=function(e,t){for(var n=s.empty,r=t.length-1;r>=0;r--)n=s.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new Ne(o,i,o,i,new h(n,0,0),t.length,!0))},ke.prototype.setBlockType=function(e,t,n,r){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(t),n)){o.clearIncompatible(o.mapping.slice(i).map(t,1),n);var a=o.mapping.slice(i),l=a.map(t,1),c=a.map(t+e.nodeSize,1);return o.step(new Ne(l,c,l+1,c-1,new h(s.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},ke.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Ne(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new h(s.from(i),0,0),1,!0))},ke.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=s.empty,i=s.empty,a=r.depth,l=r.depth-t,c=t-1;a>l;a--,c--){o=s.from(r.node(a).copy(o));var u=n&&n[c];i=s.from(u?u.type.create(u.attrs,i):r.node(a).copy(i))}return this.step(new Me(e,e,new h(o.append(i),t,t),!0))},ke.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Me(e-t,e+t,h.empty,!0);return this.step(n)};var je=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new h(Be(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return Ee.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new Fe(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Oe);Oe.jsonID("addMark",je);var Fe=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new h(Be(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return Ee.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new je(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Oe);function $e(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Oe.jsonID("removeMark",Fe),ke.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,l,c){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var f=Math.max(l,e),d=Math.min(l+r.nodeSize,t),h=n.addToSet(u),p=0;p<u.length;p++)u[p].isInSet(h)||(s&&s.to==f&&s.mark.eq(u[p])?s.to=d:o.push(s=new Fe(f,d,u[p])));a&&a.to==f?a.to=d:i.push(a=new je(f,d,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},ke.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof X)for(var l,c=r.marks;l=n.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var u=Math.min(s+r.nodeSize,t),f=0;f<a.length;f++){for(var d=a[f],h=void 0,p=0;p<o.length;p++){var m=o[p];m.step==i-1&&d.eq(o[p].style)&&(h=m)}h?(h.to=u,h.step=i):o.push({style:d,from:Math.max(s,e),to:u,step:i})}}})),o.forEach((function(e){return r.step(new Fe(e.from,e.to,e.style))})),this},ke.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,a=0;a<r.childCount;a++){var l=r.child(a),c=i+l.nodeSize,u=n.matchType(l.type,l.attrs);if(u){n=u;for(var f=0;f<l.marks.length;f++)t.allowsMarkType(l.marks[f].type)||this.step(new Fe(i,c,l.marks[f]))}else o.push(new Me(i,c,h.empty));i=c}if(!n.validEnd){var d=n.fillBefore(s.empty,!0);this.replace(i,i,new h(d,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},ke.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=h.empty);var r=function(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=h.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return $e(o,i,r)?new Me(t,n,r):new Ue(o,i,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this},ke.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new h(s.from(n),0,0))},ke.prototype.delete=function(e,t){return this.replace(e,t,h.empty)},ke.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Ue=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}this.placed=s.empty;for(var i=e.depth;i>0;i--)this.placed=s.from(e.node(i).copy(this.placed))},qe={depth:{configurable:!0}};function We(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(We(e.firstChild.content,t-1,n)))}function He(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(He(e.lastChild.content,t-1,n)))}function Ke(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Je(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Je(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(s.empty,!0)))),e.copy(r)}function Ye(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function Qe(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(Qe(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),l=a.fillBefore(e).append(e);e=l.append(a.matchFragment(l).fillBefore(s.empty,!0))}return e}function Ge(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}qe.depth.get=function(){return this.frontier.length-1},Ue.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var l=new h(i,s,a);return t>-1?new Ne(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Me(r.pos,o.pos,l):void 0},Ue.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=Ke(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],a=i.type,l=i.match,c=void 0,u=void 0;if(1==e&&(r?l.matchType(r.type)||(u=l.fillBefore(s.from(r),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:o,parent:n,inject:u};if(2==e&&r&&(c=l.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:o,parent:n,wrap:c};if(n&&l.matchType(n.type))break}},Ue.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Ke(t,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new h(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)},Ue.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Ke(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new h(We(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new h(We(t,n,1),n,r)},Ue.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var l=this.unplaced,c=r?r.content:l.content,u=l.openStart-t,f=0,d=[],p=this.frontier[n],m=p.match,g=p.type;if(o){for(var v=0;v<o.childCount;v++)d.push(o.child(v));m=m.matchFragment(o)}for(var y=c.size+t-(l.content.size-l.openEnd);f<c.childCount;){var b=c.child(f),w=m.matchType(b.type);if(!w)break;(++f>1||0==u||b.content.size)&&(m=w,d.push(Je(b.mark(g.allowedMarks(b.marks)),1==f?u:0,f==c.childCount?y:-1)))}var k=f==c.childCount;k||(y=-1),this.placed=He(this.placed,n,s.from(d)),this.frontier[n].match=m,k&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var S=0,x=c;S<y;S++){var C=x.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),x=C.content}this.unplaced=k?0==t?h.empty:new h(We(l.content,t-1,1),t-1,y<0?l.openEnd:t-1):new h(We(l.content,t,f),l.openStart,l.openEnd)},Ue.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Ye(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},Ue.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ye(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,u=Ye(e,a,l.type,c,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},Ue.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=He(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},Ue.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=He(this.placed,this.depth,s.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Ue.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(s.empty,!0);e.childCount&&(this.placed=He(this.placed,this.frontier.length,e))},Object.defineProperties(Ue.prototype,qe),ke.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if($e(r,o,n))return this.step(new Me(e,t,n));var i=Ge(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var c=r.node(a).type.spec;if(c.defining||c.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==l&&i.splice(1,0,-a)}for(var u=i.indexOf(s),f=[],d=n.openStart,p=n.content,m=0;;m++){var g=p.firstChild;if(f.push(g),m==n.openStart)break;p=g.content}d>0&&f[d-1].type.spec.defining&&r.node(u).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&r.node(u).type!=f[d-2].type&&(d-=2);for(var v=n.openStart;v>=0;v--){var y=(v+d+1)%(n.openStart+1),b=f[y];if(b)for(var w=0;w<i.length;w++){var k=i[(w+u)%i.length],S=!0;k<0&&(S=!1,k=-k);var x=r.node(k-1),C=r.index(k-1);if(x.canReplaceWith(C,C,b.type,b.marks))return this.replace(r.before(k),S?o.after(k):t,new h(Qe(n.content,0,n.openStart,y),y,n.openEnd))}}for(var O=this.steps.length,E=i.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>O));E--){var M=i[E];M<0||(e=r.before(M),t=o.after(M))}return this},ke.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new h(s.from(n),0,0))},ke.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=Ge(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};var Xe=Object.create(null),Ze=function(e,t,n){this.ranges=n||[new tt(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},et={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};et.anchor.get=function(){return this.$anchor.pos},et.head.get=function(){return this.$head.pos},et.from.get=function(){return this.$from.pos},et.to.get=function(){return this.$to.pos},et.$from.get=function(){return this.ranges[0].$from},et.$to.get=function(){return this.ranges[0].$to},et.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},Ze.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Ze.prototype.replace=function(e,t){void 0===t&&(t=h.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,u=l.$to,f=e.mapping.slice(i);e.replaceRange(f.map(c.pos),f.map(u.pos),a?h.empty:t),0==a&&ct(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},Ze.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,l=e.mapping.slice(n),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),ct(e,n,t.isInline?-1:1))}},Ze.findFrom=function(e,t,n){var r=e.parent.inlineContent?new nt(e):lt(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?lt(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):lt(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},Ze.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new st(e.node(0))},Ze.atStart=function(e){return lt(e,e,0,0,1)||new st(e)},Ze.atEnd=function(e){return lt(e,e,e.content.size,e.childCount,-1)||new st(e)},Ze.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Xe[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},Ze.jsonID=function(e,t){if(e in Xe)throw new RangeError("Duplicate use of selection JSON ID "+e);return Xe[e]=t,t.prototype.jsonID=e,t},Ze.prototype.getBookmark=function(){return nt.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Ze.prototype,et),Ze.prototype.visible=!0;var tt=function(e,t){this.$from=e,this.$to=t},nt=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=h.empty),e.prototype.replace.call(this,t,n),n==h.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new rt(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new t(n,r)},Object.defineProperties(t.prototype,n),t}(Ze);Ze.jsonID("text",nt);var rt=function(e,t){this.anchor=e,this.head=t};rt.prototype.map=function(e){return new rt(e.map(this.anchor),e.map(this.head))},rt.prototype.resolve=function(e){return nt.between(e.resolve(this.anchor),e.resolve(this.head))};var ot=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new h(s.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new it(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(Ze);ot.prototype.visible=!1,Ze.jsonID("node",ot);var it=function(e){this.anchor=e};it.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new rt(r,r):new it(r)},it.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&ot.isSelectable(n)?new ot(t):Ze.near(t)};var st=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=h.empty),n==h.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return at},t}(Ze);Ze.jsonID("all",st);var at={map:function(){return this},resolve:function(e){return new st(e)}};function lt(e,t,n,r,o,i){if(t.inlineContent)return nt.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&ot.isSelectable(a))return ot.create(e,n-(o<0?a.nodeSize:0))}else{var l=lt(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function ct(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];if(i instanceof Me||i instanceof Ne)e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(Ze.near(e.doc.resolve(o),n))}}var ut=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return f.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||f.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(Ze.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(ke);function ft(e,t){return t&&e?e.bind(t):e}var dt=function(e,t,n){this.name=e,this.init=ft(t.init,n),this.apply=ft(t.apply,n)},ht=[new dt("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new dt("selection",{init:function(e,t){return e.selection||Ze.atStart(t.doc)},apply:function(e){return e.selection}}),new dt("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new dt("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],pt=function(e,t){var n=this;this.schema=e,this.fields=ht.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new dt(e.key,e.spec.state,e))}))},mt=function(e){this.config=e},gt={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};gt.schema.get=function(){return this.config.schema},gt.plugins.get=function(){return this.config.plugins},mt.prototype.apply=function(e){return this.applyTransaction(e).state},mt.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},mt.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},mt.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new mt(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<vt.length;i++)vt[i](this,e,t);return t},gt.tr.get=function(){return new ut(this)},mt.create=function(e){for(var t=new pt(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new mt(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},mt.prototype.reconfigure=function(e){for(var t=new pt(this.schema,e.plugins),n=t.fields,r=new mt(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},mt.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},mt.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new pt(e.schema,e.plugins),o=new mt(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=D.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=Ze.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=a.fromJSON.call(s,e,t[i],o))}o[r.name]=r.init(e,o)}})),o},mt.addApplyListener=function(e){vt.push(e)},mt.removeApplyListener=function(e){var t=vt.indexOf(e);t>-1&&vt.splice(t,1)},Object.defineProperties(mt.prototype,gt);var vt=[];var yt=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:wt("plugin")};yt.prototype.getState=function(e){return e[this.key]};var bt=Object.create(null);function wt(e){return e in bt?e+"$"+ ++bt[e]:(bt[e]=0,e+"$")}var kt=function(e){void 0===e&&(e="key"),this.key=wt(e)};kt.prototype.get=function(e){return e.config.pluginsByKey[this.key]},kt.prototype.getState=function(e){return e[this.key]};var St=n(5),xt=n(13),Ct=n(11);n(16);const Ot=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;if(n!==e.length||n!==t.length)for(;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}};var Et=n(7);const Mt=new kt("y-sync");new kt("y-undo"),new kt("yjs-cursor");var Nt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var _t=/Edge\/(\d+)/.exec(navigator.userAgent),Dt=/MSIE \d/.test(navigator.userAgent),Tt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Nt.mac=/Mac/.test(navigator.platform);var At=Nt.ie=!!(Dt||Tt||_t);Nt.ie_version=Dt?document.documentMode||6:Tt?+Tt[1]:_t?+_t[1]:null,Nt.gecko=!At&&/gecko\/(\d+)/i.test(navigator.userAgent),Nt.gecko_version=Nt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Pt=!At&&/Chrome\/(\d+)/.exec(navigator.userAgent);Nt.chrome=!!Pt,Nt.chrome_version=Pt&&+Pt[1],Nt.safari=!At&&/Apple Computer/.test(navigator.vendor),Nt.ios=Nt.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Nt.android=/Android \d/.test(navigator.userAgent),Nt.webkit="webkitFontSmoothing"in document.documentElement.style,Nt.webkit_version=Nt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Rt=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},It=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},zt=null,Lt=function(e,t,n){var r=zt||(zt=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Vt=function(e,t,n,r){return n&&(jt(e,t,n,r,-1)||jt(e,t,n,r,1))},Bt=/^(img|br|input|textarea|hr)$/i;function jt(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:Ft(e))){var i=e.parentNode;if(1!=i.nodeType||$t(e)||Bt.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Rt(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?Ft(e):0}}}function Ft(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function $t(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Ut=function(e){var t=e.isCollapsed;return t&&Nt.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function qt(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Wt(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ht(e,t){return"number"==typeof e?e:e[t]}function Kt(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Jt(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=It(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,l=a?Wt(i):Kt(s),c=0,u=0;if(t.top<l.top+Ht(r,"top")?u=-(l.top-t.top+Ht(o,"top")):t.bottom>l.bottom-Ht(r,"bottom")&&(u=t.bottom-l.bottom+Ht(o,"bottom")),t.left<l.left+Ht(r,"left")?c=-(l.left-t.left+Ht(o,"left")):t.right>l.right-Ht(r,"right")&&(c=t.right-l.right+Ht(o,"right")),c||u)if(a)i.defaultView.scrollBy(c,u);else{var f=s.scrollLeft,d=s.scrollTop;u&&(s.scrollTop+=u),c&&(s.scrollLeft+=c);var h=s.scrollLeft-f,p=s.scrollTop-d;t={left:t.left-h,top:t.top-p,right:t.right-h,bottom:t.bottom-p}}if(a)break}}function Yt(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=It(e));return t}function Qt(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Gt=null;function Xt(e,t){for(var n,r,o=2e8,i=0,s=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=Lt(l).getClientRects()}for(var f=0;f<u.length;f++){var d=u[f];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);var h=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(h<o){n=l,o=h,r=h&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==l.nodeType&&h&&(i=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=tn(r,1);if(i.top!=i.bottom&&Zt(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:Xt(n,r)}function Zt(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function en(e,t){var n,r,o,i,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(o=(n=a).offsetNode,i=n.offset)}catch(e){}if(!o&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var c,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var f=e.dom.getBoundingClientRect();if(!Zt(t,f))return null;if(!(u=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=t.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var u=l[c];if(Zt(n,u))return e(a,n,u)}if((s=(s+1)%o)==i)break}return t}(e.dom,t,f)))return null}if(Nt.safari&&u.draggable&&(o=i=null),u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),o){if(Nt.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var d,h=o.childNodes[i];"IMG"==h.nodeName&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,o,i,t))}null==c&&(c=function(e,t,n){var r=Xt(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,u,t));var p=e.docView.nearestDesc(u,!0);return{pos:c,inside:p?p.posAtStart-p.border:-1}}function tn(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var nn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rn(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,s=Nt.webkit||Nt.gecko;if(3==o.nodeType){if(!s||!nn.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var a=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==o.nodeValue.length?(a--,c=1):n<0?a--:l++,on(tn(Lt(o,a,l),c),c<0)}var u=tn(Lt(o,i,i),n);if(Nt.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=tn(Lt(o,i-1,i-1),-1);if(f.top==u.top){var d=tn(Lt(o,i,i+1),-1);if(d.top!=u.top)return on(d,d.left<f.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==Ft(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return sn(h.getBoundingClientRect(),!1)}if(i<Ft(o)){var p=o.childNodes[i];if(1==p.nodeType)return sn(p.getBoundingClientRect(),!0)}return sn(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==Ft(o))){var m=o.childNodes[i-1],g=3==m.nodeType?Lt(m,Ft(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return on(tn(g,1),!1)}if(i<Ft(o)){var v=o.childNodes[i],y=3==v.nodeType?Lt(v,0,s?0:1):1==v.nodeType?v:null;if(y)return on(tn(y,-1),!0)}return on(tn(3==o.nodeType?Lt(o):o,-n),n>=0)}function on(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function sn(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function an(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var ln=/[\u0590-\u08ac]/;var cn=null,un=null,fn=!1;function dn(e,t,n){return cn==t&&un==n?fn:(cn=t,un=n,fn="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return an(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var i=rn(e,o.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=Lt(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return ln.test(r.parent.textContent)&&a.modify?an(e,t,(function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?i:s}(e,t,n))}var hn=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},pn={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};hn.prototype.matchesWidget=function(){return!1},hn.prototype.matchesMark=function(){return!1},hn.prototype.matchesNode=function(){return!1},hn.prototype.matchesHack=function(){return!1},pn.beforePosition.get=function(){return!1},hn.prototype.parseRule=function(){return null},hn.prototype.stopEvent=function(){return!1},pn.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},pn.border.get=function(){return 0},hn.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},hn.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},pn.posBefore.get=function(){return this.parent.posBeforeChild(this)},pn.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},pn.posAfter.get=function(){return this.posBefore+this.size},pn.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},hn.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>Rt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},hn.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},hn.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},hn.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},hn.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},hn.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!i||!i.size||i.border||t<0&&o)||i&&i.domAtom&&e<n+i.size)return{node:this.contentDOM,offset:i?Rt(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var s=n+i.size;if(!i.domAtom&&(t<0&&!i.border?s>=e:s>e)&&(s>e||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(e-n-i.border,t);n=s}},hn.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&e<=l){var c=i+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=i;for(var u=s;u>0;u--){var f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=Rt(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(var d=s+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=Rt(h.dom);break}t+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},hn.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},hn.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},hn.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}var u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),d=n.getSelection(),h=!1;if((Nt.gecko||Nt.safari)&&e==t){var p=u.node,m=u.offset;if(3==p.nodeType)(h=m&&"\n"==p.nodeValue[m-1])&&m==p.nodeValue.length&&p.nextSibling&&"BR"==p.nextSibling.nodeName&&(u=f={node:p.parentNode,offset:Rt(p)+1});else{var g=p.childNodes[m-1];h=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(r||h&&Nt.safari||!Vt(u.node,u.offset,d.anchorNode,d.anchorOffset)||!Vt(f.node,f.offset,d.focusNode,d.focusOffset)){var v=!1;if((d.extend||e==t)&&!h){d.collapse(u.node,u.offset);try{e!=t&&d.extend(f.node,f.offset),v=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!v){if(e>t){var y=u;u=f,f=y}var b=document.createRange();b.setEnd(f.node,f.offset),b.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(b)}}},hn.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},pn.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},hn.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},hn.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},pn.domAtom.get=function(){return!1},Object.defineProperties(hn.prototype,pn);var mn=[],gn=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,mn,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(hn),vn=function(e){function t(t,n,r,o){e.call(this,t,mn,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(hn),yn=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=de.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Rn(i,n,s,r)),e>0&&(i=Rn(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(hn),bn=function(e){function t(t,n,r,o,i,s,a,l,c){e.call(this,t,n.isLeaf?mn:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,i,s){var a,l,c=i.nodeViews[n.type.name],u=c&&c(n,i,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r,o),f=u&&u.dom,d=u&&u.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(f=(a=de.renderSpec(document,n.type.spec.toDOM(n))).dom,d=a.contentDOM);d||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var h=f;return f=_n(f,r,n),u?l=new xn(e,n,r,o,f,d,h,u,i,s+1):n.isText?new kn(e,n,r,o,f,h,i):new t(e,n,r,o,f,d,h,i,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?s.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Dn(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,i=r&&e.composing&&this.localCompositionNode(e,t),s=new An(this,i&&i.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],u=null,f=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],h=void 0;l<o.length&&o[l].to==i;)(h||(h=[d])).push(o[l++]);if(h){h.sort(Pn);for(var p=0;p<h.length;p++)n(h[p],f,!!u)}else n(d,f,!!u)}var m=void 0,g=void 0;if(u)g=-1,m=u,u=null;else{if(!(f<e.childCount))break;g=f,m=e.child(f++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from<=i&&o[l].to>i;)c.push(o[l++]);var y=i+m.nodeSize;if(m.isText){var b=y;l<o.length&&o[l].from<b&&(b=o[l].from);for(var w=0;w<c.length;w++)c[w].to<b&&(b=c[w].to);b<y&&(u=m.cut(b-i),m=m.cut(0,b-i),y=b,g=-1)}var k=c.length?m.isInline&&!m.isLeaf?c.filter((function(e){return!e.inline})):c.slice():mn;r(m,k,t.forChild(i,m),g),i=y}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?s.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?f.none:n.node.child(i).marks,r,e),s.placeWidget(t,e,o)}),(function(t,n,i,a){s.syncToMarks(t.marks,r,e),s.findNodeMatch(t,n,i,a)||s.updateNextNode(t,n,i,e,a)||s.addNode(t,n,i,e,o),o+=t.nodeSize})),s.syncToMarks(mn,r,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,n,r){for(var o=t.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],l=a.dom;if(l.parentNode==t){for(;l!=o;)o=Tn(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(l,o);if(a instanceof yn){var c=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),o=c?c.nextSibling:t.firstChild}}for(;o;)o=Tn(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),Nt.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(!(e.state.selection instanceof nt)||r<t||o>t+this.node.content.size)){var i=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=Ft(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var l=s.text;o<e.childCount;){var c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){var u=l.lastIndexOf(t,r-a);if(u>=0&&u+t.length+a>=n)return a+u}}}return-1}(this.node.content,a,r-t,o-t);return l<0?null:{node:s,pos:l,text:a}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new vn(this,i,n,o);e.compositionNodes.push(s),this.children=Rn(this.children,r,r+o.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!Dn(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Mn(this.dom,this.nodeDOM,En(this.outerDeco,this.node,t),En(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(hn);function wn(e,t,n,r,o){return _n(r,t,e),new bn(null,e,t,n,r,r,r,o,0)}var kn=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(bn),Sn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(hn),xn=function(e){function t(t,n,r,o,i,s,a,l,c,u){e.call(this,t,n,r,o,i,s,a,c,u),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(bn);function Cn(e){e&&(this.nodeName=e)}Cn.prototype=Object.create(null);var On=[new Cn];function En(e,t,n){if(0==e.length)return On;for(var r=n?On[0]:new Cn,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new Cn(s.nodeName)),s){var l=s[a];null!=l&&(n&&1==o.length&&o.push(r=new Cn(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+l:"style"==a?r.style=(r.style?r.style+";":"")+l:"nodeName"!=a&&(r[a]=l))}}return o}function Mn(e,t,n,r){if(n==On&&r==On)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(o),a=On[0]),o=l}Nn(o,a||On[0],s)}return o}function Nn(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):mn,s=n.class?n.class.split(" ").filter(Boolean):mn,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&e.classList.add(s[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function _n(e,t,n){return Mn(e,e,On,En(t,n,1!=e.nodeType))}function Dn(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Tn(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var An=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var n=e.childCount,r=t.length,o=new Map;n>0&&r>0;r--){var i=t[r-1],s=i.node;if(s){if(s!=e.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}(e.node.content,e.children)};function Pn(e,t){return e.type.side-t.type.side}function Rn(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=null),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function In(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var a,l,c=r.resolve(s);if(Ut(n)){for(a=c;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&ot.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(e,t,n){for(var r=0==t,o=t==Ft(e);r||o;){if(e==n)return!0;var i=Rt(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==Ft(e)}}(n.focusNode,n.focusOffset,o.dom))){var u=o.posBefore;l=new ot(s==u?c:r.resolve(u))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;a=r.resolve(f)}l||(l=qn(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1));return l}function zn(e){return e.editable?e.hasFocus():Wn(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ln(e,t){var n=e.state.selection;if($n(e,n),zn(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Rt(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&Nt.ie&&Nt.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r,o,i=n.anchor,s=n.head;!Vn||n instanceof nt||(n.$from.parent.inlineContent||(r=Bn(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Bn(e,n.to))),e.docView.setSelection(i,s,e.root,t),Vn&&(r&&Fn(r),o&&Fn(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){zn(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}An.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},An.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},An.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=yn.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},An.prototype.findNodeMatch=function(e,t,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(e,t,n)){i=s;break}}else for(var a=this.index,l=Math.min(o.length,a+1);a<l;a++){var c=o[a];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},An.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof bn){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&Dn(t,s.outerDeco)))&&s.update(e,t,n,r))return this.destroyBetween(this.index,i),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},An.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,bn.create(this.top,e,t,n,r,o)),this.changed=!0},An.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new gn(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},An.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof yn;)e=e.children[e.children.length-1];if(!e||!(e instanceof kn)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Sn(this.top,mn,t,null)),this.changed=!0}};var Vn=Nt.safari||Nt.chrome&&Nt.chrome_version<63;function Bn(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(Nt.safari&&i&&"false"==i.contentEditable)return jn(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return jn(i);if(s)return jn(s)}}function jn(e){return e.contentEditable="true",Nt.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Fn(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function $n(e,t){if(t instanceof ot){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Un(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Un(e)}function Un(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function qn(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||nt.between(t,n,r)}function Wn(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Hn(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ze.findFrom(s,t)}function Kn(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Jn(e,t,n){var r=e.state.selection;if(!(r instanceof nt)){if(r instanceof ot&&r.node.isInline)return Kn(e,new nt(t>0?r.$to:r.$from));var o=Hn(e.state,t);return!!o&&Kn(e,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=Hn(e.state,t);return!!(i&&i instanceof ot)&&Kn(e,i)}if(!(Nt.mac&&n.indexOf("m")>-1)){var s,a=r.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=e.docView.descAt(c))&&!s.contentDOM)&&(ot.isSelectable(l)?Kn(e,new ot(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!Nt.webkit&&Kn(e,new nt(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function Yn(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Qn(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Gn(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,s=!1;for(Nt.gecko&&1==n.nodeType&&r<Yn(n)&&Qn(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Qn(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(Zn(n))break;for(var l=n.previousSibling;l&&Qn(l);)o=n.parentNode,i=Rt(l),l=l.previousSibling;if(l)r=Yn(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}s?er(e,t,n,r):o&&er(e,t,o,i)}}function Xn(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=Yn(n);;)if(r<s){if(1!=n.nodeType)break;if(!Qn(n.childNodes[r]))break;o=n,i=++r}else{if(Zn(n))break;for(var a=n.nextSibling;a&&Qn(a);)o=a.parentNode,i=Rt(a)+1,a=a.nextSibling;if(a)r=0,s=Yn(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}o&&er(e,t,o,i)}}function Zn(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function er(e,t,n,r){if(Ut(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&Ln(e)}),50)}function tr(e,t,n){var r=e.state.selection;if(r instanceof nt&&!r.empty||n.indexOf("s")>-1)return!1;if(Nt.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Hn(e.state,t);if(s&&s instanceof ot)return Kn(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,l=r instanceof st?Ze.near(a,t):Ze.findFrom(a,t);return!!l&&Kn(e,l)}return!1}function nr(e,t){if(!(e.state.selection instanceof nt))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),e.dispatch(a),!0}return!1}function rr(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function or(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||Nt.mac&&72==n&&"c"==r?nr(e,-1)||Gn(e):46==n||Nt.mac&&68==n&&"c"==r?nr(e,1)||Xn(e):13==n||27==n||(37==n?Jn(e,-1,r)||Gn(e):39==n?Jn(e,1,r)||Xn(e):38==n?tr(e,-1,r)||Gn(e):40==n?function(e){if(Nt.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;rr(e,o,!0),setTimeout((function(){return rr(e,o,!1)}),20)}}}(e)||tr(e,1,r)||Xn(e):r==(Nt.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function ir(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Nt.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Nt.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function sr(e,t,n,r,o){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=In(e,i);if(a&&!e.state.selection.eq(a)){var l=e.state.tr.setSelection(a);"pointer"==i?l.setMeta("pointer",!0):"key"==i&&l.scrollIntoView(),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),u=c.sharedDepth(n);t=c.before(u+1),n=e.state.doc.resolve(n).after(u+1);var f=e.state.selection,d=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,c=e.root.getSelection(),u=null,f=c.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(u=[{node:f,offset:c.anchorOffset}],Ut(c)||u.push({node:c.focusNode,offset:c.focusOffset})),Nt.chrome&&8===e.lastKeyCode)for(var d=s;d>i;d--){var h=o.childNodes[d-1],p=h.pmViewDesc;if("BR"==h.nodeType&&!p){s=d;break}if(!p||p.size)break}var m=e.state.doc,g=e.someProp("domParser")||te.fromSchema(e.state.schema),v=m.resolve(a),y=null,b=g.parse(o,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!v.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:ir,context:v});if(u&&null!=u[0].pos){var w=u[0].pos,k=u[1]&&u[1].pos;null==k&&(k=w),y={anchor:w+a,head:k+a}}return{doc:b,sel:y,from:a,to:l}}(e,t,n);if(Nt.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var h=e.cursorWrapper.deco.type.toDOM.nextSibling,p=h&&h.nodeValue?h.nodeValue.length:1;d.sel={anchor:d.sel.anchor+p,head:d.sel.anchor+p}}var m,g,v=e.state.doc,y=v.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.lastKeyCode=null;var b=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));r-=a+c-i}if(a<i&&e.size<t.size){l=(i-=r<=i&&r>=a?i-r:0)+(l-a),a=i}else if(l<i){a=(i-=r<=i&&r>=l?i-r:0)+(a-l),l=i}return{start:i,endA:a,endB:l}}(y.content,d.doc.content,d.from,m,g);if(!b){if(!(r&&f instanceof nt&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((Nt.ios&&e.lastIOSEnter>Date.now()-225||Nt.android)&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,qt(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var w=ar(e,e.state.doc,d.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}b={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof nt&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),Nt.ie&&Nt.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>d.from&&" Â "==d.doc.textBetween(b.start-d.from-1,b.start-d.from+1)&&(b.start--,b.endA--,b.endB--);var k,S=d.doc.resolveNoCache(b.start-d.from),x=d.doc.resolveNoCache(b.endB-d.from),C=S.sameParent(x)&&S.parent.inlineContent;if((Nt.ios&&e.lastIOSEnter>Date.now()-225&&(!C||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!C&&S.pos<d.doc.content.size&&(k=Ze.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,qt(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||lr(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(lr(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||lr(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(v,b.start,b.endA,S,x)&&e.someProp("handleKeyDown",(function(t){return t(e,qt(8,"Backspace"))})))Nt.android&&Nt.chrome&&e.domObserver.suppressSelectionUpdates();else{Nt.chrome&&Nt.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),Nt.android&&!C&&S.start()!=x.start()&&0==x.parentOffset&&S.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==b.endA&&(b.endB-=2,x=d.doc.resolveNoCache(b.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,qt(13,"Enter"))}))}),20));var O,E,M,N,_=b.start,D=b.endA;if(C)if(S.pos==x.pos)Nt.ie&&Nt.ie_version<=11&&0==S.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Ln(e)}),20)),O=e.state.tr.delete(_,D),E=v.resolve(b.start).marksAcross(v.resolve(b.endA));else if(b.endA==b.endB&&(N=v.resolve(b.start))&&(M=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,l=i,c=a,u=0;u<a.length;u++)l=a[u].removeFromSet(l);for(var f=0;f<i.length;f++)c=i[f].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],h=0;h<t.childCount;h++)d.push(o(t.child(h)));if(s.from(d).eq(e))return{mark:r,type:n}}(S.parent.content.cut(S.parentOffset,x.parentOffset),N.parent.content.cut(N.parentOffset,b.endA-N.start()))))O=e.state.tr,"add"==M.type?O.addMark(_,D,M.mark):O.removeMark(_,D,M.mark);else if(S.parent.child(S.index()).isText&&S.index()==x.index()-(x.textOffset?0:1)){var T=S.parent.textBetween(S.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,_,D,T)})))return;O=e.state.tr.insertText(T,_,D)}if(O||(O=e.state.tr.replace(_,D,d.doc.slice(b.start-d.from,b.endB-d.from))),d.sel){var A=ar(e,O.doc,d.sel);A&&!(Nt.chrome&&Nt.android&&e.composing&&A.empty&&(b.from!=b.toB||e.lastAndroidDelete<Date.now()-100)&&(A.head==_||A.head==O.mapping.map(D)-1)||Nt.ie&&A.empty&&A.head==_)&&O.setSelection(A)}E&&O.ensureMarks(E),e.dispatch(O.scrollIntoView())}}}function ar(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:qn(e,t.resolve(n.anchor),t.resolve(n.head))}function lr(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function cr(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=e.someProp("clipboardSerializer")||de.fromSchema(e.state.schema),l=mr(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));for(var u,f=c.firstChild;f&&1==f.nodeType&&(u=hr[f.nodeName.toLowerCase()]);){for(var d=u.length-1;d>=0;d--){for(var h=l.createElement(u[d]);c.firstChild;)h.appendChild(c.firstChild);c.appendChild(h)}f=c.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:c,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function ur(e,t,n,r,o){var i,a,l=o.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||l||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,l||r)})),l)return new h(s.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var u=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));u?a=u:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=mr().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&hr[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""));if(r.innerHTML=e,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n);var f=i&&i.querySelector("[data-pm-slice]"),d=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||te.fromSchema(e.state.schema);a=p.parseSlice(i,{preserveWhitespace:!(!c&&!d),context:o})}return a=d?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,l=n.length-2;l>=0;l-=2){var c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;o=s.from(c.create(n[l+1],o)),i++,a++}return new h(o,i,a)}(function(e,t,n){t<e.openStart&&(e=new h(dr(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new h(dr(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+d[1],+d[2]),d[3]):h.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(s.from(fr(r,t,i+1))))}}(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(s.empty,!0);return t.copy(r.append(o))}(i[i.length-1],o.length));var a=fr(e,n);i.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),i)return{v:s.from(i)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function fr(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,s.from(e));return e}function dr(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,l=a.content;return o<r-1&&(l=dr(l,t,n,r,o+1,i)),o>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,e.childCount>1||i<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(s.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}var hr={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},pr=null;function mr(){return pr||(pr=document.implementation.createHTMLDocument("title"))}var gr={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},vr=Nt.ie&&Nt.ie_version<=11,yr=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};yr.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},yr.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var br=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);Nt.ie&&Nt.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new yr,vr&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};br.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},br.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},br.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,gr),vr&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},br.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}vr&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},br.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},br.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},br.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},br.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Wn(e)){var e;if(this.suppressingSelectionUpdates)return Ln(this.view);if(Nt.ie&&Nt.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Vt(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},br.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},br.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},br.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Wn(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(Nt.gecko&&s.length>1){var c=s.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var u=c[0],f=c[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(e){if(wr)return;wr=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Ln(this.view),this.currentSelection.set(t))}},br.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,i=e.nextSibling;if(Nt.ie&&Nt.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}var u=o&&o.parentNode==e.target?Rt(o)+1:0,f=n.localPosFromDOM(e.target,u,-1),d=i&&i.parentNode==e.target?Rt(i):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var wr=!1;var kr={},Sr={};function xr(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Cr(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Or(e,t)})}))}function Or(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Er(e){return{left:e.clientX,top:e.clientY}}function Mr(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Nr(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function _r(e,t,n,r,o){return Mr(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof ot&&(n=o.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(ot.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(Nr(e,ot.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&ot.isSelectable(r))&&(Nr(e,new ot(n),"pointer"),!0)}(e,n))}function Dr(e,t,n,r){return Mr(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function Tr(e,t,n,r){return Mr(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Nr(e,nt.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.inlineContent)Nr(e,nt.create(n,s+1,s+1+i.content.size),"pointer");else{if(!ot.isSelectable(i))continue;Nr(e,ot.create(n,s),"pointer")}return!0}}(e,n)}function Ar(e){return Br(e)}Sr.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Ir(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!Nt.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||or(e,t)?t.preventDefault():xr(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,qt(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Sr.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Sr.keypress=function(e,t){if(!(Ir(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||Nt.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof nt&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var Pr=Nt.mac?"metaKey":"ctrlKey";kr.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Ar(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[Pr]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(Er(t));i&&("singleClick"==o?e.mouseDown=new Rr(e,i,t,n):("doubleClick"==o?Dr:Tr)(e,i.pos,i.inside,t)?t.preventDefault():xr(e,"pointer"))};var Rr=function(e,t,n,r){var o,i,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[Pr],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var a=e.state.doc.resolve(t.pos);o=a.parent,i=a.depth?a.before():0}this.mightDrag=null;var l=r?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof ot&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Nt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xr(e,"pointer")};function Ir(e,t){return!!e.composing||!!(Nt.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Rr.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Rr.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Er(e))),this.allowDefault||!t?xr(this.view,"pointer"):_r(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||Nt.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Nt.chrome&&!(this.view.state.selection instanceof nt)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(Nr(this.view,Ze.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):xr(this.view,"pointer")}},Rr.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),xr(this.view,"pointer")},kr.touchdown=function(e){Ar(e),xr(e,"pointer")},kr.contextmenu=function(e){return Ar(e)};var zr=Nt.android?5e3:-1;function Lr(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Br(e)}),t))}function Vr(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Br(e,t){if(e.domObserver.forceFlush(),Vr(e),t||e.docView.dirty){var n=In(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Sr.compositionstart=Sr.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Br(e,!0),e.markCursor=null;else if(Br(e),Nt.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}e.composing=!0}Lr(e,zr)},Sr.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Lr(e,20))};var jr=Nt.ie&&Nt.ie_version<15||Nt.ios&&Nt.webkit_version<604;function Fr(e,t,n,r){var o=ur(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||h.empty)})))return!0;if(!o)return!1;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}kr.copy=Sr.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=jr?null:t.clipboardData,i=cr(e,n.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Sr.paste=function(e,t){var n=jr?null:t.clipboardData;n&&Fr(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Fr(e,r.value,null,t):Fr(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var $r=function(e,t){this.slice=e,this.move=t},Ur=Nt.mac?"altKey":"ctrlKey";for(var qr in kr.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(Er(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof ot?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(ot.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(ot.create(e.state.doc,i.posBefore)))}var s=e.state.selection.content(),a=cr(e,s),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(jr?"Text":"text/html",l.innerHTML),jr||t.dataTransfer.setData("text/plain",c),e.dragging=new $r(s,!t[Ur])}},kr.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Sr.dragover=Sr.dragenter=function(e,t){return t.preventDefault()},Sr.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(Er(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||ur(e,t.dataTransfer.getData(jr?"Text":"text/plain"),jr?null:t.dataTransfer.getData("text/html"),!1,o),s=n&&!t[Ur];if(e.someProp("handleDrop",(function(n){return n(e,t,i||h.empty,s)})))t.preventDefault();else if(i){t.preventDefault();var a=i?Ve(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var l=e.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,f=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),!l.doc.eq(f)){var d=l.doc.resolve(c);if(u&&ot.isSelectable(i.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ot(d));else{var p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,n,r){return p=r})),l.setSelection(qn(e,d,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},kr.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Ln(e)}),20))},kr.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},kr.beforeinput=function(e,t){if(Nt.chrome&&Nt.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,qt(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Sr)kr[qr]=Sr[qr];function Wr(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Hr=function(e,t){this.spec=t||Xr,this.side=this.spec.side||0,this.toDOM=e};Hr.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Yr(i-n,i-n,this)},Hr.prototype.valid=function(){return!0},Hr.prototype.eq=function(e){return this==e||e instanceof Hr&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Wr(this.spec,e.spec))};var Kr=function(e,t){this.spec=t||Xr,this.attrs=e};Kr.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Yr(o,i,this)},Kr.prototype.valid=function(e,t){return t.from<t.to},Kr.prototype.eq=function(e){return this==e||e instanceof Kr&&Wr(this.attrs,e.attrs)&&Wr(this.spec,e.spec)},Kr.is=function(e){return e.type instanceof Kr};var Jr=function(e,t){this.spec=t||Xr,this.attrs=e};Jr.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Yr(o.pos-n,i.pos-n,this)},Jr.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},Jr.prototype.eq=function(e){return this==e||e instanceof Jr&&Wr(this.attrs,e.attrs)&&Wr(this.spec,e.spec)};var Yr=function(e,t,n){this.from=e,this.to=t,this.type=n},Qr={spec:{configurable:!0},inline:{configurable:!0}};Yr.prototype.copy=function(e,t){return new Yr(e,t,this.type)},Yr.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Yr.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Yr.widget=function(e,t,n){return new Yr(e,e,new Hr(t,n))},Yr.inline=function(e,t,n,r){return new Yr(e,t,new Kr(n,r))},Yr.node=function(e,t,n,r){return new Yr(e,t,new Jr(n,r))},Qr.spec.get=function(){return this.type.spec},Qr.inline.get=function(){return this.type instanceof Kr},Object.defineProperties(Yr.prototype,Qr);var Gr=[],Xr={},Zr=function(e,t){this.local=e&&e.length?e:Gr,this.children=t&&t.length?t:Gr};Zr.create=function(e,t){return t.length?io(t,e,0,Xr):eo},Zr.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Zr.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,n,r+l,o)}},Zr.prototype.map=function(e,t,n){return this==eo||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Xr)},Zr.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){for(var a=e.slice(),l=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+i||(t>=a[s]+i?a[s+1]=-1:n>=o&&(c=r-n-(t-e))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var d=n.map(e[f]+i),h=d-o;if(h<0||h>=r.content.size){u=!0;continue}var p=n.map(e[f+1]+i,-1)-o,m=r.content.findIndex(h),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==h&&v+y.nodeSize==p){var b=a[f+2].mapInner(n,y,d+1,e[f]+i+1,s);b!=eo?(a[f]=h,a[f+1]=p,a[f+2]=b):(a[f+1]=-2,u=!0)}else u=!0}if(u){var w=io(function(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t||[],n,o,i,s),r,0,s);t=w.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var S=0,x=0;S<w.children.length;S+=3){for(var C=w.children[S];x<a.length&&a[x]<C;)x+=3;a.splice(x,0,w.children[S],w.children[S+1],w.children[S+2])}}return new Zr(t&&t.sort(so),a)}(this.children,i,e,t,n,r,o):i?new Zr(i.sort(so)):eo},Zr.prototype.add=function(e,t){return t.length?this==eo?Zr.create(e,t):this.addInner(e,t,0):this},Zr.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,s){var a,l=s+n;if(a=ro(t,e,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,l+1):r.splice(i,0,s,s+e.nodeSize,io(a,e,l+1,Xr)),i+=3}}));for(var s=no(i?oo(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Zr(s.length?this.local.concat(s).sort(so):this.local,r||this.children)},Zr.prototype.remove=function(e){return 0==e.length||this==eo?this:this.removeInner(e,0)},Zr.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<a&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=eo?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var f=0,d=void 0;f<e.length;f++)if(d=e[f])for(var h=0;h<r.length;h++)r[h].eq(d,t)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Zr(r,n):eo},Zr.prototype.forChild=function(e,t){if(this==eo)return this;if(t.isLeaf)return Zr.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof Kr){var c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var f=new Zr(r.sort(so));return n?new to([f,n]):f}return n||eo},Zr.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Zr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Zr.prototype.locals=function(e){return ao(this.localsInner(e))},Zr.prototype.localsInner=function(e){if(this==eo)return Gr;if(e.inlineContent||!this.local.some(Kr.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Kr||t.push(this.local[n]);return t};var eo=new Zr;Zr.empty=eo,Zr.removeOverlap=ao;var to=function(e){this.members=e};function no(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Yr(o.from+t,o.to+t,o.type))}return n}function ro(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function oo(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function io(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=ro(e,t,s+n);if(a){i=!0;var l=io(a,t,n+s+1,r);l!=eo&&o.push(s,s+t.nodeSize,l)}}));for(var s=no(i?oo(e):e,-n).sort(so),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Zr(s,o):eo}function so(e,t){return e.from-t.from||e.to-t.to}function ao(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),lo(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),lo(t,o+1,i.copy(r.to,i.to)))}}return t}function lo(e,t,n){for(;t<e.length&&so(n,e[t])>0;)t++;e.splice(t,0,n)}function co(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=eo&&t.push(r)})),e.cursorWrapper&&t.push(Zr.create(e.state.doc,[e.cursorWrapper.deco])),to.from(t)}to.prototype.forChild=function(e,t){if(t.isLeaf)return Zr.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=eo&&(o instanceof to?n=n.concat(o.members):n.push(o))}return to.from(n)},to.prototype.eq=function(e){if(!(e instanceof to)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},to.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?ao(n?t:t.sort(so)):Gr},to.from=function(e){switch(e.length){case 0:return eo;case 1:return e[0];default:return new to(e)}};var uo=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mo(this),this.markCursor=null,this.cursorWrapper=null,po(this),this.nodeViews=go(this),this.docView=wn(this.state.doc,ho(this),co(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new br(e,(function(t,n,r,o){return sr(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=kr[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Or(e,t)||!e.editable&&t.type in Sr||n(e,t)})};for(var n in kr)t(n);Nt.safari&&e.dom.addEventListener("input",(function(){return null})),Cr(e)}(this),this.pluginViews=[],this.updatePluginViews()},fo={props:{configurable:!0},root:{configurable:!0}};function ho(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Yr.node(0,e.state.doc.content.size,t)]}function po(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Yr.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function mo(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function go(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}fo.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},uo.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Cr(this),this._props=e,this.updateStateInner(e.state,!0)},uo.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},uo.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},uo.prototype.updateStateInner=function(e,t){var n=this,r=this.state,o=!1,i=!1;if(e.storedMarks&&this.composing&&(Vr(this),i=!0),this.state=e,t){var s=go(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0),Cr(this)}this.editable=mo(this),po(this);var a=co(this),l=ho(this),c=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(i=!0);var f,d,h,p,m,g,v,y,b,w,k,S="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=o-20){t=a,n=l.top;break}}}return{refDOM:t,refTop:n,stack:Yt(e.dom)}}(this);if(i){this.domObserver.stop();var x=u&&(Nt.ie||Nt.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(p=r.selection,m=e.selection,g=Math.min(p.$anchor.sharedDepth(p.head),m.$anchor.sharedDepth(m.head)),p.$anchor.start(g)!=m.$anchor.start(g));if(u){var C=Nt.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=wn(e.doc,l,a,this.dom,this)),C&&!this.trackWrites&&(x=!0)}x||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(f=this,d=f.docView.domFromPos(f.state.selection.anchor,0),h=f.root.getSelection(),Vt(d.node,d.offset,h.anchorNode,h.anchorOffset)))?Ln(this,x):($n(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var O=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof ot?Jt(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),O):Jt(this,this.coordsAtPos(e.selection.head,1),O))}else S&&(y=(v=S).refDOM,b=v.refTop,w=v.stack,k=y?y.getBoundingClientRect().top:0,Qt(w,0==k?0:k-b))},uo.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},uo.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},uo.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},uo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},uo.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Gt)return e.focus(Gt);var t=Yt(e);e.focus(null==Gt?{get preventScroll(){return Gt={preventScroll:!0},!0}}:void 0),Gt||(Gt=!1,Qt(t,0))}(this.dom),Ln(this),this.domObserver.start()},fo.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},uo.prototype.posAtCoords=function(e){return en(this,e)},uo.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),rn(this,e,t)},uo.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},uo.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},uo.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},uo.prototype.endOfTextblock=function(e,t){return dn(this,t||this.state,e)},uo.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],co(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},uo.prototype.dispatchEvent=function(e){return function(e,t){Or(e,t)||!kr[t.type]||!e.editable&&t.type in Sr||kr[t.type](e,t)}(this,e)},uo.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(uo.prototype,fo);n(6),n(14);const vo=(e,t,n)=>{if(0===e)return r.n(t,0);let o=null===t._first?null:t._first.content.type;for(;null!==o&&t!==o;){if(o.constructor===r.i){if(o._length>=e)return r.n(o,e);if(e-=o._length,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{do{o=null===o._item?null:o._item.parent,e--}while(o!==t&&null!==o&&null!==o._item&&null===o._item.next);null!==o&&o!==t&&(o=null===o._item?null:o._item.next.content.type)}}else{const i=(n.get(o)||{nodeSize:0}).nodeSize;if(null!==o._first&&e<i)o=o._first.content.type,e--;else{if(1===e&&0===o._length&&i>1)return new r.e(null===o._item?null:o._item.id,null===o._item?r.p(o):null,null);if(e-=i,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{if(0===e)return o=null===o._item?o:o._item.parent,new r.e(null===o._item?null:o._item.id,null===o._item?r.p(o):null,null);do{o=o._item.parent,e--}while(o!==t&&null===o._item.next);o!==t&&(o=o._item.next.content.type)}}}if(null===o)throw Et.c();if(0===e&&o.constructor!==r.i&&o!==t)return yo(o._item.parent,o._item)}return r.n(t,t._length)},yo=(e,t)=>{let n=null,o=null;return null===e._item?o=r.p(e):n=r.m(e._item.id.client,e._item.id.clock),new r.e(n,o,t.id)},bo=(e,t,n,o)=>{const i=r.k(n,e);if(null===i||i.type!==t&&!r.r(t,i.type._item))return null;let s=i.type,a=0;if(s.constructor===r.i)a=i.index;else if(null===s._item||!s._item.deleted){let e=s._first,t=0;for(;t<s._length&&t<i.index&&null!==e;){if(!e.deleted){const n=e.content.type;t++,n.constructor===r.i?a+=n._length:a+=o.get(n).nodeSize}e=e.right}a+=1}for(;s!==t&&null!==s._item;){const e=s._item.parent;if(null===e._item||!e._item.deleted){a+=1;let t=e._first;for(;null!==t;){const e=t.content.type;if(e===s)break;t.deleted||(e.constructor===r.i?a+=e._length:a+=o.get(e).nodeSize),t=t.right}}s=e}return a-1};var wo=n(18),ko=n(12),So=n(9);const xo=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!r.q(t.ds,e.id),Co=[{light:"#ecd44433",dark:"#ecd444"}],Oo=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=Ct.a();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,wo.a(t))}return e.get(n)},Eo=(e,{colors:t=Co,colorMapping:n=new Map,permanentUserData:r=null}={})=>{let o=!1;const i=new yt({props:{editable:e=>{const t=Mt.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:Mt,state:{init:(o,i)=>({type:e,doc:e.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:t,colorMapping:n,permanentUserData:r}),apply:(e,t)=>{const n=e.getMeta(Mt);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==t.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||setTimeout(()=>{null==n.restore?t.binding._renderSnapshot(n.snapshot,n.prevSnapshot,t):(t.binding._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,t.binding._prosemirrorChanged(t.binding.prosemirrorView.state.doc))},0)),t}},view:t=>{const n=new No(e,t);return setTimeout(()=>{n._forceRerender(),t.dispatch(t.state.tr.setMeta(Mt,{binding:n}))},0),{update:()=>{const e=i.getState(t.state);null==e.snapshot&&null==e.prevSnapshot&&(o||null!==t.state.doc.content.findDiffStart(t.state.doc.type.createAndFill().content))&&(o=!0,n._prosemirrorChanged(t.state.doc))},destroy:()=>{n.destroy()}}}});return i},Mo=(e,t)=>({anchor:vo(t.selection.anchor,e.type,e.mapping),head:vo(t.selection.head,e.type,e.mapping)});class No{constructor(e,t){this.type=e,this.prosemirrorView=t,this.mux=(()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}})(),this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=Mo(this,t.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),e.observeDeep(this._observeFunction),this._domSelectionInView=null}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(ko.b&&null===this._domSelectionInView&&(setTimeout(()=>{this._domSelectionInView=null},0),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const n=t.getBoundingClientRect(),r=So.c.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}renderSnapshot(e,t){t||(t=r.o(r.l(),new Map)),this.prosemirrorView.dispatch(this.prosemirrorView.state.tr.setMeta(Mt,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const e=this.type.toArray().map(e=>Do(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new h(new s(e),0,0));t.setMeta(Mt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const e=this.type.toArray().map(e=>Do(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new h(new s(e),0,0));this.prosemirrorView.dispatch(t)})}_renderSnapshot(e,t,n){e||(e=r.t(this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(o=>{const i=n.permanentUserData;i&&i.dss.forEach(e=>{r.s(o,e,e=>{})});const a=(e,t)=>{const r="added"===e?i.getUserByClientId(t.client):i.getUserByDeletedId(t);return{user:r,type:e,color:Oo(n.colorMapping,n.colors,r)}},l=r.u(this.type,new r.f(t.ds,e.sv)).map(n=>!n._item.deleted||xo(n._item,e)||xo(n._item,t)?Do(n,this.prosemirrorView.state.schema,new Map,e,t,a):null).filter(e=>null!==e),c=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new h(new s(l),0,0));this.prosemirrorView.dispatch(c)},Mt)})}_typeChanged(e,t){const n=Mt.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const e=(e,t)=>this.mapping.delete(t);r.s(t,t.deleteSet,e=>e.constructor===r.d&&this.mapping.delete(e.content.type)),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map(e=>_o(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e);let o=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new h(new s(n),0,0));((e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const r=bo(n.doc,n.type,t.anchor,n.mapping),o=bo(n.doc,n.type,t.head,n.mapping);null!==r&&null!==o&&(e=e.setSelection(nt.create(e.doc,r,o)))}})(o,this.beforeTransactionSelection,this),o=o.setMeta(Mt,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.mux(()=>{this.doc.transact(()=>{Fo(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=Mo(this,this.prosemirrorView.state)},Mt)})}destroy(){this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const _o=(e,t,n,o,i,s)=>{const a=n.get(e);if(void 0===a){if(e instanceof r.g)return Do(e,t,n,o,i,s);throw Et.b()}return a},Do=(e,t,n,o,i,s)=>{const a=[],l=e=>{if(e.constructor===r.g){const r=_o(e,t,n,o,i,s);null!==r&&a.push(r)}else{const r=To(e,t,n,o,i,s);null!==r&&r.forEach(e=>{null!==e&&a.push(e)})}};void 0===o||void 0===i?e.toArray().forEach(l):r.u(e,new r.f(i.ds,o.sv)).forEach(l);try{const r=e.getAttributes(o);void 0!==o&&(xo(e._item,o)?xo(e._item,i)||(r.ychange=s?s("added",e._item.id):{type:"added"}):r.ychange=s?s("removed",e._item.id):{type:"removed"});const l=t.node(e.nodeName,r,a);return n.set(e,l),l}catch(t){return e.doc.transact(t=>{e._item.delete(t)},Mt),n.delete(e),null}},To=(e,t,n,r,o,i)=>{const s=[],a=e.toDelta(r,o,i);try{for(let e=0;e<a.length;e++){const n=a[e],r=[];for(const e in n.attributes)r.push(t.mark(e,n.attributes[e]));s.push(t.text(n.insert,r))}}catch(t){return e.doc.transact(t=>{e._item.delete(t)},Mt),null}return s},Ao=(e,t)=>e instanceof Array?((e,t)=>{const n=new r.i,o=e.map(e=>({insert:e.text,attributes:jo(e.marks)}));return n.applyDelta(o),t.set(n,e),n})(e,t):((e,t)=>{const n=new r.g(e.type.name);for(const t in e.attrs){const r=e.attrs[t];null!==r&&"ychange"!==t&&n.setAttribute(t,r)}return n.insert(0,Ro(e).map(e=>Ao(e,t))),t.set(n,e),n})(e,t),Po=(e,t)=>{const n=Object.keys(e).filter(t=>null!==e[t]);let r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let o=0;o<n.length&&r;o++){const i=n[o],s=e[i],a=t[i];r="ychange"===i||s===a||"object"==typeof s&&"object"==typeof a&&Po(s,a)}return r},Ro=e=>{const t=e.content.content,n=[];for(let e=0;e<t.length;e++){const r=t[e];if(r.isText){const r=[];for(let n=t[e];e<t.length&&n.isText;n=t[++e])r.push(n);e--,n.push(r)}else n.push(r)}return n},Io=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&xt.c(e.attributes||{}).length===t[n].marks.length&&t[n].marks.every(t=>Po(e.attributes[t.type.name]||{},t.attrs)))},zo=(e,t)=>{if(e instanceof r.g&&!(t instanceof Array)&&$o(e,t)){const n=Ro(t);return e._length===n.length&&Po(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>zo(e,n[t]))}return e instanceof r.i&&t instanceof Array&&Io(e,t)},Lo=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),Vo=(e,t,n)=>{const r=e.toArray(),o=Ro(t),i=o.length,s=r.length,a=St.g(s,i);let l=0,c=0,u=!1;for(;l<a;l++){const e=r[l],t=o[l];if(Lo(n.get(e),t))u=!0;else if(!zo(e,t))break}for(;l+c<a;c++){const e=r[s-c-1],t=o[i-c-1];if(Lo(n.get(e),t))u=!0;else if(!zo(e,t))break}return{equalityFactor:l+c,foundMappedChild:u}},Bo=(e,t,n)=>{n.set(e,t);const{nAttrs:o,str:i}=(e=>{let t="",n=e._start;const o={};for(;null!==n;)n.deleted||(n.countable&&n.content instanceof r.b?t+=n.content.str:n.content instanceof r.a&&(o[n.content.key]=null)),n=n.right;return{str:t,nAttrs:o}})(e),s=t.map(e=>({insert:e.text,attributes:Object.assign({},o,jo(e.marks))})),{insert:a,remove:l,index:c}=Ot(i,s.map(e=>e.insert).join(""));e.delete(c,l),e.insert(c,a),e.applyDelta(s.map(e=>({retain:e.insert.length,attributes:e.attributes})))},jo=e=>{const t={};return e.forEach(e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)}),t},Fo=(e,t,n,o)=>{if(t instanceof r.g&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(o.set(t,n),t instanceof r.g){const e=t.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?e[n]!==r[n]&&"ychange"!==n&&t.setAttribute(n,r[n]):t.removeAttribute(n);for(const n in e)void 0===r[n]&&t.removeAttribute(n)}const i=Ro(n),s=i.length,a=t.toArray(),l=a.length,c=St.g(s,l);let u=0,f=0;for(;u<c;u++){const e=a[u],t=i[u];if(!Lo(o.get(e),t)){if(!zo(e,t))break;o.set(e,t)}}for(;f+u+1<c;f++){const e=a[l-f-1],t=i[s-f-1];if(!Lo(o.get(e),t)){if(!zo(e,t))break;o.set(e,t)}}e.transact(()=>{for(;l-u-f>0&&s-u-f>0;){const n=a[u],c=i[u],d=a[l-f-1],h=i[s-f-1];if(n instanceof r.i&&c instanceof Array)Io(n,c)||Bo(n,c,o),u+=1;else{let i=n instanceof r.g&&$o(n,c),s=d instanceof r.g&&$o(d,h);if(i&&s){const e=Vo(n,c,o),t=Vo(d,h,o);e.foundMappedChild&&!t.foundMappedChild?s=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?i=!1:s=!1}i?(Fo(e,n,c,o),u+=1):s?(Fo(e,d,h,o),f+=1):(t.delete(u,1),t.insert(u,[Ao(c,o)]),u+=1)}}const n=l-u-f;if(n>0&&t.delete(u,n),u+f<s){const e=[];for(let t=u;t<s-f;t++)e.push(Ao(i[t],o));t.insert(u,e)}},Mt)},$o=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;for(var Uo=["ol",0],qo=["ul",0],Wo=["li",0],Ho=["br"],Ko=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=Object.assign({},t),null!==e.ychange&&(t.ychange_user=e.ychange.user,t.ychange_state=e.ychange.state),t},Jo=["em",0],Yo=["strong",0],Qo=new Z({nodes:{doc:{content:"block+"},paragraph:{attrs:{ychange:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(e){return["p",Ko(e.attrs),0]}},heading:{attrs:{level:{default:2},ychange:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h2",attrs:{level:2}}],toDOM:function(e){return["h"+e.attrs.level,Ko(e.attrs),0]}},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return Ho}},ordered_list:{group:"block",content:"list_item+",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?Uo:["ol",{start:e.attrs.order},0]}},bullet_list:{group:"block",content:"list_item+",parseDOM:[{tag:"ul"}],toDOM:function(){return qo}},list_item:{content:"paragraph (paragraph | bullet_list | ordered_list | checklist)*",parseDOM:[{tag:"li"}],toDOM:function(){return Wo},defining:!0},checklist:{group:"block",content:"checklist_item+",toDOM:function(){return["ul",{"data-type":"checklist"},0]},parseDOM:[{priority:51,tag:'[data-type="checklist"]'}]},checklist_item:{attrs:{checked:{default:!1}},content:"paragraph (paragraph | bullet_list | ordered_list | checklist)*",defining:!0,toDOM:function(e){return["li",{"data-type":"checklist_item","data-checked":e.attrs.checked.toString()},["span",{class:"checklist-checkbox-wrapper on-click-check",contenteditable:"false"},["span",{class:"checklist-checkbox on-click-check"},["span",{class:"check on-click-check"},["span",{class:"check-stem on-click-check"}],["span",{class:"check-kick on-click-check"}]]]],["div",{class:"checklist-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="checklist_item"]',getAttrs:function(e){return{checked:"true"===e.getAttribute("data-checked")}}}]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return Jo}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return Yo}},ychange:{attrs:{user:{default:null},state:{default:null}},inclusive:!1,parseDOM:[{tag:"ychange"}],toDOM:function(e){return["ychange",{ychange_user:e.attrs.user,ychange_state:e.attrs.state},0]}}}}),Go=new Z({nodes:Qo.spec.nodes,marks:Qo.spec.marks}),Xo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Zo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},ei="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ti="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),ni="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),ri="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),oi="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ii=ei&&(ri||+ei[1]<57)||ni&&ri,si=0;si<10;si++)Xo[48+si]=Xo[96+si]=String(si);for(si=1;si<=24;si++)Xo[si+111]="F"+si;for(si=65;si<=90;si++)Xo[si]=String.fromCharCode(si+32),Zo[si]=String.fromCharCode(si);for(var ai in Xo)Zo.hasOwnProperty(ai)||(Zo[ai]=Xo[ai]);var li="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function ci(e){var t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var l=i[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);li?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function ui(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function fi(e){return new yt({props:{handleKeyDown:di(e)}})}function di(e){var t=function(e){var t=Object.create(null);for(var n in e)t[ci(n)]=e[n];return t}(e);return function(e,n){var r,o=function(e){var t=!(ii&&(e.ctrlKey||e.altKey||e.metaKey)||(ti||oi)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Zo:Xo)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=1==o.length&&" "!=o,s=t[ui(o,n,!i)];if(s&&s(e.state,e.dispatch,e))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Xo[n.keyCode])&&r!=o){var a=t[ui(r,n,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(i&&n.shiftKey){var l=t[ui(o,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}var hi=function(){};hi.prototype.append=function(e){return e.length?(e=hi.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},hi.prototype.prepend=function(e){return e.length?hi.from(e).append(this):this},hi.prototype.appendInner=function(e){return new mi(this,e)},hi.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?hi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},hi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},hi.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},hi.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},hi.from=function(e){return e instanceof hi?e:e&&e.length?new pi(e):hi.empty};var pi=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(hi);hi.empty=new pi([]);var mi=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(hi),gi=hi,vi=function(e,t){this.items=e,this.eventCount=t};vi.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,l=e.tr,c=[],u=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void u.push(e);if(r){u.push(new yi(e.map));var f,d=e.step.map(r.slice(o));d&&l.maybeStep(d).doc&&(f=l.mapping.maps[l.mapping.maps.length-1],c.push(new yi(f,null,null,c.length+u.length))),o--,f&&r.appendMap(f,o)}else l.maybeStep(e.step);return e.selection?(s=r?e.selection.map(r.slice(o)):e.selection,a=new vi(n.items.slice(0,i).append(u.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},vi.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,l=0;l<e.steps.length;l++){var c,u=e.steps[l].invert(e.docs[l]),f=new yi(e.mapping.maps[l],u,t);(c=a&&a.merge(f))&&(f=c,l?o.pop():s=s.slice(0,s.length-1)),o.push(f),t&&(i++,t=null),r||(a=f)}var d,h,p,m=i-n.depth;return m>wi&&(h=m,(d=s).forEach((function(e,t){if(e.selection&&0==h--)return p=t,!1})),s=d.slice(p),i-=m),new vi(s.append(o),i)},vi.prototype.remapping=function(e,t){var n=new be;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)}),e,t),n},vi.prototype.addMaps=function(e){return 0==this.eventCount?this:new vi(this.items.append(e.map((function(e){return new yi(e)}))),this.eventCount)},vi.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),r);var a=t;this.items.forEach((function(t){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var l=o.maps[r];if(t.step){var c=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(a+1,r));u&&s++,n.push(new yi(l,c,u))}else n.push(new yi(l))}}),r);for(var l=[],c=t;c<i;c++)l.push(new yi(o.maps[c]));var u=this.items.slice(0,r).append(l).append(n),f=new vi(u,s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-n.length)),f},vi.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},vi.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=e)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(t.slice(n)),l=a&&a.getMap();if(n--,l&&t.appendMap(l,n),a){var c=i.selection&&i.selection.map(t.slice(n));c&&o++;var u,f=new yi(l.invert(),a,c),d=r.length-1;(u=r.length&&r[d].merge(f))?r[d]=u:r.push(f)}}else i.map&&n--}),this.items.length,0),new vi(gi.from(r.reverse()),o)},vi.empty=new vi(gi.empty,0);var yi=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};yi.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new yi(t.getMap().invert(),t,this.selection)}};var bi=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},wi=20;function ki(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function Si(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function xi(e,t,n,r){var o=Ei(t),i=Mi.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),c=new bi(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(Mi,{redo:r,historyState:c}).scrollIntoView())}}var Ci=!1,Oi=null;function Ei(e){var t=e.plugins;if(Oi!=t){Ci=!1,Oi=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ci=!0;break}}return Ci}var Mi=new kt("history"),Ni=new kt("closeHistory");function _i(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new yt({key:Mi,state:{init:function(){return new bi(vi.empty,vi.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(Mi);if(i)return i.historyState;n.getMeta(Ni)&&(e=new bi(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Mi))return s.getMeta(Mi).redo?new bi(e.done.addTransform(n,null,r,Ei(t)),e.undone,ki(n.mapping.maps[n.steps.length-1]),e.prevTime):new bi(e.done,e.undone.addTransform(n,null,r,Ei(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new bi(e.done.rebased(n,o),e.undone.rebased(n,o),Si(e.prevRanges,n.mapping),e.prevTime):new bi(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Si(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),l=s?Si(e.prevRanges,n.mapping):ki(n.mapping.maps[n.steps.length-1]);return new bi(e.done.addTransform(n,a?t.selection.getBookmark():null,r,Ei(t)),vi.empty,l,n.time)}(n,r,t,e)}},config:e})}function Di(e,t){var n=Mi.getState(e);return!(!n||0==n.done.eventCount)&&(t&&xi(n,e,t,!1),!0)}function Ti(e,t){var n=Mi.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&xi(n,e,t,!0),!0)}function Ai(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Pi(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function Ri(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ii(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function zi(e,t){var n,r=e.selection,o=r instanceof ot;if(o){if(r.node.isTextblock||!Ie(e.doc,r.from))return!1;n=r.from}else if(null==(n=Le(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(ot.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}function Li(e,t){var n,r=e.selection;if(r instanceof ot){if(r.node.isTextblock||!Ie(e.doc,r.to))return!1;n=r.to}else if(null==(n=Le(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0}function Vi(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),s=i&&Te(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function Bi(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ji(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=Bi(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,a))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Ze.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Fi(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof ot&&e.selection.node.isBlock)return!(!r.parentOffset||!Re(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;(e.selection instanceof nt||e.selection instanceof st)&&a.deleteSelection();var l=0==r.depth?null:Bi(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&l?[{type:l}]:null,u=Re(a.doc,a.mapping.map(r.pos),1,c);c||u||!Re(a.doc,a.mapping.map(r.pos),1,l&&[{type:l}])||(c=[{type:l}],u=!0),u&&(a.split(a.mapping.map(r.pos),1,c),i||r.parentOffset||r.parent.type==l||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),s.from([l.create(),r.parent]))||a.setNodeMarkup(a.mapping.map(r.before()),l)),t(a.scrollIntoView())}return!0}function $i(e,t){var n,r=e.selection,o=r.$from,i=r.to,s=o.sharedDepth(i);return 0!=s&&(n=o.before(s),t&&t(e.tr.setSelection(ot.create(e.doc,n))),!0)}function Ui(e,t,n){var r,o,i=t.nodeBefore,a=t.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Ie(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;var l=t.parent.canReplace(t.index(),t.index()+1);if(l&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var c=t.pos+a.nodeSize,u=s.empty,f=r.length-1;f>=0;f--)u=s.from(r[f].create(null,u));u=s.from(i.copy(u));var d=e.tr.step(new Ne(t.pos-1,c,t.pos,c,new h(u,1,0),r.length,!0)),p=c+2*r.length;Ie(d.doc,p)&&d.join(p),n(d.scrollIntoView())}return!0}var m=Ze.findFrom(t,1),g=m&&m.$from.blockRange(m.$to),v=g&&Te(g);if(null!=v&&v>=t.depth)return n&&n(e.tr.lift(g,v).scrollIntoView()),!0;if(l&&a.isTextblock&&Pi(i,"end")){for(var y=i,b=[];b.push(y),!y.isTextblock;)y=y.lastChild;if(y.canReplace(y.childCount,y.childCount,a.content)){if(n){for(var w=s.empty,k=b.length-1;k>=0;k--)w=s.from(b[k].copy(w));n(e.tr.step(new Ne(t.pos-b.length,t.pos+a.nodeSize,t.pos+1,t.pos+a.nodeSize-1,new h(w,b.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function qi(e,t){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),l=a&&Ae(a,e,t);return!!l&&(r&&r(n.tr.wrap(a,l).scrollIntoView()),!0)}}function Wi(e,t){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}}function Hi(e,t){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,e))return!1;if(r)if(s)e.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=n.tr,u=0;!l&&u<a.length;u++){var f=a[u],d=f.$from,h=f.$to;l=n.doc.rangeHasMark(d.pos,h.pos,e)}for(var p=0;p<a.length;p++){var m=a[p],g=m.$from,v=m.$to;if(l)c.removeMark(g.pos,v.pos,e);else{var y=g.pos,b=v.pos,w=g.nodeAfter,k=v.nodeBefore,S=w&&w.isText?/^\s*/.exec(w.text)[0].length:0,x=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;y+S<b&&(y+=S,b-=x),c.addMark(y,b,e.create(t))}}r(c.scrollIntoView())}return!0}}function Ki(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var Ji=Ki(Ai,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var o=Ri(r);if(!o){var i=r.blockRange(),s=i&&Te(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&Ui(e,o,t))return!0;if(0==r.parent.content.size&&(Pi(a,"end")||ot.isSelectable(a))){if(t){var l=e.tr.deleteRange(r.before(),r.after());l.setSelection(Pi(a,"end")?Ze.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):ot.create(l.doc,o.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}return!(!a.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Ri(o)}var s=i&&i.nodeBefore;return!(!s||!ot.isSelectable(s))&&(t&&t(e.tr.setSelection(ot.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),Yi=Ki(Ai,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=Ii(r);if(!o)return!1;var i=o.nodeAfter;if(Ui(e,o,t))return!0;if(0==r.parent.content.size&&(Pi(i,"start")||ot.isSelectable(i))){if(t){var s=e.tr.deleteRange(r.before(),r.after());s.setSelection(Pi(i,"start")?Ze.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):ot.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Ii(o)}var s=i&&i.nodeAfter;return!(!s||!ot.isSelectable(s))&&(t&&t(e.tr.setSelection(ot.create(e.doc,i.pos)).scrollIntoView()),!0)})),Qi={Enter:Ki((function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof st||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Bi(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(nt.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Re(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Te(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}),Fi),"Mod-Enter":ji,Backspace:Ji,"Mod-Backspace":Ji,Delete:Yi,"Mod-Delete":Yi,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new st(e.doc))),!0}},Gi={"Ctrl-h":Qi.Backspace,"Alt-Backspace":Qi["Mod-Backspace"],"Ctrl-d":Qi.Delete,"Ctrl-Alt-Backspace":Qi["Mod-Delete"],"Alt-Delete":Qi["Mod-Delete"],"Alt-d":Qi["Mod-Delete"]};for(var Xi in Qi)Gi[Xi]=Qi[Xi];var Zi=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?Gi:Qi;function es(e){return void 0===e&&(e={}),new yt({view:function(t){return new ts(t,e)}})}var ts=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};ts.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},ts.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},ts.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},ts.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{var u=c.getBoundingClientRect();a=u.left-c.scrollLeft,l=u.top-c.scrollTop}this.element.style.left=e.left-a+"px",this.element.style.top=e.top-l+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},ts.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},ts.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Ve(this.editorView.state.doc,n,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},ts.prototype.dragend=function(){this.scheduleRemoval(20)},ts.prototype.drop=function(){this.scheduleRemoval(20)},ts.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};var ns={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var rs=/Edge\/(\d+)/.exec(navigator.userAgent),is=/MSIE \d/.test(navigator.userAgent),ss=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ns.mac=/Mac/.test(navigator.platform);var as=ns.ie=!!(is||ss||rs);ns.ie_version=is?document.documentMode||6:ss?+ss[1]:rs?+rs[1]:null,ns.gecko=!as&&/gecko\/(\d+)/i.test(navigator.userAgent),ns.gecko_version=ns.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var ls=!as&&/Chrome\/(\d+)/.exec(navigator.userAgent);ns.chrome=!!ls,ns.chrome_version=ls&&+ls[1],ns.safari=!as&&/Apple Computer/.test(navigator.vendor),ns.ios=ns.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),ns.android=/Android \d/.test(navigator.userAgent),ns.webkit="webkitFontSmoothing"in document.documentElement.style,ns.webkit_version=ns.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var cs=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},us=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},fs=null,ds=function(e,t,n){var r=fs||(fs=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},hs=function(e,t,n,r){return n&&(ms(e,t,n,r,-1)||ms(e,t,n,r,1))},ps=/^(img|br|input|textarea|hr)$/i;function ms(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:gs(e))){var i=e.parentNode;if(1!=i.nodeType||vs(e)||ps.test(e.nodeName)||"false"==e.contentEditable)return!1;t=cs(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?gs(e):0}}}function gs(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vs(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var ys=function(e){var t=e.isCollapsed;return t&&ns.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function bs(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function ws(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ks(e,t){return"number"==typeof e?e:e[t]}function Ss(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function xs(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=us(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,l=a?ws(i):Ss(s),c=0,u=0;if(t.top<l.top+ks(r,"top")?u=-(l.top-t.top+ks(o,"top")):t.bottom>l.bottom-ks(r,"bottom")&&(u=t.bottom-l.bottom+ks(o,"bottom")),t.left<l.left+ks(r,"left")?c=-(l.left-t.left+ks(o,"left")):t.right>l.right-ks(r,"right")&&(c=t.right-l.right+ks(o,"right")),c||u)if(a)i.defaultView.scrollBy(c,u);else{var f=s.scrollLeft,d=s.scrollTop;u&&(s.scrollTop+=u),c&&(s.scrollLeft+=c);var h=s.scrollLeft-f,p=s.scrollTop-d;t={left:t.left-h,top:t.top-p,right:t.right-h,bottom:t.bottom-p}}if(a)break}}function Cs(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=us(e));return t}function Os(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Es=null;function Ms(e,t){for(var n,r,o=2e8,i=0,s=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=ds(l).getClientRects()}for(var f=0;f<u.length;f++){var d=u[f];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);var h=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(h<o){n=l,o=h,r=h&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==l.nodeType&&h&&(i=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=Ds(r,1);if(i.top!=i.bottom&&Ns(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:Ms(n,r)}function Ns(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function _s(e,t){var n,r,o,i,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(o=(n=a).offsetNode,i=n.offset)}catch(e){}if(!o&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var c,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var f=e.dom.getBoundingClientRect();if(!Ns(t,f))return null;if(!(u=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=t.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var u=l[c];if(Ns(n,u))return e(a,n,u)}if((s=(s+1)%o)==i)break}return t}(e.dom,t,f)))return null}if(ns.safari&&u.draggable&&(o=i=null),u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),o){if(ns.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var d,h=o.childNodes[i];"IMG"==h.nodeName&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,o,i,t))}null==c&&(c=function(e,t,n){var r=Ms(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,u,t));var p=e.docView.nearestDesc(u,!0);return{pos:c,inside:p?p.posAtStart-p.border:-1}}function Ds(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var Ts=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function As(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,s=ns.webkit||ns.gecko;if(3==o.nodeType){if(!s||!Ts.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var a=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==o.nodeValue.length?(a--,c=1):n<0?a--:l++,Ps(Ds(ds(o,a,l),c),c<0)}var u=Ds(ds(o,i,i),n);if(ns.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=Ds(ds(o,i-1,i-1),-1);if(f.top==u.top){var d=Ds(ds(o,i,i+1),-1);if(d.top!=u.top)return Ps(d,d.left<f.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==gs(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return Rs(h.getBoundingClientRect(),!1)}if(i<gs(o)){var p=o.childNodes[i];if(1==p.nodeType)return Rs(p.getBoundingClientRect(),!0)}return Rs(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==gs(o))){var m=o.childNodes[i-1],g=3==m.nodeType?ds(m,gs(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return Ps(Ds(g,1),!1)}if(i<gs(o)){var v=o.childNodes[i],y=3==v.nodeType?ds(v,0,s?0:1):1==v.nodeType?v:null;if(y)return Ps(Ds(y,-1),!0)}return Ps(Ds(3==o.nodeType?ds(o):o,-n),n>=0)}function Ps(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Rs(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Is(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var zs=/[\u0590-\u08ac]/;var Ls=null,Vs=null,Bs=!1;function js(e,t,n){return Ls==t&&Vs==n?Bs:(Ls=t,Vs=n,Bs="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return Is(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var i=As(e,o.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=ds(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return zs.test(r.parent.textContent)&&a.modify?Is(e,t,(function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?i:s}(e,t,n))}var Fs=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},$s={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};Fs.prototype.matchesWidget=function(){return!1},Fs.prototype.matchesMark=function(){return!1},Fs.prototype.matchesNode=function(){return!1},Fs.prototype.matchesHack=function(){return!1},$s.beforePosition.get=function(){return!1},Fs.prototype.parseRule=function(){return null},Fs.prototype.stopEvent=function(){return!1},$s.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},$s.border.get=function(){return 0},Fs.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Fs.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},$s.posBefore.get=function(){return this.parent.posBeforeChild(this)},$s.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},$s.posAfter.get=function(){return this.posBefore+this.size},$s.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Fs.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>cs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},Fs.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},Fs.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},Fs.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},Fs.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},Fs.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!i||!i.size||i.border||t<0&&o)||i&&i.domAtom&&e<n+i.size)return{node:this.contentDOM,offset:i?cs(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var s=n+i.size;if(!i.domAtom&&(t<0&&!i.border?s>=e:s>e)&&(s>e||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(e-n-i.border,t);n=s}},Fs.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&e<=l){var c=i+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=i;for(var u=s;u>0;u--){var f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=cs(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(var d=s+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=cs(h.dom);break}t+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},Fs.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Fs.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},Fs.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}var u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),d=n.getSelection(),h=!1;if((ns.gecko||ns.safari)&&e==t){var p=u.node,m=u.offset;if(3==p.nodeType)(h=m&&"\n"==p.nodeValue[m-1])&&m==p.nodeValue.length&&p.nextSibling&&"BR"==p.nextSibling.nodeName&&(u=f={node:p.parentNode,offset:cs(p)+1});else{var g=p.childNodes[m-1];h=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(r||h&&ns.safari||!hs(u.node,u.offset,d.anchorNode,d.anchorOffset)||!hs(f.node,f.offset,d.focusNode,d.focusOffset)){var v=!1;if((d.extend||e==t)&&!h){d.collapse(u.node,u.offset);try{e!=t&&d.extend(f.node,f.offset),v=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!v){if(e>t){var y=u;u=f,f=y}var b=document.createRange();b.setEnd(f.node,f.offset),b.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(b)}}},Fs.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},$s.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Fs.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},Fs.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},$s.domAtom.get=function(){return!1},Object.defineProperties(Fs.prototype,$s);var Us=[],qs=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,Us,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Fs),Ws=function(e){function t(t,n,r,o){e.call(this,t,Us,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(Fs),Hs=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=de.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=la(i,n,s,r)),e>0&&(i=la(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(Fs),Ks=function(e){function t(t,n,r,o,i,s,a,l,c){e.call(this,t,n.isLeaf?Us:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,i,s){var a,l,c=i.nodeViews[n.type.name],u=c&&c(n,i,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r,o),f=u&&u.dom,d=u&&u.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(f=(a=de.renderSpec(document,n.type.spec.toDOM(n))).dom,d=a.contentDOM);d||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var h=f;return f=ra(f,r,n),u?l=new Gs(e,n,r,o,f,d,h,u,i,s+1):n.isText?new Ys(e,n,r,o,f,h,i):new t(e,n,r,o,f,d,h,i,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?s.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&oa(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,i=r&&e.composing&&this.localCompositionNode(e,t),s=new sa(this,i&&i.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],u=null,f=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],h=void 0;l<o.length&&o[l].to==i;)(h||(h=[d])).push(o[l++]);if(h){h.sort(aa);for(var p=0;p<h.length;p++)n(h[p],f,!!u)}else n(d,f,!!u)}var m=void 0,g=void 0;if(u)g=-1,m=u,u=null;else{if(!(f<e.childCount))break;g=f,m=e.child(f++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from<=i&&o[l].to>i;)c.push(o[l++]);var y=i+m.nodeSize;if(m.isText){var b=y;l<o.length&&o[l].from<b&&(b=o[l].from);for(var w=0;w<c.length;w++)c[w].to<b&&(b=c[w].to);b<y&&(u=m.cut(b-i),m=m.cut(0,b-i),y=b,g=-1)}var k=c.length?m.isInline&&!m.isLeaf?c.filter((function(e){return!e.inline})):c.slice():Us;r(m,k,t.forChild(i,m),g),i=y}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?s.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?f.none:n.node.child(i).marks,r,e),s.placeWidget(t,e,o)}),(function(t,n,i,a){s.syncToMarks(t.marks,r,e),s.findNodeMatch(t,n,i,a)||s.updateNextNode(t,n,i,e,a)||s.addNode(t,n,i,e,o),o+=t.nodeSize})),s.syncToMarks(Us,r,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,n,r){for(var o=t.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],l=a.dom;if(l.parentNode==t){for(;l!=o;)o=ia(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(l,o);if(a instanceof Hs){var c=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),o=c?c.nextSibling:t.firstChild}}for(;o;)o=ia(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),ns.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(!(e.state.selection instanceof nt)||r<t||o>t+this.node.content.size)){var i=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=gs(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var l=s.text;o<e.childCount;){var c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){var u=l.lastIndexOf(t,r-a);if(u>=0&&u+t.length+a>=n)return a+u}}}return-1}(this.node.content,a,r-t,o-t);return l<0?null:{node:s,pos:l,text:a}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new Ws(this,i,n,o);e.compositionNodes.push(s),this.children=la(this.children,r,r+o.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!oa(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ta(this.dom,this.nodeDOM,ea(this.outerDeco,this.node,t),ea(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(Fs);function Js(e,t,n,r,o){return ra(r,t,e),new Ks(null,e,t,n,r,r,r,o,0)}var Ys=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(Ks),Qs=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Fs),Gs=function(e){function t(t,n,r,o,i,s,a,l,c,u){e.call(this,t,n,r,o,i,s,a,c,u),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(Ks);function Xs(e){e&&(this.nodeName=e)}Xs.prototype=Object.create(null);var Zs=[new Xs];function ea(e,t,n){if(0==e.length)return Zs;for(var r=n?Zs[0]:new Xs,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new Xs(s.nodeName)),s){var l=s[a];null!=l&&(n&&1==o.length&&o.push(r=new Xs(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+l:"style"==a?r.style=(r.style?r.style+";":"")+l:"nodeName"!=a&&(r[a]=l))}}return o}function ta(e,t,n,r){if(n==Zs&&r==Zs)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(o),a=Zs[0]),o=l}na(o,a||Zs[0],s)}return o}function na(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):Us,s=n.class?n.class.split(" ").filter(Boolean):Us,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&e.classList.add(s[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function ra(e,t,n){return ta(e,e,Zs,ea(t,n,1!=e.nodeType))}function oa(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ia(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var sa=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var n=e.childCount,r=t.length,o=new Map;n>0&&r>0;r--){var i=t[r-1],s=i.node;if(s){if(s!=e.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}(e.node.content,e.children)};function aa(e,t){return e.type.side-t.type.side}function la(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=null),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function ca(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var a,l,c=r.resolve(s);if(ys(n)){for(a=c;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&ot.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(e,t,n){for(var r=0==t,o=t==gs(e);r||o;){if(e==n)return!0;var i=cs(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==gs(e)}}(n.focusNode,n.focusOffset,o.dom))){var u=o.posBefore;l=new ot(s==u?c:r.resolve(u))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;a=r.resolve(f)}l||(l=ya(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1));return l}function ua(e){return e.editable?e.hasFocus():ba(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function fa(e,t){var n=e.state.selection;if(ga(e,n),ua(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,cs(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&ns.ie&&ns.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r,o,i=n.anchor,s=n.head;!da||n instanceof nt||(n.$from.parent.inlineContent||(r=ha(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=ha(e,n.to))),e.docView.setSelection(i,s,e.root,t),da&&(r&&ma(r),o&&ma(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){ua(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}sa.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},sa.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},sa.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=Hs.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},sa.prototype.findNodeMatch=function(e,t,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(e,t,n)){i=s;break}}else for(var a=this.index,l=Math.min(o.length,a+1);a<l;a++){var c=o[a];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},sa.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof Ks){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&oa(t,s.outerDeco)))&&s.update(e,t,n,r))return this.destroyBetween(this.index,i),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},sa.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,Ks.create(this.top,e,t,n,r,o)),this.changed=!0},sa.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new qs(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},sa.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof Hs;)e=e.children[e.children.length-1];if(!e||!(e instanceof Ys)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Qs(this.top,Us,t,null)),this.changed=!0}};var da=ns.safari||ns.chrome&&ns.chrome_version<63;function ha(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(ns.safari&&i&&"false"==i.contentEditable)return pa(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return pa(i);if(s)return pa(s)}}function pa(e){return e.contentEditable="true",ns.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function ma(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ga(e,t){if(t instanceof ot){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(va(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else va(e)}function va(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ya(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||nt.between(t,n,r)}function ba(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function wa(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ze.findFrom(s,t)}function ka(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Sa(e,t,n){var r=e.state.selection;if(!(r instanceof nt)){if(r instanceof ot&&r.node.isInline)return ka(e,new nt(t>0?r.$to:r.$from));var o=wa(e.state,t);return!!o&&ka(e,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=wa(e.state,t);return!!(i&&i instanceof ot)&&ka(e,i)}if(!(ns.mac&&n.indexOf("m")>-1)){var s,a=r.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=e.docView.descAt(c))&&!s.contentDOM)&&(ot.isSelectable(l)?ka(e,new ot(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!ns.webkit&&ka(e,new nt(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function xa(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ca(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Oa(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,s=!1;for(ns.gecko&&1==n.nodeType&&r<xa(n)&&Ca(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Ca(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(Ma(n))break;for(var l=n.previousSibling;l&&Ca(l);)o=n.parentNode,i=cs(l),l=l.previousSibling;if(l)r=xa(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}s?Na(e,t,n,r):o&&Na(e,t,o,i)}}function Ea(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=xa(n);;)if(r<s){if(1!=n.nodeType)break;if(!Ca(n.childNodes[r]))break;o=n,i=++r}else{if(Ma(n))break;for(var a=n.nextSibling;a&&Ca(a);)o=a.parentNode,i=cs(a)+1,a=a.nextSibling;if(a)r=0,s=xa(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}o&&Na(e,t,o,i)}}function Ma(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Na(e,t,n,r){if(ys(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&fa(e)}),50)}function _a(e,t,n){var r=e.state.selection;if(r instanceof nt&&!r.empty||n.indexOf("s")>-1)return!1;if(ns.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=wa(e.state,t);if(s&&s instanceof ot)return ka(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,l=r instanceof st?Ze.near(a,t):Ze.findFrom(a,t);return!!l&&ka(e,l)}return!1}function Da(e,t){if(!(e.state.selection instanceof nt))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),e.dispatch(a),!0}return!1}function Ta(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Aa(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||ns.mac&&72==n&&"c"==r?Da(e,-1)||Oa(e):46==n||ns.mac&&68==n&&"c"==r?Da(e,1)||Ea(e):13==n||27==n||(37==n?Sa(e,-1,r)||Oa(e):39==n?Sa(e,1,r)||Ea(e):38==n?_a(e,-1,r)||Oa(e):40==n?function(e){if(ns.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Ta(e,o,!0),setTimeout((function(){return Ta(e,o,!1)}),20)}}}(e)||_a(e,1,r)||Ea(e):r==(ns.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Pa(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(ns.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||ns.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Ra(e,t,n,r,o){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=ca(e,i);if(a&&!e.state.selection.eq(a)){var l=e.state.tr.setSelection(a);"pointer"==i?l.setMeta("pointer",!0):"key"==i&&l.scrollIntoView(),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),u=c.sharedDepth(n);t=c.before(u+1),n=e.state.doc.resolve(n).after(u+1);var f=e.state.selection,d=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,c=e.root.getSelection(),u=null,f=c.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(u=[{node:f,offset:c.anchorOffset}],ys(c)||u.push({node:c.focusNode,offset:c.focusOffset})),ns.chrome&&8===e.lastKeyCode)for(var d=s;d>i;d--){var h=o.childNodes[d-1],p=h.pmViewDesc;if("BR"==h.nodeType&&!p){s=d;break}if(!p||p.size)break}var m=e.state.doc,g=e.someProp("domParser")||te.fromSchema(e.state.schema),v=m.resolve(a),y=null,b=g.parse(o,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!v.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Pa,context:v});if(u&&null!=u[0].pos){var w=u[0].pos,k=u[1]&&u[1].pos;null==k&&(k=w),y={anchor:w+a,head:k+a}}return{doc:b,sel:y,from:a,to:l}}(e,t,n);if(ns.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var h=e.cursorWrapper.deco.type.toDOM.nextSibling,p=h&&h.nodeValue?h.nodeValue.length:1;d.sel={anchor:d.sel.anchor+p,head:d.sel.anchor+p}}var m,g,v=e.state.doc,y=v.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.lastKeyCode=null;var b=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));r-=a+c-i}if(a<i&&e.size<t.size){l=(i-=r<=i&&r>=a?i-r:0)+(l-a),a=i}else if(l<i){a=(i-=r<=i&&r>=l?i-r:0)+(a-l),l=i}return{start:i,endA:a,endB:l}}(y.content,d.doc.content,d.from,m,g);if(!b){if(!(r&&f instanceof nt&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(ns.ios&&e.lastIOSEnter>Date.now()-225&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,bs(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var w=Ia(e,e.state.doc,d.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}b={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof nt&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),ns.ie&&ns.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>d.from&&" Â "==d.doc.textBetween(b.start-d.from-1,b.start-d.from+1)&&(b.start--,b.endA--,b.endB--);var k,S=d.doc.resolveNoCache(b.start-d.from),x=d.doc.resolveNoCache(b.endB-d.from),C=S.sameParent(x)&&S.parent.inlineContent;if((ns.ios&&e.lastIOSEnter>Date.now()-225&&(!C||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!C&&S.pos<d.doc.content.size&&(k=Ze.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,bs(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||za(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(za(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||za(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(v,b.start,b.endA,S,x)&&e.someProp("handleKeyDown",(function(t){return t(e,bs(8,"Backspace"))})))ns.android&&ns.chrome&&e.domObserver.suppressSelectionUpdates();else{ns.android&&!C&&S.start()!=x.start()&&0==x.parentOffset&&S.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==b.endA&&(b.endB-=2,x=d.doc.resolveNoCache(b.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,bs(13,"Enter"))}))}),20));var O,E,M,N,_=b.start,D=b.endA;if(C)if(S.pos==x.pos)ns.ie&&ns.ie_version<=11&&0==S.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return fa(e)}),20)),O=e.state.tr.delete(_,D),E=v.resolve(b.start).marksAcross(v.resolve(b.endA));else if(b.endA==b.endB&&(N=v.resolve(b.start))&&(M=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,l=i,c=a,u=0;u<a.length;u++)l=a[u].removeFromSet(l);for(var f=0;f<i.length;f++)c=i[f].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],h=0;h<t.childCount;h++)d.push(o(t.child(h)));if(s.from(d).eq(e))return{mark:r,type:n}}(S.parent.content.cut(S.parentOffset,x.parentOffset),N.parent.content.cut(N.parentOffset,b.endA-N.start()))))O=e.state.tr,"add"==M.type?O.addMark(_,D,M.mark):O.removeMark(_,D,M.mark);else if(S.parent.child(S.index()).isText&&S.index()==x.index()-(x.textOffset?0:1)){var T=S.parent.textBetween(S.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,_,D,T)})))return;O=e.state.tr.insertText(T,_,D)}if(O||(O=e.state.tr.replace(_,D,d.doc.slice(b.start-d.from,b.endB-d.from))),d.sel){var A=Ia(e,O.doc,d.sel);A&&!(ns.chrome&&ns.android&&e.composing&&A.empty&&(A.head==_||A.head==O.mapping.map(D)-1)||ns.ie&&A.empty&&A.head==_)&&O.setSelection(A)}E&&O.ensureMarks(E),e.dispatch(O.scrollIntoView())}}}function Ia(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ya(e,t.resolve(n.anchor),t.resolve(n.head))}function za(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function La(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=e.someProp("clipboardSerializer")||de.fromSchema(e.state.schema),l=Ua(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));for(var u,f=c.firstChild;f&&1==f.nodeType&&(u=Fa[f.nodeName.toLowerCase()]);){for(var d=u.length-1;d>=0;d--){for(var h=l.createElement(u[d]);c.firstChild;)h.appendChild(c.firstChild);c.appendChild(h)}f=c.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:c,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Va(e,t,n,r,o){var i,a,l=o.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||l||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,l||r)})),l)return new h(s.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var u=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));u?a=u:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Ua().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Fa[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length);r.innerHTML=e;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var f=i&&i.querySelector("[data-pm-slice]"),d=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||te.fromSchema(e.state.schema);a=p.parseSlice(i,{preserveWhitespace:!(!c&&!d),context:o})}return a=d?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,l=n.length-2;l>=0;l-=2){var c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;o=s.from(c.create(n[l+1],o)),i++,a++}return new h(o,i,a)}(function(e,t,n){t<e.openStart&&(e=new h(ja(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new h(ja(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+d[1],+d[2]),d[3]):h.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(s.from(Ba(r,t,i+1))))}}(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(s.empty,!0);return t.copy(r.append(o))}(i[i.length-1],o.length));var a=Ba(e,n);i.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),i)return{v:s.from(i)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Ba(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,s.from(e));return e}function ja(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,l=a.content;return o<r-1&&(l=ja(l,t,n,r,o+1,i)),o>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,e.childCount>1||i<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(s.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}var Fa={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},$a=null;function Ua(){return $a||($a=document.implementation.createHTMLDocument("title"))}var qa={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Wa=ns.ie&&ns.ie_version<=11,Ha=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ha.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ha.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ka=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);ns.ie&&ns.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ha,Wa&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ka.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Ka.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ka.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,qa),Wa&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ka.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Wa&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ka.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ka.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ka.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Ka.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&ba(e)){var e;if(this.suppressingSelectionUpdates)return fa(this.view);if(ns.ie&&ns.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&hs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Ka.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ka.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ka.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&ba(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(ns.gecko&&s.length>1){var c=s.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var u=c[0],f=c[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(e){if(Ja)return;Ja=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||fa(this.view),this.currentSelection.set(t))}},Ka.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var r=e.previousSibling,o=e.nextSibling;if(ns.ie&&ns.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var s=e.addedNodes[i],a=s.previousSibling,l=s.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(r=a),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l)}for(var c=r&&r.parentNode==e.target?cs(r)+1:0,u=n.localPosFromDOM(e.target,c,-1),f=o&&o.parentNode==e.target?cs(o):e.target.childNodes.length,d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);return{from:u,to:n.localPosFromDOM(e.target,f,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Ja=!1;var Ya={},Qa={};function Ga(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Xa(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Za(e,t)})}))}function Za(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function el(e){return{left:e.clientX,top:e.clientY}}function tl(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function nl(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function rl(e,t,n,r,o){return tl(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof ot&&(n=o.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(ot.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(nl(e,ot.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&ot.isSelectable(r))&&(nl(e,new ot(n),"pointer"),!0)}(e,n))}function ol(e,t,n,r){return tl(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function il(e,t,n,r){return tl(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(nl(e,nt.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.inlineContent)nl(e,nt.create(n,s+1,s+1+i.content.size),"pointer");else{if(!ot.isSelectable(i))continue;nl(e,ot.create(n,s),"pointer")}return!0}}(e,n)}function sl(e){return hl(e)}Qa.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!cl(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!ns.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Aa(e,t)?t.preventDefault():Ga(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,bs(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Qa.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Qa.keypress=function(e,t){if(!(cl(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||ns.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof nt&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var al=ns.mac?"metaKey":"ctrlKey";Ya.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=sl(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[al]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(el(t));i&&("singleClick"==o?e.mouseDown=new ll(e,i,t,n):("doubleClick"==o?ol:il)(e,i.pos,i.inside,t)?t.preventDefault():Ga(e,"pointer"))};var ll=function(e,t,n,r){var o,i,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[al],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var a=e.state.doc.resolve(t.pos);o=a.parent,i=a.depth?a.before():0}this.mightDrag=null;var l=r?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof ot&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&ns.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ga(e,"pointer")};function cl(e,t){return!!e.composing||!!(ns.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}ll.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},ll.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(el(e))),this.allowDefault||!t?Ga(this.view,"pointer"):rl(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||ns.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||ns.chrome&&!(this.view.state.selection instanceof nt)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(nl(this.view,Ze.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ga(this.view,"pointer")}},ll.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Ga(this.view,"pointer")},Ya.touchdown=function(e){sl(e),Ga(e,"pointer")},Ya.contextmenu=function(e){return sl(e)};var ul=ns.android?5e3:-1;function fl(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return hl(e)}),t))}function dl(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function hl(e,t){if(e.domObserver.forceFlush(),dl(e),t||e.docView.dirty){var n=ca(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Qa.compositionstart=Qa.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),hl(e,!0),e.markCursor=null;else if(hl(e),ns.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}e.composing=!0}fl(e,ul)},Qa.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,fl(e,20))};var pl=ns.ie&&ns.ie_version<15||ns.ios&&ns.webkit_version<604;function ml(e,t,n,r){var o=Va(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||h.empty)})))return!0;if(!o)return!1;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ya.copy=Qa.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=pl?null:t.clipboardData,i=La(e,n.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Qa.paste=function(e,t){var n=pl?null:t.clipboardData;n&&ml(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ml(e,r.value,null,t):ml(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var gl=function(e,t){this.slice=e,this.move=t},vl=ns.mac?"altKey":"ctrlKey";for(var yl in Ya.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(el(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof ot?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(ot.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(ot.create(e.state.doc,i.posBefore)))}var s=e.state.selection.content(),a=La(e,s),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(pl?"Text":"text/html",l.innerHTML),pl||t.dataTransfer.setData("text/plain",c),e.dragging=new gl(s,!t[vl])}},Ya.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Qa.dragover=Qa.dragenter=function(e,t){return t.preventDefault()},Qa.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(el(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||Va(e,t.dataTransfer.getData(pl?"Text":"text/plain"),pl?null:t.dataTransfer.getData("text/html"),!1,o),s=n&&!t[vl];if(e.someProp("handleDrop",(function(n){return n(e,t,i||h.empty,s)})))t.preventDefault();else if(i){t.preventDefault();var a=i?Ve(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var l=e.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,f=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),!l.doc.eq(f)){var d=l.doc.resolve(c);if(u&&ot.isSelectable(i.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ot(d));else{var p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,n,r){return p=r})),l.setSelection(ya(e,d,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},Ya.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&fa(e)}),20))},Ya.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ya.beforeinput=function(e,t){if(ns.chrome&&ns.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,bs(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Qa)Ya[yl]=Qa[yl];function bl(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var wl=function(e,t){this.spec=t||El,this.side=this.spec.side||0,this.toDOM=e};wl.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new xl(i-n,i-n,this)},wl.prototype.valid=function(){return!0},wl.prototype.eq=function(e){return this==e||e instanceof wl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bl(this.spec,e.spec))};var kl=function(e,t){this.spec=t||El,this.attrs=e};kl.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new xl(o,i,this)},kl.prototype.valid=function(e,t){return t.from<t.to},kl.prototype.eq=function(e){return this==e||e instanceof kl&&bl(this.attrs,e.attrs)&&bl(this.spec,e.spec)},kl.is=function(e){return e.type instanceof kl};var Sl=function(e,t){this.spec=t||El,this.attrs=e};Sl.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new xl(o.pos-n,i.pos-n,this)},Sl.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},Sl.prototype.eq=function(e){return this==e||e instanceof Sl&&bl(this.attrs,e.attrs)&&bl(this.spec,e.spec)};var xl=function(e,t,n){this.from=e,this.to=t,this.type=n},Cl={spec:{configurable:!0},inline:{configurable:!0}};xl.prototype.copy=function(e,t){return new xl(e,t,this.type)},xl.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},xl.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},xl.widget=function(e,t,n){return new xl(e,e,new wl(t,n))},xl.inline=function(e,t,n,r){return new xl(e,t,new kl(n,r))},xl.node=function(e,t,n,r){return new xl(e,t,new Sl(n,r))},Cl.spec.get=function(){return this.type.spec},Cl.inline.get=function(){return this.type instanceof kl},Object.defineProperties(xl.prototype,Cl);var Ol=[],El={},Ml=function(e,t){this.local=e&&e.length?e:Ol,this.children=t&&t.length?t:Ol};Ml.create=function(e,t){return t.length?Pl(t,e,0,El):Nl},Ml.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Ml.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,n,r+l,o)}},Ml.prototype.map=function(e,t,n){return this==Nl||0==e.maps.length?this:this.mapInner(e,t,0,0,n||El)},Ml.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){for(var a=e.slice(),l=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+i||(t>=a[s]+i?a[s+1]=-1:n>=o&&(c=r-n-(t-e))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var d=n.map(e[f]+i),h=d-o;if(h<0||h>=r.content.size){u=!0;continue}var p=n.map(e[f+1]+i,-1)-o,m=r.content.findIndex(h),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==h&&v+y.nodeSize==p){var b=a[f+2].mapInner(n,y,d+1,e[f]+i+1,s);b!=Nl?(a[f]=h,a[f+1]=p,a[f+2]=b):(a[f+1]=-2,u=!0)}else u=!0}if(u){var w=Pl(function(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t||[],n,o,i,s),r,0,s);t=w.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var S=0,x=0;S<w.children.length;S+=3){for(var C=w.children[S];x<a.length&&a[x]<C;)x+=3;a.splice(x,0,w.children[S],w.children[S+1],w.children[S+2])}}return new Ml(t&&t.sort(Rl),a)}(this.children,i,e,t,n,r,o):i?new Ml(i.sort(Rl)):Nl},Ml.prototype.add=function(e,t){return t.length?this==Nl?Ml.create(e,t):this.addInner(e,t,0):this},Ml.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,s){var a,l=s+n;if(a=Tl(t,e,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,l+1):r.splice(i,0,s,s+e.nodeSize,Pl(a,e,l+1,El)),i+=3}}));for(var s=Dl(i?Al(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Ml(s.length?this.local.concat(s).sort(Rl):this.local,r||this.children)},Ml.prototype.remove=function(e){return 0==e.length||this==Nl?this:this.removeInner(e,0)},Ml.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<a&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Nl?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var f=0,d=void 0;f<e.length;f++)if(d=e[f])for(var h=0;h<r.length;h++)r[h].eq(d,t)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ml(r,n):Nl},Ml.prototype.forChild=function(e,t){if(this==Nl)return this;if(t.isLeaf)return Ml.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof kl){var c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var f=new Ml(r.sort(Rl));return n?new _l([f,n]):f}return n||Nl},Ml.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Ml)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Ml.prototype.locals=function(e){return Il(this.localsInner(e))},Ml.prototype.localsInner=function(e){if(this==Nl)return Ol;if(e.inlineContent||!this.local.some(kl.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof kl||t.push(this.local[n]);return t};var Nl=new Ml;Ml.empty=Nl,Ml.removeOverlap=Il;var _l=function(e){this.members=e};function Dl(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new xl(o.from+t,o.to+t,o.type))}return n}function Tl(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function Al(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Pl(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=Tl(e,t,s+n);if(a){i=!0;var l=Pl(a,t,n+s+1,r);l!=Nl&&o.push(s,s+t.nodeSize,l)}}));for(var s=Dl(i?Al(e):e,-n).sort(Rl),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ml(s,o):Nl}function Rl(e,t){return e.from-t.from||e.to-t.to}function Il(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),zl(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),zl(t,o+1,i.copy(r.to,i.to)))}}return t}function zl(e,t,n){for(;t<e.length&&Rl(n,e[t])>0;)t++;e.splice(t,0,n)}function Ll(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Nl&&t.push(r)})),e.cursorWrapper&&t.push(Ml.create(e.state.doc,[e.cursorWrapper.deco])),_l.from(t)}_l.prototype.forChild=function(e,t){if(t.isLeaf)return Ml.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=Nl&&(o instanceof _l?n=n.concat(o.members):n.push(o))}return _l.from(n)},_l.prototype.eq=function(e){if(!(e instanceof _l)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},_l.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Il(n?t:t.sort(Rl)):Ol},_l.from=function(e){switch(e.length){case 0:return Nl;case 1:return e[0];default:return new _l(e)}};var Vl=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=$l(this),this.markCursor=null,this.cursorWrapper=null,Fl(this),this.nodeViews=Ul(this),this.docView=Js(this.state.doc,jl(this),Ll(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ka(e,(function(t,n,r,o){return Ra(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ya[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Za(e,t)||!e.editable&&t.type in Qa||n(e,t)})};for(var n in Ya)t(n);ns.safari&&e.dom.addEventListener("input",(function(){return null})),Xa(e)}(this),this.pluginViews=[],this.updatePluginViews()},Bl={props:{configurable:!0},root:{configurable:!0}};function jl(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[xl.node(0,e.state.doc.content.size,t)]}function Fl(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:xl.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function $l(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Ul(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Bl.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Vl.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Xa(this),this._props=e,this.updateStateInner(e.state,!0)},Vl.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Vl.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Vl.prototype.updateStateInner=function(e,t){var n=this,r=this.state,o=!1,i=!1;if(e.storedMarks&&this.composing&&(dl(this),i=!0),this.state=e,t){var s=Ul(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0),Xa(this)}this.editable=$l(this),Fl(this);var a=Ll(this),l=jl(this),c=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(i=!0);var f,d,h,p,m,g,v,y,b,w,k,S="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=o-20){t=a,n=l.top;break}}}return{refDOM:t,refTop:n,stack:Cs(e.dom)}}(this);if(i){this.domObserver.stop();var x=u&&(ns.ie||ns.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(p=r.selection,m=e.selection,g=Math.min(p.$anchor.sharedDepth(p.head),m.$anchor.sharedDepth(m.head)),p.$anchor.start(g)!=m.$anchor.start(g));if(u){var C=ns.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Js(e.doc,l,a,this.dom,this)),C&&!this.trackWrites&&(x=!0)}x||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(f=this,d=f.docView.domFromPos(f.state.selection.anchor,0),h=f.root.getSelection(),hs(d.node,d.offset,h.anchorNode,h.anchorOffset)))?fa(this,x):(ga(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var O=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof ot?xs(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),O):xs(this,this.coordsAtPos(e.selection.head,1),O))}else S&&(y=(v=S).refDOM,b=v.refTop,w=v.stack,k=y?y.getBoundingClientRect().top:0,Os(w,0==k?0:k-b))},Vl.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Vl.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Vl.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},Vl.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Vl.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Es)return e.focus(Es);var t=Cs(e);e.focus(null==Es?{get preventScroll(){return Es={preventScroll:!0},!0}}:void 0),Es||(Es=!1,Os(t,0))}(this.dom),fa(this),this.domObserver.start()},Bl.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Vl.prototype.posAtCoords=function(e){return _s(this,e)},Vl.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),As(this,e,t)},Vl.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Vl.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Vl.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Vl.prototype.endOfTextblock=function(e,t){return js(this,t||this.state,e)},Vl.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ll(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Vl.prototype.dispatchEvent=function(e){return function(e,t){Za(e,t)||!Ya[t.type]||!e.editable&&t.type in Qa||Ya[t.type](e,t)}(this,e)},Vl.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Vl.prototype,Bl);var ql=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return h.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new Wl(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,s=e.depth;;s--){var a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}if(0==s)return null;o+=n;var l=e.doc.resolve(o);if(t.valid(l))return l}for(;;){var c=n>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!ot.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=c,o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}return null}},t}(Ze);ql.prototype.visible=!1,Ze.jsonID("gapcursor",ql);var Wl=function(e){this.pos=e};Wl.prototype.map=function(e){return new Wl(e.map(this.pos))},Wl.prototype.resolve=function(e){var t=e.resolve(this.pos);return ql.valid(t)?new ql(t):Ze.near(t)};var Hl=di({ArrowLeft:Kl("horiz",-1),ArrowRight:Kl("horiz",1),ArrowUp:Kl("vert",-1),ArrowDown:Kl("vert",1)});function Kl(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof nt){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}var l=ql.findFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new ql(l))),!0)}}function Jl(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!ql.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&ot.isSelectable(e.state.doc.nodeAt(o)))&&(e.dispatch(e.state.tr.setSelection(new ql(r))),!0)}function Yl(e){if(!(e.selection instanceof ql))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ml.create(e.doc,[xl.widget(e.selection.head,t,{key:"gapcursor"})])}function Ql(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];"string"==typeof o?e.setAttribute(r,o):null!=o&&(e[r]=o)}t++}for(;t<arguments.length;t++)Gl(e,arguments[t]);return e}function Gl(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)Gl(e,t[n])}}var Xl="http://www.w3.org/2000/svg",Zl="ProseMirror-icon";function ec(e){var t=document.createElement("div");if(t.className=Zl,e.path){var n="pm-icon-"+function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.path).toString(16);document.getElementById(n)||function(e,t){var n=document.getElementById(Zl+"-collection");n||((n=document.createElementNS(Xl,"svg")).id=Zl+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(Xl,"symbol");r.id=e,r.setAttribute("viewBox","0 0 "+t.width+" "+t.height),r.appendChild(document.createElementNS(Xl,"path")).setAttribute("d",t.path),n.appendChild(r)}(n,e);var r=t.appendChild(document.createElementNS(Xl,"svg"));r.style.width=e.width/e.height+"em",r.appendChild(document.createElementNS(Xl,"use")).setAttributeNS("http://www.w3.org/1999/xlink","href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else e.dom?t.appendChild(e.dom.cloneNode(!0)):(t.appendChild(document.createElement("span")).textContent=e.text||"",e.css&&(t.firstChild.style.cssText=e.css));return t}var tc="ProseMirror-menu",nc=function(e){this.spec=e};function rc(e,t){return e._props.translate?e._props.translate(t):t}nc.prototype.render=function(e){var t=this.spec,n=t.render?t.render(e):t.icon?ec(t.icon):t.label?Ql("div",null,rc(e,t.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(t.title){var r="function"==typeof t.title?t.title(e.state):t.title;n.setAttribute("title",rc(e,r))}return t.class&&n.classList.add(t.class),t.css&&(n.style.cssText+=t.css),n.addEventListener("mousedown",(function(r){r.preventDefault(),n.classList.contains(tc+"-disabled")||t.run(e.state,e.dispatch,e,r)})),{dom:n,update:function(e){if(t.select){var r=t.select(e);if(n.style.display=r?"":"none",!r)return!1}var o=!0;if(t.enable&&(o=t.enable(e)||!1,yc(n,tc+"-disabled",!o)),t.active){var i=o&&t.active(e)||!1;yc(n,tc+"-active",i)}return!0}}};var oc={time:0,node:null};function ic(e){oc.time=Date.now(),oc.node=e.target}function sc(e){return Date.now()-100<oc.time&&oc.node&&e.contains(oc.node)}var ac=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};function lc(e,t){for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o].render(t),s=i.dom,a=i.update;n.push(Ql("div",{class:tc+"-dropdown-item"},s)),r.push(a)}return{dom:n,update:cc(r,n)}}function cc(e,t){return function(n){for(var r=!1,o=0;o<e.length;o++){var i=e[o](n);t[o].style.display=i?"":"none",i&&(r=!0)}return r}}ac.prototype.render=function(e){var t=this,n=lc(this.content,e),r=Ql("div",{class:tc+"-dropdown "+(this.options.class||""),style:this.options.css},rc(e,this.options.label));this.options.title&&r.setAttribute("title",rc(e,this.options.title));var o=Ql("div",{class:tc+"-dropdown-wrap"},r),i=null,s=null,a=function(){i&&i.close()&&(i=null,window.removeEventListener("mousedown",s))};return r.addEventListener("mousedown",(function(e){e.preventDefault(),ic(e),i?a():(i=t.expand(o,n.dom),window.addEventListener("mousedown",s=function(){sc(o)||a()}))})),{dom:o,update:function(e){var t=n.update(e);return o.style.display=t?"":"none",t}}},ac.prototype.expand=function(e,t){var n=Ql("div",{class:tc+"-dropdown-menu "+(this.options.class||"")},t),r=!1;return e.appendChild(n),{close:function(){if(!r)return r=!0,e.removeChild(n),!0},node:n}};var uc=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};uc.prototype.render=function(e){var t=lc(this.content,e),n=Ql("div",{class:tc+"-submenu-label"},rc(e,this.options.label)),r=Ql("div",{class:tc+"-submenu-wrap"},n,Ql("div",{class:tc+"-submenu"},t.dom)),o=null;return n.addEventListener("mousedown",(function(e){e.preventDefault(),ic(e),yc(r,tc+"-submenu-wrap-active"),o||window.addEventListener("mousedown",o=function(){sc(r)||(r.classList.remove(tc+"-submenu-wrap-active"),window.removeEventListener("mousedown",o),o=null)})})),{dom:r,update:function(e){var n=t.update(e);return r.style.display=n?"":"none",n}}};var fc={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"â¬š",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},dc=new nc({title:"Join with above block",run:zi,select:function(e){return zi(e)},icon:fc.join}),hc=new nc({title:"Lift out of enclosing block",run:Vi,select:function(e){return Vi(e)},icon:fc.lift}),pc=new nc({title:"Select parent node",run:$i,select:function(e){return $i(e)},icon:fc.selectParentNode}),mc=new nc({title:"Undo last change",run:Di,enable:function(e){return Di(e)},icon:fc.undo}),gc=new nc({title:"Redo last undone change",run:Ti,enable:function(e){return Ti(e)},icon:fc.redo});function vc(e,t){var n=Wi(e,t.attrs),r={run:n,enable:function(e){return n(e)},active:function(n){var r=n.selection,o=r.$from,i=r.to,s=r.node;return s?s.hasMarkup(e,t.attrs):i<=o.end()&&o.parent.hasMarkup(e,t.attrs)}};for(var o in t)r[o]=t[o];return new nc(r)}function yc(e,t,n){n?e.classList.add(t):e.classList.remove(t)}var bc="ProseMirror-menubar";var wc=function(e,t){var n=this;this.editorView=e,this.options=t,this.wrapper=Ql("div",{class:bc+"-wrapper"}),this.menu=this.wrapper.appendChild(Ql("div",{class:bc})),this.menu.className=bc,this.spacer=null,e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var r=function(e,t){for(var n=document.createDocumentFragment(),r=[],o=[],i=0;i<t.length;i++){for(var s=t[i],a=[],l=[],c=0;c<s.length;c++){var u=s[c].render(e),f=u.dom,d=u.update,h=Ql("span",{class:tc+"item"},f);n.appendChild(h),l.push(h),a.push(d)}a.length&&(r.push(cc(a,l)),i<t.length-1&&o.push(n.appendChild(Ql("span",{class:tc+"separator"}))))}return{dom:n,update:function(e){for(var t=!1,n=!1,i=0;i<r.length;i++){var s=r[i](e);i&&(o[i-1].style.display=n&&s?"":"none"),n=s,s&&(t=!0)}return t}}}(this.editorView,this.options.content),o=r.dom,i=r.update;if(this.contentUpdate=i,this.menu.appendChild(o),this.update(),t.floating&&!function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return!/Edge\/\d/.test(e)&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e)}()){this.updateFloat();var s=function(e){for(var t=[window],n=e.parentNode;n;n=n.parentNode)t.push(n);return t}(this.wrapper);this.scrollFunc=function(e){var t=n.editorView.root;(t.body||t).contains(n.wrapper)?n.updateFloat(e.target.getBoundingClientRect&&e.target):s.forEach((function(e){return e.removeEventListener("scroll",n.scrollFunc)}))},s.forEach((function(e){return e.addEventListener("scroll",n.scrollFunc)}))}};wc.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},wc.prototype.updateScrollCursor=function(){var e=this.editorView.root.getSelection();if(e.focusNode){var t=e.getRangeAt(0).getClientRects(),n=t[function(e){if(e.anchorNode==e.focusNode)return e.anchorOffset>e.focusOffset;return e.anchorNode.compareDocumentPosition(e.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(e)?0:t.length-1];if(n){var r=this.menu.getBoundingClientRect();if(n.top<r.bottom&&n.bottom>r.top){var o=function(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}(this.wrapper);o&&(o.scrollTop-=r.bottom-n.top)}}}},wc.prototype.updateFloat=function(e){var t=this.wrapper,n=t.getBoundingClientRect(),r=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(n.top>=r||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var o=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=n.left+o+"px",this.menu.style.display=n.top>window.innerHeight?"none":"",e&&(this.menu.style.top=r+"px")}else if(n.top<r&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;var i=this.menu.getBoundingClientRect();this.menu.style.left=i.left+"px",this.menu.style.width=i.width+"px",e&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=Ql("div",{class:bc+"-spacer",style:"height: "+i.height+"px"}),t.insertBefore(this.spacer,this.menu)}},wc.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)};function kc(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,l=i.blockRange(a),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(e)&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;var f=n.doc.resolve(l.start-2);u=new M(f,f,l.depth),l.endIndex<l.parent.childCount&&(l=new M(i,n.doc.resolve(a.end(l.depth)),l.depth)),c=!0}var d=Ae(u,e,t,l);return!!d&&(r&&r(function(e,t,n,r,o){for(var i=s.empty,a=n.length-1;a>=0;a--)i=s.from(n[a].type.create(n[a].attrs,i));e.step(new Ne(t.start-(r?2:0),t.end,t.start,t.end,new h(i,0,0),n.length,!0));for(var l=0,c=0;c<n.length;c++)n[c].type==o&&(l=c+1);for(var u=n.length-l,f=t.start+n.length-(r?2:0),d=t.parent,p=t.startIndex,m=t.endIndex,g=!0;p<m;p++,g=!1)!g&&Re(e.doc,f,u)&&(e.split(f,u),f+=2*u),f+=d.child(p).nodeSize;return e}(n.tr,l,d,c,e).scrollIntoView()),!0)}}function Sc(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=r.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(i))return!1;var l=o.node(-1);if(l.type!=e)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var c=s.empty,u=o.index(-1)>0,f=o.depth-(u?1:2);f>=o.depth-3;f--)c=s.from(o.node(f).copy(c));c=c.append(s.from(e.createAndFill()));var d=t.tr.replace(o.before(u?null:-1),o.after(-3),new h(c,u?3:2,2));d.setSelection(t.selection.constructor.near(d.doc.resolve(o.pos+(u?3:2)))),n(d.scrollIntoView())}return!0}var p=i.pos==o.end()?l.contentMatchAt(0).defaultType:null,m=t.tr.delete(o.pos,i.pos),g=p&&[null,{type:p}];return!!Re(m.doc,o.pos,2,g)&&(n&&n(m.split(o.pos,2,g).scrollIntoView()),!0)}}function xc(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));return!!a&&(!n||(o.node(a.depth-1).type==e?function(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new Ne(i-1,a,i,a,new h(s.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new M(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));return t(o.lift(r,Te(r)).scrollIntoView()),!0}(t,n,e,a):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,l=n.startIndex;a>l;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var c=r.doc.resolve(n.start),u=c.nodeAfter,f=0==n.startIndex,d=n.endIndex==o.childCount,p=c.node(-1),m=c.index(-1);if(!p.canReplace(m+(f?0:1),m+1,u.content.append(d?s.empty:s.from(o))))return!1;var g=c.pos,v=g+u.nodeSize;return r.step(new Ne(g-(f?1:0),v+(d?1:0),g+1,v-1,new h((f?s.empty:s.from(o.copy(s.empty))).append(d?s.empty:s.from(o.copy(s.empty))),f?0:1,d?0:1),f?0:1)),t(r.scrollIntoView()),!0}(t,n,a)))}}function Cc(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));if(!a)return!1;var l=a.startIndex;if(0==l)return!1;var c=a.parent,u=c.child(l-1);if(u.type!=e)return!1;if(n){var f=u.lastChild&&u.lastChild.type==c.type,d=s.from(f?e.create():null),p=new h(s.from(e.create(null,s.from(c.type.create(null,d)))),f?3:1,0),m=a.start,g=a.end;n(t.tr.step(new Ne(m-(f?3:1),g,m,g,p,1,!0)).scrollIntoView())}return!0}}var Oc=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){var i=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);i+=t[0].slice(s+t[1].length);var a=(r+=s)-o;a>0&&(i=t[0].slice(s-a,s)+i,r=o)}return e.tr.insertText(i,r,o)}):t};function Ec(e,t,n,r,o,i){if(e.composing)return!1;var s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"ï¿¼")+r,c=0;c<o.length;c++){var u=o[c].match.exec(l),f=u&&o[c].handler(s,u,t-(u[0].length-r.length),n);if(f)return e.dispatch(f.setMeta(i,{transform:f,from:t,to:n,text:r})),!0}return!1}function Mc(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){for(var s=e.tr,a=i.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(i.text){var c=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,e.schema.text(i.text,c))}else s.delete(i.from,i.to);t(s)}return!0}}return!1}var Nc=new Oc(/--$/,"â€”"),_c=new Oc(/\.\.\.$/,"â€¦"),Dc=[new Oc(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"â€œ"),new Oc(/"$/,"â€"),new Oc(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"â€˜"),new Oc(/'$/,"â€™")];function Tc(e,t,n,r){return new Oc(e,(function(e,o,i,s){var a=n instanceof Function?n(o):n,l=e.tr.delete(i,s),c=l.doc.resolve(i).blockRange(),u=c&&Ae(c,t,a);if(!u)return null;l.wrap(c,u);var f=l.doc.resolve(i-1).nodeBefore;return f&&f.type==t&&Ie(l.doc,i-1)&&(!r||r(o,f))&&l.join(i-1),l}))}function Ac(e,t,n){return new Oc(e,(function(e,r,o,i){var s=e.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null}))}function Pc(e){var t=document.body.appendChild(document.createElement("div"));t.className="ProseMirror-prompt";var n=function(e){t.contains(e.target)||r()};setTimeout((function(){return window.addEventListener("mousedown",n)}),50);var r=function(){window.removeEventListener("mousedown",n),t.parentNode&&t.parentNode.removeChild(t)},o=[];for(var i in e.fields)o.push(e.fields[i].render());var s=document.createElement("button");s.type="submit",s.className="ProseMirror-prompt-submit",s.textContent="OK";var a=document.createElement("button");a.type="button",a.className="ProseMirror-prompt-cancel",a.textContent="Cancel",a.addEventListener("click",r);var l=t.appendChild(document.createElement("form"));e.title&&(l.appendChild(document.createElement("h5")).textContent=e.title),o.forEach((function(e){l.appendChild(document.createElement("div")).appendChild(e)}));var c=l.appendChild(document.createElement("div"));c.className="ProseMirror-prompt-buttons",c.appendChild(s),c.appendChild(document.createTextNode(" ")),c.appendChild(a);var u=t.getBoundingClientRect();t.style.top=(window.innerHeight-u.height)/2+"px",t.style.left=(window.innerWidth-u.width)/2+"px";var f=function(){var t=function(e,t){var n=Object.create(null),r=0;for(var o in e){var i=e[o],s=t[r++],a=i.read(s),l=i.validate(a);if(l)return Rc(s,l),null;n[o]=i.clean(a)}return n}(e.fields,o);t&&(r(),e.callback(t))};l.addEventListener("submit",(function(e){e.preventDefault(),f()})),l.addEventListener("keydown",(function(e){27==e.keyCode?(e.preventDefault(),r()):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey?9==e.keyCode&&window.setTimeout((function(){t.contains(document.activeElement)||r()}),500):(e.preventDefault(),f())}));var d=l.elements[0];d&&d.focus()}function Rc(e,t){var n=e.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=e.offsetLeft+e.offsetWidth+2+"px",r.style.top=e.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=t,setTimeout((function(){return n.removeChild(r)}),1500)}var Ic=function(e){this.options=e};Ic.prototype.read=function(e){return e.value},Ic.prototype.validateType=function(e){},Ic.prototype.validate=function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)},Ic.prototype.clean=function(e){return this.options.clean?this.options.clean(e):e};var zc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e},t}(Ic);function Lc(e,t){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1}function Vc(e,t){var n={label:t.title,run:e};for(var r in t)n[r]=t[r];return t.enable&&!0!==t.enable||t.select||(n[t.enable?"enable":"select"]=function(t){return e(t)}),new nc(n)}function Bc(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)}function jc(e,t){var n={active:function(t){return Bc(t,e)},enable:!0};for(var r in t)n[r]=t[r];return Vc(Hi(e),n)}function Fc(e,t){return Vc(kc(e,t.attrs),t)}function $c(e){var t,n,r,o={};if((t=e.marks.strong)&&(o.toggleStrong=jc(t,{title:"Toggle strong style",icon:fc.strong})),(t=e.marks.em)&&(o.toggleEm=jc(t,{title:"Toggle emphasis",icon:fc.em})),(t=e.marks.code)&&(o.toggleCode=jc(t,{title:"Toggle code font",icon:fc.code})),(t=e.marks.link)&&(o.toggleLink=(n=t,new nc({title:"Add or remove link",icon:fc.link,active:function(e){return Bc(e,n)},enable:function(e){return!e.selection.empty},run:function(e,t,r){if(Bc(e,n))return Hi(n)(e,t),!0;Pc({title:"Create a link",fields:{href:new zc({label:"Link target",required:!0}),title:new zc({label:"Title"})},callback:function(e){Hi(n,e)(r.state,r.dispatch),r.focus()}})}}))),(t=e.nodes.image)&&(o.insertImage=(r=t,new nc({title:"Insert image",label:"Image",enable:function(e){return Lc(e,r)},run:function(e,t,n){var o=e.selection,i=o.from,s=o.to,a=null;e.selection instanceof ot&&e.selection.node.type==r&&(a=e.selection.node.attrs),Pc({title:"Insert image",fields:{src:new zc({label:"Location",required:!0,value:a&&a.src}),title:new zc({label:"Title",value:a&&a.title}),alt:new zc({label:"Description",value:a?a.alt:e.doc.textBetween(i,s," ")})},callback:function(e){n.dispatch(n.state.tr.replaceSelectionWith(r.createAndFill(e))),n.focus()}})}}))),(t=e.nodes.bullet_list)&&(o.wrapBulletList=Fc(t,{title:"Wrap in bullet list",icon:fc.bulletList})),(t=e.nodes.ordered_list)&&(o.wrapOrderedList=Fc(t,{title:"Wrap in ordered list",icon:fc.orderedList})),(t=e.nodes.blockquote)&&(o.wrapBlockQuote=function(e,t){var n={run:function(n,r){return qi(e,t.attrs)(n,r)},select:function(n){return qi(e,t.attrs instanceof Function?null:t.attrs)(n)}};for(var r in t)n[r]=t[r];return new nc(n)}(t,{title:"Wrap in block quote",icon:fc.blockquote})),(t=e.nodes.paragraph)&&(o.makeParagraph=vc(t,{title:"Change to paragraph",label:"Plain"})),(t=e.nodes.code_block)&&(o.makeCodeBlock=vc(t,{title:"Change to code block",label:"Code"})),t=e.nodes.heading)for(var i=1;i<=10;i++)o["makeHead"+i]=vc(t,{title:"Change to heading "+i,label:"Level "+i,attrs:{level:i}});if(t=e.nodes.horizontal_rule){var s=t;o.insertHorizontalRule=new nc({title:"Insert horizontal rule",label:"Horizontal rule",enable:function(e){return Lc(e,s)},run:function(e,t){t(e.tr.replaceSelectionWith(s.create()))}})}var a=function(e){return e.filter((function(e){return e}))};return o.insertMenu=new ac(a([o.insertImage,o.insertHorizontalRule]),{label:"Insert"}),o.typeMenu=new ac(a([o.makeParagraph,o.makeCodeBlock,o.makeHead1&&new uc(a([o.makeHead1,o.makeHead2,o.makeHead3,o.makeHead4,o.makeHead5,o.makeHead6]),{label:"Heading"})]),{label:"Type..."}),o.inlineMenu=[a([o.toggleStrong,o.toggleEm,o.toggleCode,o.toggleLink])],o.blockMenu=[a([o.wrapBulletList,o.wrapOrderedList,o.wrapBlockQuote,dc,hc,pc])],o.fullMenu=o.inlineMenu.concat([[o.insertMenu,o.typeMenu]],[[mc,gc]],o.blockMenu),o}var Uc="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function qc(e,t){var n,r={};function o(e,n){if(t){var o=t[e];if(!1===o)return;o&&(e=o)}r[e]=n}if(o("Mod-z",Di),o("Shift-Mod-z",Ti),o("Backspace",Mc),Uc||o("Mod-y",Ti),o("Alt-ArrowUp",zi),o("Alt-ArrowDown",Li),o("Mod-BracketLeft",Vi),o("Escape",$i),(n=e.marks.strong)&&(o("Mod-b",Hi(n)),o("Mod-B",Hi(n))),(n=e.marks.em)&&(o("Mod-i",Hi(n)),o("Mod-I",Hi(n))),(n=e.marks.code)&&o("Mod-`",Hi(n)),(n=e.nodes.bullet_list)&&o("Shift-Ctrl-8",kc(n)),(n=e.nodes.ordered_list)&&o("Shift-Ctrl-9",kc(n)),(n=e.nodes.blockquote)&&o("Ctrl->",qi(n)),n=e.nodes.hard_break){var i=n,s=Ki(ji,(function(e,t){return t(e.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0}));o("Mod-Enter",s),o("Shift-Enter",s),Uc&&o("Ctrl-Enter",s)}if((n=e.nodes.list_item)&&(o("Enter",Sc(n)),o("Mod-[",xc(n)),o("Mod-]",Cc(n))),(n=e.nodes.paragraph)&&o("Shift-Ctrl-0",Wi(n)),(n=e.nodes.code_block)&&o("Shift-Ctrl-\\",Wi(n)),n=e.nodes.heading)for(var a=1;a<=6;a++)o("Shift-Ctrl-"+a,Wi(n,{level:a}));if(n=e.nodes.horizontal_rule){var l=n;o("Mod-_",(function(e,t){return t(e.tr.replaceSelectionWith(l.create()).scrollIntoView()),!0}))}return r}function Wc(e){var t,n=Dc.concat(_c,Nc);return(t=e.nodes.blockquote)&&n.push(Tc(/^\s*>\s$/,t)),(t=e.nodes.ordered_list)&&n.push(function(e){return Tc(/^(\d+)\.\s$/,e,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order==+e[1]}))}(t)),(t=e.nodes.bullet_list)&&n.push(function(e){return Tc(/^\s*([-+*])\s$/,e)}(t)),(t=e.nodes.code_block)&&n.push(function(e){return Ac(/^```$/,e)}(t)),(t=e.nodes.heading)&&n.push(function(e,t){return Ac(new RegExp("^(#{1,"+t+"})\\s$"),e,(function(e){return{level:e[1].length}}))}(t,6)),function(e){var t=e.rules,n=new yt({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,o,i){return Ec(e,r,o,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection.$cursor;r&&Ec(e,r.pos,r.pos,"",t,n)}))}}},isInputRules:!0});return n}({rules:n})}function Hc(e){var t=[Wc(e.schema),fi(qc(e.schema,e.mapKeys)),fi(Zi),es(),new yt({props:{decorations:Yl,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&ql.valid(n))return new ql(n)},handleClick:Jl,handleKeyDown:Hl}})];return!1!==e.menuBar&&t.push(function(e){return new yt({view:function(t){return new wc(t,e)}})}({floating:!1!==e.floatingMenu,content:e.menuContent||$c(e.schema).fullMenu})),!1!==e.history&&t.push(_i()),t.concat(new yt({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}var Kc=n(4),Jc=n.n(Kc);function Yc(e){var t,n,r,o,i,s,a=e.editorView,l=e.icon,c=e.mark,u=e.title,f=(t=a.state,n=c,r=t.selection,o=r.from,i=r.$from,s=r.to,r.empty?n.isInSet(t.storedMarks||i.marks()):t.doc.rangeHasMark(o,s,n)),d=l;return Jc.a.createElement("button",{title:u,onMouseDown:function(e){e.preventDefault(),Hi(c)(a.state,a.dispatch)},style:{border:"0 solid transparent",fontSize:26,borderRadius:4,background:f?"black":"white",color:f?"white":"black",padding:"0rem 0.3rem 0.2rem",marginRight:"0.1rem"}},Jc.a.createElement(d,{style:{display:"inline-block",verticalAlign:"middle"}}))}function Qc(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,l=i.blockRange(a),c=!1,u=l;if(!l||!u)return!1;if(l.depth>=2&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;var f=n.doc.resolve(l.start-2);u=new M(f,f,l.depth),l.endIndex<l.parent.childCount&&(l=new M(i,n.doc.resolve(a.end(l.depth)),l.depth)),c=!0}var d=Ae(u,e,t,l);return!!d&&(r&&r(function(e,t,n,r,o){for(var i=s.empty,a=n.length-1;a>=0;a--)i=s.from(n[a].type.create(n[a].attrs,i));e.step(new Ne(t.start-(r?2:0),t.end,t.start,t.end,new h(i,0,0),n.length,!0));for(var l=0,c=0;c<n.length;c++)n[c].type==o&&(l=c+1);for(var u=n.length-l,f=t.start+n.length-(r?2:0),d=t.parent,p=t.startIndex,m=t.endIndex,g=!0;p<m;p++,g=!1)!g&&Re(e.doc,f,u)&&(e.split(f,u),f+=2*u),f+=d.child(p).nodeSize;return e}(n.tr,l,d,c,e).scrollIntoView()),!0)}}function Gc(e){var t=e.editorView,n=e.icon,r=e.nodeType,o=e.title,i=Qc(r),s=i(t.state),a=n;return Jc.a.createElement("button",{title:o,onMouseDown:function(e){e.preventDefault(),i(t.state,t.dispatch)},style:{border:"0 solid transparent",fontSize:24,borderRadius:4,background:"white",color:s?"black":"#ccc",padding:"0rem 0.3rem 0.2rem",marginRight:"0.1rem"}},Jc.a.createElement(a,{style:{display:"inline-block",verticalAlign:"middle"}}))}function Xc(e){return Jc.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",version:"1.1",style:e.style},Jc.a.createElement("title",null,"Checklist Icon"),Jc.a.createElement("path",{d:"M5.27747564,15.9954951 L6.07297077,16.7909903 L2.89099026,19.9729708 L1.3,18.3819805 L2.09549513,17.5864854 L2.89099026,18.3819805 L5.27747564,15.9954951 Z M5.27747564,3.99549513 L6.07297077,4.79099026 L2.89099026,7.97297077 L1.3,6.38198052 L2.09549513,5.58648539 L2.89099026,6.38198052 L5.27747564,3.99549513 Z M5.27747564,9.99549513 L6.07297077,10.7909903 L2.89099026,13.9729708 L1.3,12.3819805 L2.09549513,11.5864854 L2.89099026,12.3819805 L5.27747564,9.99549513 Z M7,5 L7,7 L21,7 L21,5 L7,5 Z M7,19 L21,19 L21,17 L7,17 L7,19 Z M7,13 L21,13 L21,11 L7,11 L7,13 Z",fill:"currentColor"}))}function Zc(e){var t=e.editorView,n=e.nodeType,r=e.title,o=Qc(n),i=o(t.state);return Jc.a.createElement("button",{title:r,onMouseDown:function(e){e.preventDefault(),o(t.state,t.dispatch)},style:{border:"0 solid transparent",fontSize:24,borderRadius:4,background:"white",color:i?"black":"#ccc",padding:"0rem 0.3rem 0.2rem",marginRight:"0.1rem"}},Jc.a.createElement(Xc,{style:{display:"inline-block",verticalAlign:"middle"}}))}function eu(e){var t=e.editorView,n=e.icon,r=e.title,o=e.command,i=n,s=o(t.state);return Jc.a.createElement("button",{title:r,onMouseDown:function(e){e.preventDefault(),o(t.state,t.dispatch)},style:{border:"0 solid transparent",fontSize:24,borderRadius:4,background:"white",color:s?"black":"#ccc",padding:"0rem 0.3rem 0.2rem",marginRight:"0.1rem"}},Jc.a.createElement(i,{style:{display:"inline-block",verticalAlign:"middle"}}))}function tu(e){var t=e.editorView,n=e.icon,r=e.title,o=e.nodeType,i=e.attrs,s=n,a=Wi(o,i),l=!function(e){var t=e.state,n=e.nodeType,r=e.attrs,o=t.selection,i=o.$from,s=o.to,a=o.node;return a?a.hasMarkup(n,r):s<=i.end()&&i.parent.hasMarkup(n)&&i.parent.attrs.level===(null==r?void 0:r.level)}({state:t.state,nodeType:o,attrs:i})&&a(t.state);return Jc.a.createElement("button",{title:r,onMouseDown:function(e){e.preventDefault(),a(t.state,t.dispatch)},style:{border:"0 solid transparent",fontSize:24,borderRadius:4,background:"white",color:l?"black":"#ccc",padding:"0rem 0.3rem 0.2rem",marginRight:"0.1rem"}},Jc.a.createElement(s,{style:{display:"inline-block",verticalAlign:"middle"}}))}var nu={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ru=Jc.a.createContext&&Jc.a.createContext(nu),ou=function(){return(ou=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},iu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function su(e){return function(t){return Jc.a.createElement(au,ou({attr:ou({},e.attr)},t),function e(t){return t&&t.map((function(t,n){return Jc.a.createElement(t.tag,ou({key:n},t.attr),e(t.child))}))}(e.child))}}function au(e){var t=function(t){var n,r=e.attr,o=e.size,i=e.title,s=iu(e,["attr","size","title"]),a=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),Jc.a.createElement("svg",ou({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:ou(ou({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Jc.a.createElement("title",null,i),e.children)};return void 0!==ru?Jc.a.createElement(ru.Consumer,null,(function(e){return t(e)})):t(nu)}function lu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}}]})(e)}function cu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}}]})(e)}function uu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}}]})(e)}function fu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}}]})(e)}function du(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}}]})(e)}function hu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}}]})(e)}function pu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}}]})(e)}function mu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 20L18 4 15 4 15 10 9 10 9 4 6 4 6 20 9 20 9 13 15 13 15 20z"}}]})(e)}function gu(e){return su({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9,16h2v4h2V6h2v14h2V6h3V4h-7h-2H9c-3.309,0-6,2.691-6,6S5.691,16,9,16z M9,6h2v8H9c-2.206,0-4-1.794-4-4S6.794,6,9,6z"}}]})(e)}function vu(e){var t=e.editorView;return Jc.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"0.5rem 0.2rem"}},Jc.a.createElement("div",null,Jc.a.createElement(Yc,{editorView:t,mark:Go.marks.strong,icon:uu,title:"Toggle strong style"}),Jc.a.createElement(Yc,{editorView:t,mark:Go.marks.em,icon:du,title:"Toggle emphasis style"}),Jc.a.createElement("span",{style:{borderRight:"1px solid #ddd",marginRight:"0.6rem"}}),Jc.a.createElement(tu,{nodeType:Go.nodes.paragraph,editorView:t,icon:gu,title:"Change to paragraph"}),Jc.a.createElement(tu,{nodeType:Go.nodes.heading,attrs:{level:2},editorView:t,icon:mu,title:"Change to heading 2"}),Jc.a.createElement(Gc,{editorView:t,nodeType:Go.nodes.bullet_list,icon:hu,title:"Wrap in bullet list"}),Jc.a.createElement(Gc,{editorView:t,nodeType:Go.nodes.ordered_list,icon:pu,title:"Wrap in ordered list"}),Jc.a.createElement(Zc,{editorView:t,nodeType:Go.nodes.checklist,title:"Wrap in checklist"}),Jc.a.createElement(eu,{command:Vi,editorView:t,icon:fu,title:"Lift out of enclosing block"})),Jc.a.createElement("div",null,Jc.a.createElement(eu,{command:Di,editorView:t,icon:cu,title:"Undo"}),Jc.a.createElement(eu,{command:Ti,editorView:t,icon:lu,title:"Redo"})))}var yu=n(21),bu=n.n(yu);function wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ku=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(r="editorView")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.editorView=t,this.update(),bu.a.render(Jc.a.createElement(vu,{editorView:t}),document.getElementById("editor-toolbar"))}var t,n,r;return t=e,(n=[{key:"update",value:function(){bu.a.render(Jc.a.createElement(vu,{editorView:this.editorView}),document.getElementById("editor-toolbar"))}},{key:"destroy",value:function(){}}])&&wu(t.prototype,n),r&&wu(t,r),e}();function Su(e,t,n,r,o){if(o.target.classList.contains("on-click-check"))return o.preventDefault(),e.dispatch(function(e,t,n){return e.tr.setNodeMarkup(t,null,{checked:!n.attrs.checked})}(e.state,r,n)),!0}window.addEventListener("load",(function(){var e=new r.c;window.ydoc=e;var t=e.getXmlFragment("document");e.on("update",(function(e){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(Array.from(e)))}));var n=document.getElementById("editor"),o=document.getElementById("editor-toolbar"),i=$c(Go);new uo(n,{state:mt.create({schema:Go,plugins:[Eo(t),new yt({view:function(e){return new ku(e)}}),fi({Enter:Sc(Go.nodes.checklist_item),"Mod-[":xc(Go.nodes.checklist_item),"Mod-]":Cc(Go.nodes.checklist_item)})].concat(Hc({schema:Go,menuBar:!1,menuContent:[i.fullMenu[0],[i.blockMenu[0][0],i.blockMenu[0][1],i.blockMenu[0][3]],i.fullMenu[2]]}))}),handleClickOn:Su,handleDOMEvents:{focus:function(e,t){var n=document.getElementsByClassName("ProseMirror")[0];o.style.height="53px",n.style.height="calc(100vh - 53px)"},blur:function(e,t){var n=document.getElementsByClassName("ProseMirror")[0];o.style.height="0px",n.style.height="100vh"}}});window.applyYjsUpdate=function(e){if(e){var t=new Uint8Array(e);r.j(window.ydoc,t)}}}))}]);
//# sourceMappingURL=/prosemirror/dist/prosemirror.bundle.js.map</script></body>
</html>
